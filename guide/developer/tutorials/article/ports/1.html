<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/120a5a1920781bd0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/icon.png"/><link rel="preload" as="image" href="/burger-menu.svg"/><link rel="preload" as="image" href="/guide/developer/tutorials/connect-to.png"/><link rel="preload" as="image" href="/guide/developer/tutorials/ports/1/off-and-on.png"/><link rel="preload" as="image" href="/four_colour_stripes_banner.png"/><link rel="stylesheet" href="/_next/static/css/b207df9cce6f5d60.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/e904a45b9345fabf.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-157b59dfea80b4f6.js"/><script src="/_next/static/chunks/1347409b-5cbdd9a6015a8a75.js" async=""></script><script src="/_next/static/chunks/1914-46939293f0dc903a.js" async=""></script><script src="/_next/static/chunks/main-app-132a974eaff95eac.js" async=""></script><script src="/_next/static/chunks/5555-7fa0558dbec5c878.js" async=""></script><script src="/_next/static/chunks/app/guide/developer/tutorials/article/ports/1/page-c357616abbd95c28.js" async=""></script><script src="/_next/static/chunks/app/layout-c56e517873900da0.js" async=""></script><title>Alchemy</title><meta name="description" content="A Virtual Studio"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_c0d5fb"><div class="style_main__l8Il9"><div><div class="style_desktop__CvcZU"><div class="style_main__JqgJs"><div class="style_logo___Nv4Y"><a class="style_logoLink__8L3yx" href="/"><img src="/icon.png" class="style_logoImage__PktfC"/></a></div><div class="style_links__h4_vb"><div class="style_linkAndSub__7qTZ1"><a class="style_link__4XuJC" href="/news">News</a></div><div class="style_linkAndSub__7qTZ1"><a class="style_link__4XuJC" href="/guide">Guide</a><div class="style_sub__vF1DF"><div class="style_linkAndSub__7qTZ1"><a class="style_link__4XuJC" href="/guide/getting-started">Getting Started</a></div><div class="style_linkAndSub__7qTZ1"><a class="style_link__4XuJC" href="/guide/units">Units</a></div><div class="style_linkAndSub__7qTZ1"><a class="style_link__4XuJC" href="/guide/developer">Developer</a></div></div></div><a class="style_download__caECe" href="/download">Download</a></div></div></div><div class="style_mobile__mRKt2"><div class="style_main__JqgJs style_main__Q562K"><div class="style_logo___Nv4Y"><a class="style_logoLink__8L3yx" href="/"><img src="/icon.png" class="style_logoImage__PktfC"/></a></div><div><img class="style_menuButtonImage__jSbvp" src="/burger-menu.svg"/></div></div></div><main><div class="style_main__c51pI"><div class="style_main__F_177"><a class="style_link__eozNW" aria-disabled="false" href="/">home</a><p class="style_divider__YWHjs">/</p><a class="style_link__eozNW" aria-disabled="false" href="/guide">guide</a><p class="style_divider__YWHjs">/</p><a class="style_link__eozNW" aria-disabled="false" href="/guide/developer">developer</a><p class="style_divider__YWHjs">/</p><a class="style_link__eozNW" aria-disabled="false" href="/guide/developer/tutorials">tutorials</a><p class="style_divider__YWHjs">/</p><a class="style_link__eozNW" aria-disabled="true" tabindex="-1" href="/guide/developer/tutorials/article/ports/1">Ports - Part 1</a></div><div class="style_content__rQ3D1"><h1 class="style_title__QJpJn">Ports - Part 1</h1><h2 class="style_subTitle___R0E7">Light And Port</h2><img src="/guide/developer/tutorials/connect-to.png" class="style_headerImage__jM6kU"/><div class="style_childrenWrapper__Nt54u"><h2>Introduction</h2><p>In this tutorial, we will be looking at the use of ports. As you will discover, ports are a very simple part and act in a manor consistent with other parts. In this Part 1, we will create a unit that has a boolean port and use signals that this port receives to light a glowbox.</p><h2>The Unit Description</h2><p>First things first, lets create a unit. Nothing too complicated, just a simple rectangle with a port and a glowbox.</p><div class="style_main__L8yyS"><h3 class="style_title__oTWxy">Note</h3><div class="style_children__6YSiK">We will be using the Deno runtime to run a typescript program. You can learn about how to set this up in the <a href="/guide/developer/tutorials/article/how-to-make-a-unit/1">How To Make A Unit</a> tutorial</div></div><br/><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre><pre class="style_line__dmLdn">20</pre><pre class="style_line__dmLdn">21</pre><pre class="style_line__dmLdn">22</pre><pre class="style_line__dmLdn">23</pre><pre class="style_line__dmLdn">24</pre><pre class="style_line__dmLdn">25</pre><pre class="style_line__dmLdn">26</pre><pre class="style_line__dmLdn">27</pre><pre class="style_line__dmLdn">28</pre><pre class="style_line__dmLdn">29</pre><pre class="style_line__dmLdn">30</pre><pre class="style_line__dmLdn">31</pre><pre class="style_line__dmLdn">32</pre><pre class="style_line__dmLdn">33</pre><pre class="style_line__dmLdn">34</pre><pre class="style_line__dmLdn">35</pre><pre class="style_line__dmLdn">36</pre><pre class="style_line__dmLdn">37</pre><pre class="style_line__dmLdn">38</pre><pre class="style_line__dmLdn">39</pre><pre class="style_line__dmLdn">40</pre><pre class="style_line__dmLdn">41</pre><pre class="style_line__dmLdn">42</pre><pre class="style_line__dmLdn">43</pre><pre class="style_line__dmLdn">44</pre><pre class="style_line__dmLdn">45</pre><pre class="style_line__dmLdn">46</pre><pre class="style_line__dmLdn">47</pre><pre class="style_line__dmLdn">48</pre><pre class="style_line__dmLdn">49</pre><pre class="style_line__dmLdn">50</pre><pre class="style_line__dmLdn">51</pre><pre class="style_line__dmLdn">52</pre><pre class="style_line__dmLdn">53</pre><pre class="style_line__dmLdn">54</pre><pre class="style_line__dmLdn">55</pre><pre class="style_line__dmLdn">56</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">{</pre><pre class="style_line__dmLdn">	&quot;modelName&quot;: &quot;light_and_port&quot;,</pre><pre class="style_line__dmLdn">	&quot;printName&quot;: &quot;Light &amp; Port&quot;,</pre><pre class="style_line__dmLdn">	&quot;space&quot;: [</pre><pre class="style_line__dmLdn">		{&quot;x&quot;: 0.0, &quot;y&quot;: 0.0},</pre><pre class="style_line__dmLdn">		{&quot;x&quot;: 0.0, &quot;y&quot;: 50.0},</pre><pre class="style_line__dmLdn">		{&quot;x&quot;: 50.0, &quot;y&quot;: 50.0},</pre><pre class="style_line__dmLdn">		{&quot;x&quot;: 50.0, &quot;y&quot;: 0.0}</pre><pre class="style_line__dmLdn">	],</pre><pre class="style_line__dmLdn">	&quot;collisionActive&quot;: true,</pre><pre class="style_line__dmLdn">	&quot;executable&quot;: {</pre><pre class="style_line__dmLdn">		&quot;mac&quot;: &quot;../deno&quot;,</pre><pre class="style_line__dmLdn">		&quot;win&quot;: &quot;../deno.exe&quot;,</pre><pre class="style_line__dmLdn">		&quot;args&quot;: [&quot;run&quot;, &quot;--allow-read&quot;, &quot;main.ts&quot;]</pre><pre class="style_line__dmLdn">	},</pre><pre class="style_line__dmLdn">	&quot;base&quot;: [</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;backing&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;rectangle&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;width&quot;: 50.0,</pre><pre class="style_line__dmLdn">					&quot;height&quot;: 50.0,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0.5, &quot;g&quot;: 0.5, &quot;b&quot;: 1.0}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		}</pre><pre class="style_line__dmLdn">	],</pre><pre class="style_line__dmLdn">	&quot;parts&quot;: {</pre><pre class="style_line__dmLdn">		&quot;back&quot;: [</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;port&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;booleanPort&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 50.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 10.0,</pre><pre class="style_line__dmLdn">						&quot;width&quot;: 15.0</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		],</pre><pre class="style_line__dmLdn">		&quot;front&quot;: [</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;light&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;glowboxCircle&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 25.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 25.0,</pre><pre class="style_line__dmLdn">						&quot;radius&quot;: 15.0</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		]</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn">}</pre></div></div><div class="style_showMore__8WfBB"><p>Show More</p></div></div><h2>The Inner Workings</h2><p>The code controlling all this is really very simple. Port events come as a &quot;Process Event&quot; thus we must create a callback for the &quot;setProcessEventListener&quot;. The object provided by the &quot;setProcessEventListener&quot; is a standard <a href="/guide/developer/reference/viewer?referenceFile=Platform/interface/part/event/PartEvent.intermediateFormat.json">Part Event</a> so we must filter this for the Port type.</p><p>A Port event can have many types corresponding to the many things that can happen to a port. One of these events is a port receiving a message. Every other type is related to a user action. You can see the full list <a href="/guide/developer/reference/viewer?referenceFile=Platform/interface/part/advanced/port/event/PortEvent.intermediateFormat.json">here</a>.</p><div class="style_main__L8yyS"><h3 class="style_title__oTWxy">Note</h3><div class="style_children__6YSiK"><p>A &quot;message&quot; event is essentially an update of the state of the signal being transmitted by the other end of the connection. The illusion is that these connections are &quot;charged&quot; much like a wire in real life.</p><p>Of course the wire isn&#x27;t real in this virtual world, so some smoke-and-mirrors are required to maintain this illusion. As such a &quot;message&quot; event will always follow a &quot;gainedConnection&quot; event, allowing you to adjust to the state of the connection when a connection is made.</p><p>This is only true for the Boolean and F32 port types. Datagrams are treated like packets over a network, so if the connection is not made when a datagram is sent, then it is simply lost. Audio connections will never receive &quot;messages&quot; as they are only used to manage audio connections in the audio rendering engine.</p></div></div><p>What we must write, is a handler that filters for the Port event type, then lights the glowbox if the received message is &quot;true&quot; and dim the glowbox if it is &quot;false&quot;. We must also account for the circumstance in which the connection is lost, at which point we must dim the glowbox.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">import apiConsole from &quot;../typescript-deno-0.3.3-0.1.0/index.ts&quot;;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">apiConsole.unit.setProcessEventListener(({event}) =&gt; {</pre><pre class="style_line__dmLdn">	if(event.type === &quot;port&quot;) {</pre><pre class="style_line__dmLdn">		const portEvent = event.content;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		switch(portEvent.type) {</pre><pre class="style_line__dmLdn">			case &quot;message&quot;:</pre><pre class="style_line__dmLdn">				const portMessageEvent = portEvent.content;</pre><pre class="style_line__dmLdn">				if(portMessageEvent.type === &quot;boolean&quot;) {</pre><pre class="style_line__dmLdn">					const portBooleanMessageEvent = portMessageEvent.content;</pre><pre class="style_line__dmLdn">					apiConsole.interface.glowbox.onOff(0, true, portBooleanMessageEvent);</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			break;</pre><pre class="style_line__dmLdn">			case &quot;lostConnection&quot;:</pre><pre class="style_line__dmLdn">				apiConsole.interface.glowbox.onOff(0, true, false);</pre><pre class="style_line__dmLdn">			break;</pre><pre class="style_line__dmLdn">		}</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn">});</pre></div></div></div><div class="style_group__F7vT_"><p>To set up the callback, we use the &quot;setProcessEventListener&quot; providing it with our callback function. This function takes a <a href="/guide/developer/reference/viewer?referenceFile=Platform/interface/part/event/PartEvent.intermediateFormat.json">Part Event</a> object.</p><p>On line 3 we check to see if it it of the correct type, and if so we unwrap the content on line 4, garnering us the <a href="/guide/developer/reference/viewer?referenceFile=Platform/interface/part/advanced/port/event/PortEvent.intermediateFormat.json">PortEvent</a>. We then use a switch statement on lines 6 through 18 to handle two events; &quot;message&quot; and &quot;lostConnection&quot;.</p><p>The &quot;message&quot; case is very straightforward. We unwrap the content on line 8, check to see if its of the correct type (a boolean) on line 9, then unwrap that to uncover the value itself on line 10. This value is then passed straight through to the glowbox&#x27;s &quot;onOff&quot; command on line 11.</p><p>The &quot;lostConnection&quot; event is even simpler, we just run the same &quot;onOff&quot; command but with the value argument set to &#x27;false&#x27;.</p></div><h2>Done!</h2><p>All going well, you should have something that looks like this</p><img class="style_image__0ycHi" src="/guide/developer/tutorials/ports/1/off-and-on.png"/><p>Playing around with the connection, it should disactivate the glowbox when the connection is broken and reactive when the connection is made again (when the boolean signal is active, of course)</p><p>In the next chapter we&#x27;ll look into how to send signals.</p></div><div class="style_previousNext__Pea0Y"><a class="style_nextPreviousButton__BDi40 style_nextPage__eSJ7i" href="/guide/developer/tutorials/article/ports/2">Next</a></div></div></div></main></div><footer class="style_main__NsKqp"><img src="/four_colour_stripes_banner.png" class="style_backgroundImage___DZ8F"/><div class="style_overlay__nf3f4"><p>© Metasophiea / Interloper 2024</p></div></footer></div><script src="/_next/static/chunks/webpack-157b59dfea80b4f6.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/120a5a1920781bd0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/b207df9cce6f5d60.css\",\"style\"]\n3:HL[\"/_next/static/css/e904a45b9345fabf.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[992,[],\"\"]\n6:I[5555,[\"5555\",\"static/chunks/5555-7fa0558dbec5c878.js\",\"4169\",\"static/chunks/app/guide/developer/tutorials/article/ports/1/page-c357616abbd95c28.js\"],\"\"]\n7:I[2657,[\"5555\",\"static/chunks/5555-7fa0558dbec5c878.js\",\"4169\",\"static/chunks/app/guide/developer/tutorials/article/ports/1/page-c357616abbd95c28.js\"],\"default\"]\n8:I[6882,[],\"\"]\n9:I[6126,[],\"\"]\na:I[4929,[\"5555\",\"static/chunks/5555-7fa0558dbec5c878.js\",\"3185\",\"static/chunks/app/layout-c56e517873900da0.js\"],\"default\"]\nc:I[5999,[],\"\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b207df9cce6f5d60.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"K_M-gQAewWTOagKz-HKbd\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/guide/developer/tutorials/article/ports/1\",\"initialTree\":[\"\",{\"children\":[\"guide\",{\"children\":[\"developer\",{\"children\":[\"tutorials\",{\"children\":[\"article\",{\"children\":[\"ports\",{\"children\":[\"1\",{\"children\":[\"__PAGE__\",{}]}]}]}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"guide\",{\"children\":[\"developer\",{\"children\":[\"tutorials\",{\"children\":[\"article\",{\"children\":[\"ports\",{\"children\":[\"1\",{\"children\":[\"__PAGE__\",{},[[\"$L5\",[\"$\",\"main\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"style_main__c51pI\",\"children\":[[\"$\",\"div\",null,{\"className\":\"style_main__F_177\",\"children\":[[\"$\",\"$L6\",\"0\",{\"href\":\"/\",\"className\":\"style_link__eozNW\",\"aria-disabled\":false,\"tabIndex\":\"$undefined\",\"children\":\"home\"}],[\"$\",\"p\",\"divider1\",{\"className\":\"style_divider__YWHjs\",\"children\":\"/\"}],[\"$\",\"$L6\",\"1\",{\"href\":\"/guide\",\"className\":\"style_link__eozNW\",\"aria-disabled\":false,\"tabIndex\":\"$undefined\",\"children\":\"guide\"}],[\"$\",\"p\",\"divider2\",{\"className\":\"style_divider__YWHjs\",\"children\":\"/\"}],[\"$\",\"$L6\",\"2\",{\"href\":\"/guide/developer\",\"className\":\"style_link__eozNW\",\"aria-disabled\":false,\"tabIndex\":\"$undefined\",\"children\":\"developer\"}],[\"$\",\"p\",\"divider3\",{\"className\":\"style_divider__YWHjs\",\"children\":\"/\"}],[\"$\",\"$L6\",\"3\",{\"href\":\"/guide/developer/tutorials\",\"className\":\"style_link__eozNW\",\"aria-disabled\":false,\"tabIndex\":\"$undefined\",\"children\":\"tutorials\"}],[\"$\",\"p\",\"divider4\",{\"className\":\"style_divider__YWHjs\",\"children\":\"/\"}],[\"$\",\"$L6\",\"4\",{\"href\":\"/guide/developer/tutorials/article/ports/1\",\"className\":\"style_link__eozNW\",\"aria-disabled\":true,\"tabIndex\":-1,\"children\":\"Ports - Part 1\"}]]}],[\"$\",\"div\",null,{\"className\":\"style_content__rQ3D1\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"style_title__QJpJn\",\"children\":\"Ports - Part 1\"}],[\"$\",\"h2\",null,{\"className\":\"style_subTitle___R0E7\",\"children\":\"Light And Port\"}],[\"$\",\"img\",null,{\"src\":\"/guide/developer/tutorials/connect-to.png\",\"className\":\"style_headerImage__jM6kU\"}],[\"$\",\"div\",null,{\"className\":\"style_childrenWrapper__Nt54u\",\"children\":[[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],[\"$\",\"p\",null,{\"children\":\"In this tutorial, we will be looking at the use of ports. As you will discover, ports are a very simple part and act in a manor consistent with other parts. In this Part 1, we will create a unit that has a boolean port and use signals that this port receives to light a glowbox.\"}],[\"$\",\"h2\",null,{\"children\":\"The Unit Description\"}],[\"$\",\"p\",null,{\"children\":\"First things first, lets create a unit. Nothing too complicated, just a simple rectangle with a port and a glowbox.\"}],[\"$\",\"div\",null,{\"className\":\"style_main__L8yyS\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"style_title__oTWxy\",\"children\":\"Note\"}],[\"$\",\"div\",null,{\"className\":\"style_children__6YSiK\",\"children\":[\"We will be using the Deno runtime to run a typescript program. You can learn about how to set this up in the \",[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/guide/developer/tutorials/article/how-to-make-a-unit/1\",\"children\":\"How To Make A Unit\"}],\" tutorial\"]}]]}],[\"$\",\"br\",null,{}],[\"$\",\"$L7\",null,{\"lines\":[\"{\",\"\\t\\\"modelName\\\": \\\"light_and_port\\\",\",\"\\t\\\"printName\\\": \\\"Light \u0026 Port\\\",\",\"\\t\\\"space\\\": [\",\"\\t\\t{\\\"x\\\": 0.0, \\\"y\\\": 0.0},\",\"\\t\\t{\\\"x\\\": 0.0, \\\"y\\\": 50.0},\",\"\\t\\t{\\\"x\\\": 50.0, \\\"y\\\": 50.0},\",\"\\t\\t{\\\"x\\\": 50.0, \\\"y\\\": 0.0}\",\"\\t],\",\"\\t\\\"collisionActive\\\": true,\",\"\\t\\\"executable\\\": {\",\"\\t\\t\\\"mac\\\": \\\"../deno\\\",\",\"\\t\\t\\\"win\\\": \\\"../deno.exe\\\",\",\"\\t\\t\\\"args\\\": [\\\"run\\\", \\\"--allow-read\\\", \\\"main.ts\\\"]\",\"\\t},\",\"\\t\\\"base\\\": [\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"backing\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"rectangle\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"width\\\": 50.0,\",\"\\t\\t\\t\\t\\t\\\"height\\\": 50.0,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0.5, \\\"g\\\": 0.5, \\\"b\\\": 1.0}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t}\",\"\\t],\",\"\\t\\\"parts\\\": {\",\"\\t\\t\\\"back\\\": [\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"port\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"booleanPort\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 50.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 10.0,\",\"\\t\\t\\t\\t\\t\\t\\\"width\\\": 15.0\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t],\",\"\\t\\t\\\"front\\\": [\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"light\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"glowboxCircle\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\t\\\"radius\\\": 15.0\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t]\",\"\\t}\",\"}\"],\"includeLineNumbers\":true}],[\"$\",\"h2\",null,{\"children\":\"The Inner Workings\"}],[\"$\",\"p\",null,{\"children\":[\"The code controlling all this is really very simple. Port events come as a \\\"Process Event\\\" thus we must create a callback for the \\\"setProcessEventListener\\\". The object provided by the \\\"setProcessEventListener\\\" is a standard \",[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/guide/developer/reference/viewer?referenceFile=Platform/interface/part/event/PartEvent.intermediateFormat.json\",\"children\":\"Part Event\"}],\" so we must filter this for the Port type.\"]}],[\"$\",\"p\",null,{\"children\":[\"A Port event can have many types corresponding to the many things that can happen to a port. One of these events is a port receiving a message. Every other type is related to a user action. You can see the full list \",[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/guide/developer/reference/viewer?referenceFile=Platform/interface/part/advanced/port/event/PortEvent.intermediateFormat.json\",\"children\":\"here\"}],\".\"]}],[\"$\",\"div\",null,{\"className\":\"style_main__L8yyS\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"style_title__oTWxy\",\"children\":\"Note\"}],[\"$\",\"div\",null,{\"className\":\"style_children__6YSiK\",\"children\":[[\"$\",\"p\",null,{\"children\":\"A \\\"message\\\" event is essentially an update of the state of the signal being transmitted by the other end of the connection. The illusion is that these connections are \\\"charged\\\" much like a wire in real life.\"}],[\"$\",\"p\",null,{\"children\":\"Of course the wire isn't real in this virtual world, so some smoke-and-mirrors are required to maintain this illusion. As such a \\\"message\\\" event will always follow a \\\"gainedConnection\\\" event, allowing you to adjust to the state of the connection when a connection is made.\"}],[\"$\",\"p\",null,{\"children\":\"This is only true for the Boolean and F32 port types. Datagrams are treated like packets over a network, so if the connection is not made when a datagram is sent, then it is simply lost. Audio connections will never receive \\\"messages\\\" as they are only used to manage audio connections in the audio rendering engine.\"}]]}]]}],[\"$\",\"p\",null,{\"children\":\"What we must write, is a handler that filters for the Port event type, then lights the glowbox if the received message is \\\"true\\\" and dim the glowbox if it is \\\"false\\\". We must also account for the circumstance in which the connection is lost, at which point we must dim the glowbox.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"import apiConsole from \\\"../typescript-deno-0.3.3-0.1.0/index.ts\\\";\",\"\",\"apiConsole.unit.setProcessEventListener(({event}) =\u003e {\",\"\\tif(event.type === \\\"port\\\") {\",\"\\t\\tconst portEvent = event.content;\",\"\",\"\\t\\tswitch(portEvent.type) {\",\"\\t\\t\\tcase \\\"message\\\":\",\"\\t\\t\\t\\tconst portMessageEvent = portEvent.content;\",\"\\t\\t\\t\\tif(portMessageEvent.type === \\\"boolean\\\") {\",\"\\t\\t\\t\\t\\tconst portBooleanMessageEvent = portMessageEvent.content;\",\"\\t\\t\\t\\t\\tapiConsole.interface.glowbox.onOff(0, true, portBooleanMessageEvent);\",\"\\t\\t\\t\\t}\",\"\\t\\t\\tbreak;\",\"\\t\\t\\tcase \\\"lostConnection\\\":\",\"\\t\\t\\t\\tapiConsole.interface.glowbox.onOff(0, true, false);\",\"\\t\\t\\tbreak;\",\"\\t\\t}\",\"\\t}\",\"});\"],\"includeLineNumbers\":true}],[\"$\",\"div\",null,{\"className\":\"style_group__F7vT_\",\"children\":[[\"$\",\"p\",null,{\"children\":[\"To set up the callback, we use the \\\"setProcessEventListener\\\" providing it with our callback function. This function takes a \",[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/guide/developer/reference/viewer?referenceFile=Platform/interface/part/event/PartEvent.intermediateFormat.json\",\"children\":\"Part Event\"}],\" object.\"]}],[\"$\",\"p\",null,{\"children\":[\"On line 3 we check to see if it it of the correct type, and if so we unwrap the content on line 4, garnering us the \",[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/guide/developer/reference/viewer?referenceFile=Platform/interface/part/advanced/port/event/PortEvent.intermediateFormat.json\",\"children\":\"PortEvent\"}],\". We then use a switch statement on lines 6 through 18 to handle two events; \\\"message\\\" and \\\"lostConnection\\\".\"]}],[\"$\",\"p\",null,{\"children\":\"The \\\"message\\\" case is very straightforward. We unwrap the content on line 8, check to see if its of the correct type (a boolean) on line 9, then unwrap that to uncover the value itself on line 10. This value is then passed straight through to the glowbox's \\\"onOff\\\" command on line 11.\"}],[\"$\",\"p\",null,{\"children\":\"The \\\"lostConnection\\\" event is even simpler, we just run the same \\\"onOff\\\" command but with the value argument set to 'false'.\"}]]}],[\"$\",\"h2\",null,{\"children\":\"Done!\"}],[\"$\",\"p\",null,{\"children\":\"All going well, you should have something that looks like this\"}],[\"$\",\"img\",null,{\"className\":\"style_image__0ycHi\",\"src\":\"/guide/developer/tutorials/ports/1/off-and-on.png\"}],[\"$\",\"p\",null,{\"children\":\"Playing around with the connection, it should disactivate the glowbox when the connection is broken and reactive when the connection is made again (when the boolean signal is active, of course)\"}],[\"$\",\"p\",null,{\"children\":\"In the next chapter we'll look into how to send signals.\"}]]}],[\"$\",\"div\",null,{\"className\":\"style_previousNext__Pea0Y\",\"children\":[\"$undefined\",[\"$\",\"$L6\",null,{\"href\":\"/guide/developer/tutorials/article/ports/2\",\"className\":\"style_nextPreviousButton__BDi40 style_nextPage__eSJ7i\",\"children\":\"Next\"}]]}]]}]]}]}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\",\"developer\",\"children\",\"tutorials\",\"children\",\"article\",\"children\",\"ports\",\"children\",\"1\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/e904a45b9345fabf.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\",\"developer\",\"children\",\"tutorials\",\"children\",\"article\",\"children\",\"ports\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\",\"developer\",\"children\",\"tutorials\",\"children\",\"article\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\",\"developer\",\"children\",\"tutorials\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\",\"developer\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_c0d5fb\",\"children\":[\"$\",\"div\",null,{\"className\":\"style_main__l8Il9\",\"children\":[[\"$\",\"div\",null,{\"children\":[[[\"$\",\"div\",null,{\"className\":\"style_desktop__CvcZU\",\"children\":[\"$\",\"div\",null,{\"className\":\"style_main__JqgJs\",\"children\":[[\"$\",\"div\",null,{\"className\":\"style_logo___Nv4Y\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/\",\"className\":\"style_logoLink__8L3yx\",\"children\":[\"$\",\"img\",null,{\"src\":\"/icon.png\",\"className\":\"style_logoImage__PktfC\"}]}]}],[\"$\",\"div\",null,{\"className\":\"style_links__h4_vb\",\"children\":[[[\"$\",\"div\",\"link-0\",{\"className\":\"style_linkAndSub__7qTZ1\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"/news\",\"className\":\"style_link__4XuJC\",\"children\":\"News\"}],\"$undefined\"]}],[\"$\",\"div\",\"link-1\",{\"className\":\"style_linkAndSub__7qTZ1\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"/guide\",\"className\":\"style_link__4XuJC\",\"children\":\"Guide\"}],[\"$\",\"div\",null,{\"className\":\"style_sub__vF1DF\",\"children\":[[\"$\",\"div\",\"link-1-sublink-0\",{\"className\":\"style_linkAndSub__7qTZ1\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/guide/getting-started\",\"className\":\"style_link__4XuJC\",\"children\":\"Getting Started\"}]}],[\"$\",\"div\",\"link-1-sublink-1\",{\"className\":\"style_linkAndSub__7qTZ1\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/guide/units\",\"className\":\"style_link__4XuJC\",\"children\":\"Units\"}]}],[\"$\",\"div\",\"link-1-sublink-2\",{\"className\":\"style_linkAndSub__7qTZ1\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/guide/developer\",\"className\":\"style_link__4XuJC\",\"children\":\"Developer\"}]}]]}]]}]],[\"$\",\"$L6\",null,{\"href\":\"/download\",\"className\":\"style_download__caECe\",\"children\":\"Download\"}]]}]]}]}],[\"$\",\"div\",null,{\"className\":\"style_mobile__mRKt2\",\"children\":[\"$\",\"$La\",null,{}]}]],[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]]}],[\"$\",\"footer\",null,{\"className\":\"style_main__NsKqp\",\"children\":[[\"$\",\"img\",null,{\"src\":\"/four_colour_stripes_banner.png\",\"className\":\"style_backgroundImage___DZ8F\"}],[\"$\",\"div\",null,{\"className\":\"style_overlay__nf3f4\",\"children\":[\"$\",\"p\",null,{\"children\":\"© Metasophiea / Interloper 2024\"}]}]]}]]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Alchemy\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"A Virtual Studio\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n5:null\n"])</script></body></html>