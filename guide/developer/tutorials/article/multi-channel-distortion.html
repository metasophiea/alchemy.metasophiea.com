<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="preload" href="/_next/static/media/120a5a1920781bd0-s.p.woff2" as="font" crossorigin="" type="font/woff2"/><link rel="preload" as="image" href="/icon.png"/><link rel="preload" as="image" href="/burger-menu.svg"/><link rel="preload" as="image" href="/four_colour_stripes_banner.png"/><link rel="preload" as="image" href="/guide/developer/tutorials/multi-channel-distortion/flow.png"/><link rel="preload" as="image" href="/guide/developer/tutorials/multi-channel-distortion/unit.png"/><link rel="preload" as="image" href="/guide/developer/tutorials/multi-channel-distortion/unit-in-system.png"/><link rel="stylesheet" href="/_next/static/css/b207df9cce6f5d60.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/0686439a7d1c5f34.css" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-9c7419ab1ba4157d.js"/><script src="/_next/static/chunks/1347409b-5cbdd9a6015a8a75.js" async=""></script><script src="/_next/static/chunks/1914-46939293f0dc903a.js" async=""></script><script src="/_next/static/chunks/main-app-132a974eaff95eac.js" async=""></script><script src="/_next/static/chunks/5555-7fa0558dbec5c878.js" async=""></script><script src="/_next/static/chunks/app/guide/developer/tutorials/article/multi-channel-distortion/page-e12c59b27db149e1.js" async=""></script><script src="/_next/static/chunks/app/layout-c56e517873900da0.js" async=""></script><title>Alchemy</title><meta name="description" content="A Virtual Studio"/><meta name="next-size-adjust"/><script src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js" noModule=""></script></head><body class="__className_c0d5fb"><div class="style_main__l8Il9"><div><div class="style_desktop__CvcZU"><div class="style_main__JqgJs"><div class="style_logo___Nv4Y"><a class="style_logoLink__8L3yx" href="/"><img src="/icon.png" class="style_logoImage__PktfC"/></a></div><div class="style_links__h4_vb"><div class="style_linkAndSub__7qTZ1"><a class="style_link__4XuJC" href="/news">News</a></div><div class="style_linkAndSub__7qTZ1"><a class="style_link__4XuJC" href="/guide">Guide</a><div class="style_sub__vF1DF"><div class="style_linkAndSub__7qTZ1"><a class="style_link__4XuJC" href="/guide/getting-started">Getting Started</a></div><div class="style_linkAndSub__7qTZ1"><a class="style_link__4XuJC" href="/guide/units">Units</a></div><div class="style_linkAndSub__7qTZ1"><a class="style_link__4XuJC" href="/guide/developer">Developer</a></div></div></div><a class="style_download__caECe" href="/download">Download</a></div></div></div><div class="style_mobile__mRKt2"><div class="style_main__JqgJs style_main__Q562K"><div class="style_logo___Nv4Y"><a class="style_logoLink__8L3yx" href="/"><img src="/icon.png" class="style_logoImage__PktfC"/></a></div><div><img class="style_menuButtonImage__jSbvp" src="/burger-menu.svg"/></div></div></div><main><div class="style_main__c51pI"><div class="style_main__F_177"><a class="style_link__eozNW" aria-disabled="false" href="/">home</a><p class="style_divider__YWHjs">/</p><a class="style_link__eozNW" aria-disabled="false" href="/guide">guide</a><p class="style_divider__YWHjs">/</p><a class="style_link__eozNW" aria-disabled="false" href="/guide/developer">developer</a><p class="style_divider__YWHjs">/</p><a class="style_link__eozNW" aria-disabled="false" href="/guide/developer/tutorials">tutorials</a><p class="style_divider__YWHjs">/</p><a class="style_link__eozNW" aria-disabled="true" tabindex="-1" href="/guide/developer/tutorials/article/multi-channel-distortion">Multi Channel Distortion</a></div><div class="style_content__rQ3D1"><h1 class="style_title__QJpJn">Multi Channel Distortion</h1><h2 class="style_subTitle___R0E7">A example of working with the Audio engine</h2><img src="/four_colour_stripes_banner.png" class="style_headerImage__jM6kU"/><div class="style_childrenWrapper__Nt54u"><h2>Introduction</h2><p>In this tutorial we will be building a unit which uses the audio engine. Its going to be a three-band distortion filter. The idea being that we want to be able to apply distortion to the High, Mid and Low frequency bands.</p><p>The audio circuit will look like this</p><img class="style_image80__ax_CV" src="/guide/developer/tutorials/multi-channel-distortion/flow.png"/><p>Each gain and WaveShaper will be controllable. We will hardcode the vales for the HighMidLowFilters.</p><div class="style_main__L8yyS"><h3 class="style_title__oTWxy">Note</h3><div class="style_children__6YSiK">We will be using the Deno runtime to run a typescript program. You can learn about how to set this up in the <a href="/guide/developer/tutorials/article/how-to-make-a-unit/1">How To Make A Unit</a> tutorial</div></div><h2>The Group Description</h2><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">{</pre><pre class="style_line__dmLdn">	&quot;printName&quot;: &quot;Custom Audio&quot;,</pre><pre class="style_line__dmLdn">	&quot;inDevelopment&quot;: true,</pre><pre class="style_line__dmLdn">	&quot;subListWidth&quot;: 160.0</pre><pre class="style_line__dmLdn">}</pre></div></div></div><p>Pretty straightforward, though we set the &quot;inDevelopment&quot; entry to true while we&#x27;re still developing the unit. We also set the &quot;subListWidth&quot; value to 160, in order to accommodate the title of the unit.</p><h2>The Unit Description</h2><p>Next lets move onto the unit description itself. I first designed the layout of this unit in my head, then began creating the file, recreating the unit and iterating the design as I went along before arriving at what you see below. This is a rather slow process involving many restarts of Alchemy. Alchemy&#x27;s roadmap includes a better way to design units, but for now we&#x27;re stuck with this process.</p><p>I recommend first designing your unit in a vector-based design program, then copying the element details over. Though for this unit I&#x27;ve done all the work for you.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre><pre class="style_line__dmLdn">20</pre><pre class="style_line__dmLdn">21</pre><pre class="style_line__dmLdn">22</pre><pre class="style_line__dmLdn">23</pre><pre class="style_line__dmLdn">24</pre><pre class="style_line__dmLdn">25</pre><pre class="style_line__dmLdn">26</pre><pre class="style_line__dmLdn">27</pre><pre class="style_line__dmLdn">28</pre><pre class="style_line__dmLdn">29</pre><pre class="style_line__dmLdn">30</pre><pre class="style_line__dmLdn">31</pre><pre class="style_line__dmLdn">32</pre><pre class="style_line__dmLdn">33</pre><pre class="style_line__dmLdn">34</pre><pre class="style_line__dmLdn">35</pre><pre class="style_line__dmLdn">36</pre><pre class="style_line__dmLdn">37</pre><pre class="style_line__dmLdn">38</pre><pre class="style_line__dmLdn">39</pre><pre class="style_line__dmLdn">40</pre><pre class="style_line__dmLdn">41</pre><pre class="style_line__dmLdn">42</pre><pre class="style_line__dmLdn">43</pre><pre class="style_line__dmLdn">44</pre><pre class="style_line__dmLdn">45</pre><pre class="style_line__dmLdn">46</pre><pre class="style_line__dmLdn">47</pre><pre class="style_line__dmLdn">48</pre><pre class="style_line__dmLdn">49</pre><pre class="style_line__dmLdn">50</pre><pre class="style_line__dmLdn">51</pre><pre class="style_line__dmLdn">52</pre><pre class="style_line__dmLdn">53</pre><pre class="style_line__dmLdn">54</pre><pre class="style_line__dmLdn">55</pre><pre class="style_line__dmLdn">56</pre><pre class="style_line__dmLdn">57</pre><pre class="style_line__dmLdn">58</pre><pre class="style_line__dmLdn">59</pre><pre class="style_line__dmLdn">60</pre><pre class="style_line__dmLdn">61</pre><pre class="style_line__dmLdn">62</pre><pre class="style_line__dmLdn">63</pre><pre class="style_line__dmLdn">64</pre><pre class="style_line__dmLdn">65</pre><pre class="style_line__dmLdn">66</pre><pre class="style_line__dmLdn">67</pre><pre class="style_line__dmLdn">68</pre><pre class="style_line__dmLdn">69</pre><pre class="style_line__dmLdn">70</pre><pre class="style_line__dmLdn">71</pre><pre class="style_line__dmLdn">72</pre><pre class="style_line__dmLdn">73</pre><pre class="style_line__dmLdn">74</pre><pre class="style_line__dmLdn">75</pre><pre class="style_line__dmLdn">76</pre><pre class="style_line__dmLdn">77</pre><pre class="style_line__dmLdn">78</pre><pre class="style_line__dmLdn">79</pre><pre class="style_line__dmLdn">80</pre><pre class="style_line__dmLdn">81</pre><pre class="style_line__dmLdn">82</pre><pre class="style_line__dmLdn">83</pre><pre class="style_line__dmLdn">84</pre><pre class="style_line__dmLdn">85</pre><pre class="style_line__dmLdn">86</pre><pre class="style_line__dmLdn">87</pre><pre class="style_line__dmLdn">88</pre><pre class="style_line__dmLdn">89</pre><pre class="style_line__dmLdn">90</pre><pre class="style_line__dmLdn">91</pre><pre class="style_line__dmLdn">92</pre><pre class="style_line__dmLdn">93</pre><pre class="style_line__dmLdn">94</pre><pre class="style_line__dmLdn">95</pre><pre class="style_line__dmLdn">96</pre><pre class="style_line__dmLdn">97</pre><pre class="style_line__dmLdn">98</pre><pre class="style_line__dmLdn">99</pre><pre class="style_line__dmLdn">100</pre><pre class="style_line__dmLdn">101</pre><pre class="style_line__dmLdn">102</pre><pre class="style_line__dmLdn">103</pre><pre class="style_line__dmLdn">104</pre><pre class="style_line__dmLdn">105</pre><pre class="style_line__dmLdn">106</pre><pre class="style_line__dmLdn">107</pre><pre class="style_line__dmLdn">108</pre><pre class="style_line__dmLdn">109</pre><pre class="style_line__dmLdn">110</pre><pre class="style_line__dmLdn">111</pre><pre class="style_line__dmLdn">112</pre><pre class="style_line__dmLdn">113</pre><pre class="style_line__dmLdn">114</pre><pre class="style_line__dmLdn">115</pre><pre class="style_line__dmLdn">116</pre><pre class="style_line__dmLdn">117</pre><pre class="style_line__dmLdn">118</pre><pre class="style_line__dmLdn">119</pre><pre class="style_line__dmLdn">120</pre><pre class="style_line__dmLdn">121</pre><pre class="style_line__dmLdn">122</pre><pre class="style_line__dmLdn">123</pre><pre class="style_line__dmLdn">124</pre><pre class="style_line__dmLdn">125</pre><pre class="style_line__dmLdn">126</pre><pre class="style_line__dmLdn">127</pre><pre class="style_line__dmLdn">128</pre><pre class="style_line__dmLdn">129</pre><pre class="style_line__dmLdn">130</pre><pre class="style_line__dmLdn">131</pre><pre class="style_line__dmLdn">132</pre><pre class="style_line__dmLdn">133</pre><pre class="style_line__dmLdn">134</pre><pre class="style_line__dmLdn">135</pre><pre class="style_line__dmLdn">136</pre><pre class="style_line__dmLdn">137</pre><pre class="style_line__dmLdn">138</pre><pre class="style_line__dmLdn">139</pre><pre class="style_line__dmLdn">140</pre><pre class="style_line__dmLdn">141</pre><pre class="style_line__dmLdn">142</pre><pre class="style_line__dmLdn">143</pre><pre class="style_line__dmLdn">144</pre><pre class="style_line__dmLdn">145</pre><pre class="style_line__dmLdn">146</pre><pre class="style_line__dmLdn">147</pre><pre class="style_line__dmLdn">148</pre><pre class="style_line__dmLdn">149</pre><pre class="style_line__dmLdn">150</pre><pre class="style_line__dmLdn">151</pre><pre class="style_line__dmLdn">152</pre><pre class="style_line__dmLdn">153</pre><pre class="style_line__dmLdn">154</pre><pre class="style_line__dmLdn">155</pre><pre class="style_line__dmLdn">156</pre><pre class="style_line__dmLdn">157</pre><pre class="style_line__dmLdn">158</pre><pre class="style_line__dmLdn">159</pre><pre class="style_line__dmLdn">160</pre><pre class="style_line__dmLdn">161</pre><pre class="style_line__dmLdn">162</pre><pre class="style_line__dmLdn">163</pre><pre class="style_line__dmLdn">164</pre><pre class="style_line__dmLdn">165</pre><pre class="style_line__dmLdn">166</pre><pre class="style_line__dmLdn">167</pre><pre class="style_line__dmLdn">168</pre><pre class="style_line__dmLdn">169</pre><pre class="style_line__dmLdn">170</pre><pre class="style_line__dmLdn">171</pre><pre class="style_line__dmLdn">172</pre><pre class="style_line__dmLdn">173</pre><pre class="style_line__dmLdn">174</pre><pre class="style_line__dmLdn">175</pre><pre class="style_line__dmLdn">176</pre><pre class="style_line__dmLdn">177</pre><pre class="style_line__dmLdn">178</pre><pre class="style_line__dmLdn">179</pre><pre class="style_line__dmLdn">180</pre><pre class="style_line__dmLdn">181</pre><pre class="style_line__dmLdn">182</pre><pre class="style_line__dmLdn">183</pre><pre class="style_line__dmLdn">184</pre><pre class="style_line__dmLdn">185</pre><pre class="style_line__dmLdn">186</pre><pre class="style_line__dmLdn">187</pre><pre class="style_line__dmLdn">188</pre><pre class="style_line__dmLdn">189</pre><pre class="style_line__dmLdn">190</pre><pre class="style_line__dmLdn">191</pre><pre class="style_line__dmLdn">192</pre><pre class="style_line__dmLdn">193</pre><pre class="style_line__dmLdn">194</pre><pre class="style_line__dmLdn">195</pre><pre class="style_line__dmLdn">196</pre><pre class="style_line__dmLdn">197</pre><pre class="style_line__dmLdn">198</pre><pre class="style_line__dmLdn">199</pre><pre class="style_line__dmLdn">200</pre><pre class="style_line__dmLdn">201</pre><pre class="style_line__dmLdn">202</pre><pre class="style_line__dmLdn">203</pre><pre class="style_line__dmLdn">204</pre><pre class="style_line__dmLdn">205</pre><pre class="style_line__dmLdn">206</pre><pre class="style_line__dmLdn">207</pre><pre class="style_line__dmLdn">208</pre><pre class="style_line__dmLdn">209</pre><pre class="style_line__dmLdn">210</pre><pre class="style_line__dmLdn">211</pre><pre class="style_line__dmLdn">212</pre><pre class="style_line__dmLdn">213</pre><pre class="style_line__dmLdn">214</pre><pre class="style_line__dmLdn">215</pre><pre class="style_line__dmLdn">216</pre><pre class="style_line__dmLdn">217</pre><pre class="style_line__dmLdn">218</pre><pre class="style_line__dmLdn">219</pre><pre class="style_line__dmLdn">220</pre><pre class="style_line__dmLdn">221</pre><pre class="style_line__dmLdn">222</pre><pre class="style_line__dmLdn">223</pre><pre class="style_line__dmLdn">224</pre><pre class="style_line__dmLdn">225</pre><pre class="style_line__dmLdn">226</pre><pre class="style_line__dmLdn">227</pre><pre class="style_line__dmLdn">228</pre><pre class="style_line__dmLdn">229</pre><pre class="style_line__dmLdn">230</pre><pre class="style_line__dmLdn">231</pre><pre class="style_line__dmLdn">232</pre><pre class="style_line__dmLdn">233</pre><pre class="style_line__dmLdn">234</pre><pre class="style_line__dmLdn">235</pre><pre class="style_line__dmLdn">236</pre><pre class="style_line__dmLdn">237</pre><pre class="style_line__dmLdn">238</pre><pre class="style_line__dmLdn">239</pre><pre class="style_line__dmLdn">240</pre><pre class="style_line__dmLdn">241</pre><pre class="style_line__dmLdn">242</pre><pre class="style_line__dmLdn">243</pre><pre class="style_line__dmLdn">244</pre><pre class="style_line__dmLdn">245</pre><pre class="style_line__dmLdn">246</pre><pre class="style_line__dmLdn">247</pre><pre class="style_line__dmLdn">248</pre><pre class="style_line__dmLdn">249</pre><pre class="style_line__dmLdn">250</pre><pre class="style_line__dmLdn">251</pre><pre class="style_line__dmLdn">252</pre><pre class="style_line__dmLdn">253</pre><pre class="style_line__dmLdn">254</pre><pre class="style_line__dmLdn">255</pre><pre class="style_line__dmLdn">256</pre><pre class="style_line__dmLdn">257</pre><pre class="style_line__dmLdn">258</pre><pre class="style_line__dmLdn">259</pre><pre class="style_line__dmLdn">260</pre><pre class="style_line__dmLdn">261</pre><pre class="style_line__dmLdn">262</pre><pre class="style_line__dmLdn">263</pre><pre class="style_line__dmLdn">264</pre><pre class="style_line__dmLdn">265</pre><pre class="style_line__dmLdn">266</pre><pre class="style_line__dmLdn">267</pre><pre class="style_line__dmLdn">268</pre><pre class="style_line__dmLdn">269</pre><pre class="style_line__dmLdn">270</pre><pre class="style_line__dmLdn">271</pre><pre class="style_line__dmLdn">272</pre><pre class="style_line__dmLdn">273</pre><pre class="style_line__dmLdn">274</pre><pre class="style_line__dmLdn">275</pre><pre class="style_line__dmLdn">276</pre><pre class="style_line__dmLdn">277</pre><pre class="style_line__dmLdn">278</pre><pre class="style_line__dmLdn">279</pre><pre class="style_line__dmLdn">280</pre><pre class="style_line__dmLdn">281</pre><pre class="style_line__dmLdn">282</pre><pre class="style_line__dmLdn">283</pre><pre class="style_line__dmLdn">284</pre><pre class="style_line__dmLdn">285</pre><pre class="style_line__dmLdn">286</pre><pre class="style_line__dmLdn">287</pre><pre class="style_line__dmLdn">288</pre><pre class="style_line__dmLdn">289</pre><pre class="style_line__dmLdn">290</pre><pre class="style_line__dmLdn">291</pre><pre class="style_line__dmLdn">292</pre><pre class="style_line__dmLdn">293</pre><pre class="style_line__dmLdn">294</pre><pre class="style_line__dmLdn">295</pre><pre class="style_line__dmLdn">296</pre><pre class="style_line__dmLdn">297</pre><pre class="style_line__dmLdn">298</pre><pre class="style_line__dmLdn">299</pre><pre class="style_line__dmLdn">300</pre><pre class="style_line__dmLdn">301</pre><pre class="style_line__dmLdn">302</pre><pre class="style_line__dmLdn">303</pre><pre class="style_line__dmLdn">304</pre><pre class="style_line__dmLdn">305</pre><pre class="style_line__dmLdn">306</pre><pre class="style_line__dmLdn">307</pre><pre class="style_line__dmLdn">308</pre><pre class="style_line__dmLdn">309</pre><pre class="style_line__dmLdn">310</pre><pre class="style_line__dmLdn">311</pre><pre class="style_line__dmLdn">312</pre><pre class="style_line__dmLdn">313</pre><pre class="style_line__dmLdn">314</pre><pre class="style_line__dmLdn">315</pre><pre class="style_line__dmLdn">316</pre><pre class="style_line__dmLdn">317</pre><pre class="style_line__dmLdn">318</pre><pre class="style_line__dmLdn">319</pre><pre class="style_line__dmLdn">320</pre><pre class="style_line__dmLdn">321</pre><pre class="style_line__dmLdn">322</pre><pre class="style_line__dmLdn">323</pre><pre class="style_line__dmLdn">324</pre><pre class="style_line__dmLdn">325</pre><pre class="style_line__dmLdn">326</pre><pre class="style_line__dmLdn">327</pre><pre class="style_line__dmLdn">328</pre><pre class="style_line__dmLdn">329</pre><pre class="style_line__dmLdn">330</pre><pre class="style_line__dmLdn">331</pre><pre class="style_line__dmLdn">332</pre><pre class="style_line__dmLdn">333</pre><pre class="style_line__dmLdn">334</pre><pre class="style_line__dmLdn">335</pre><pre class="style_line__dmLdn">336</pre><pre class="style_line__dmLdn">337</pre><pre class="style_line__dmLdn">338</pre><pre class="style_line__dmLdn">339</pre><pre class="style_line__dmLdn">340</pre><pre class="style_line__dmLdn">341</pre><pre class="style_line__dmLdn">342</pre><pre class="style_line__dmLdn">343</pre><pre class="style_line__dmLdn">344</pre><pre class="style_line__dmLdn">345</pre><pre class="style_line__dmLdn">346</pre><pre class="style_line__dmLdn">347</pre><pre class="style_line__dmLdn">348</pre><pre class="style_line__dmLdn">349</pre><pre class="style_line__dmLdn">350</pre><pre class="style_line__dmLdn">351</pre><pre class="style_line__dmLdn">352</pre><pre class="style_line__dmLdn">353</pre><pre class="style_line__dmLdn">354</pre><pre class="style_line__dmLdn">355</pre><pre class="style_line__dmLdn">356</pre><pre class="style_line__dmLdn">357</pre><pre class="style_line__dmLdn">358</pre><pre class="style_line__dmLdn">359</pre><pre class="style_line__dmLdn">360</pre><pre class="style_line__dmLdn">361</pre><pre class="style_line__dmLdn">362</pre><pre class="style_line__dmLdn">363</pre><pre class="style_line__dmLdn">364</pre><pre class="style_line__dmLdn">365</pre><pre class="style_line__dmLdn">366</pre><pre class="style_line__dmLdn">367</pre><pre class="style_line__dmLdn">368</pre><pre class="style_line__dmLdn">369</pre><pre class="style_line__dmLdn">370</pre><pre class="style_line__dmLdn">371</pre><pre class="style_line__dmLdn">372</pre><pre class="style_line__dmLdn">373</pre><pre class="style_line__dmLdn">374</pre><pre class="style_line__dmLdn">375</pre><pre class="style_line__dmLdn">376</pre><pre class="style_line__dmLdn">377</pre><pre class="style_line__dmLdn">378</pre><pre class="style_line__dmLdn">379</pre><pre class="style_line__dmLdn">380</pre><pre class="style_line__dmLdn">381</pre><pre class="style_line__dmLdn">382</pre><pre class="style_line__dmLdn">383</pre><pre class="style_line__dmLdn">384</pre><pre class="style_line__dmLdn">385</pre><pre class="style_line__dmLdn">386</pre><pre class="style_line__dmLdn">387</pre><pre class="style_line__dmLdn">388</pre><pre class="style_line__dmLdn">389</pre><pre class="style_line__dmLdn">390</pre><pre class="style_line__dmLdn">391</pre><pre class="style_line__dmLdn">392</pre><pre class="style_line__dmLdn">393</pre><pre class="style_line__dmLdn">394</pre><pre class="style_line__dmLdn">395</pre><pre class="style_line__dmLdn">396</pre><pre class="style_line__dmLdn">397</pre><pre class="style_line__dmLdn">398</pre><pre class="style_line__dmLdn">399</pre><pre class="style_line__dmLdn">400</pre><pre class="style_line__dmLdn">401</pre><pre class="style_line__dmLdn">402</pre><pre class="style_line__dmLdn">403</pre><pre class="style_line__dmLdn">404</pre><pre class="style_line__dmLdn">405</pre><pre class="style_line__dmLdn">406</pre><pre class="style_line__dmLdn">407</pre><pre class="style_line__dmLdn">408</pre><pre class="style_line__dmLdn">409</pre><pre class="style_line__dmLdn">410</pre><pre class="style_line__dmLdn">411</pre><pre class="style_line__dmLdn">412</pre><pre class="style_line__dmLdn">413</pre><pre class="style_line__dmLdn">414</pre><pre class="style_line__dmLdn">415</pre><pre class="style_line__dmLdn">416</pre><pre class="style_line__dmLdn">417</pre><pre class="style_line__dmLdn">418</pre><pre class="style_line__dmLdn">419</pre><pre class="style_line__dmLdn">420</pre><pre class="style_line__dmLdn">421</pre><pre class="style_line__dmLdn">422</pre><pre class="style_line__dmLdn">423</pre><pre class="style_line__dmLdn">424</pre><pre class="style_line__dmLdn">425</pre><pre class="style_line__dmLdn">426</pre><pre class="style_line__dmLdn">427</pre><pre class="style_line__dmLdn">428</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">{</pre><pre class="style_line__dmLdn">	&quot;inDevelopment&quot;: true,</pre><pre class="style_line__dmLdn">	&quot;modelName&quot;: &quot;multi_channel_distortion&quot;,</pre><pre class="style_line__dmLdn">	&quot;printName&quot;: &quot;Multi Channel Distortion&quot;,</pre><pre class="style_line__dmLdn">	&quot;space&quot;: [</pre><pre class="style_line__dmLdn">		{&quot;x&quot;: 0.0, &quot;y&quot;: 0.0},</pre><pre class="style_line__dmLdn">		{&quot;x&quot;: 0.0, &quot;y&quot;: 150.0},</pre><pre class="style_line__dmLdn">		{&quot;x&quot;: 155.0, &quot;y&quot;: 150.0},</pre><pre class="style_line__dmLdn">		{&quot;x&quot;: 155.0, &quot;y&quot;: 0.0}</pre><pre class="style_line__dmLdn">	],</pre><pre class="style_line__dmLdn">	&quot;collisionActive&quot;: true,</pre><pre class="style_line__dmLdn">	&quot;executable&quot;: {</pre><pre class="style_line__dmLdn">		&quot;mac&quot;: &quot;../deno&quot;,</pre><pre class="style_line__dmLdn">		&quot;win&quot;: &quot;../deno.exe&quot;,</pre><pre class="style_line__dmLdn">		&quot;args&quot;: [&quot;run&quot;, &quot;--allow-read&quot;, &quot;main.ts&quot;]</pre><pre class="style_line__dmLdn">	},</pre><pre class="style_line__dmLdn">	&quot;base&quot;: [</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;backing&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;rectangle&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;width&quot;: 155.0,</pre><pre class="style_line__dmLdn">					&quot;height&quot;: 150.0,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;frame&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;rectangle&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 5.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 5.0,</pre><pre class="style_line__dmLdn">					&quot;width&quot;: 145.0,</pre><pre class="style_line__dmLdn">					&quot;height&quot;: 125.0,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0.35, &quot;g&quot;: 0.35, &quot;b&quot;: 0.35}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;join_in&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;path&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 10.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 25.0,</pre><pre class="style_line__dmLdn">					&quot;points&quot;: [{&quot;x&quot;:0.0, &quot;y&quot;:0.0}, {&quot;x&quot;:0.0, &quot;y&quot;:70.0}],</pre><pre class="style_line__dmLdn">					&quot;thickness&quot;: 2.5,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0.45, &quot;g&quot;: 0.45, &quot;b&quot;: 0.45}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;join_out&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;path&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 145.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 25.0,</pre><pre class="style_line__dmLdn">					&quot;points&quot;: [{&quot;x&quot;:0.0, &quot;y&quot;:0.0}, {&quot;x&quot;:0.0, &quot;y&quot;:70.0}],</pre><pre class="style_line__dmLdn">					&quot;thickness&quot;: 2.5,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0.45, &quot;g&quot;: 0.45, &quot;b&quot;: 0.45}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;channel_1&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;path&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 10.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 25.0,</pre><pre class="style_line__dmLdn">					&quot;points&quot;: [{&quot;x&quot;:0.0, &quot;y&quot;:0.0}, {&quot;x&quot;:135.0, &quot;y&quot;:0.0}],</pre><pre class="style_line__dmLdn">					&quot;thickness&quot;: 2.5,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0.45, &quot;g&quot;: 0.45, &quot;b&quot;: 0.45}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;channel_2&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;path&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 0.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 60.0,</pre><pre class="style_line__dmLdn">					&quot;points&quot;: [{&quot;x&quot;:0.0, &quot;y&quot;:0.0}, {&quot;x&quot;:155.0, &quot;y&quot;:0.0}],</pre><pre class="style_line__dmLdn">					&quot;thickness&quot;: 2.5,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0.45, &quot;g&quot;: 0.45, &quot;b&quot;: 0.45}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;channel_3&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;path&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 10.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 95.0,</pre><pre class="style_line__dmLdn">					&quot;points&quot;: [{&quot;x&quot;:0.0, &quot;y&quot;:0.0}, {&quot;x&quot;:135.0, &quot;y&quot;:0.0}],</pre><pre class="style_line__dmLdn">					&quot;thickness&quot;: 2.5,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0.45, &quot;g&quot;: 0.45, &quot;b&quot;: 0.45}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;group&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;rectangle&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 40.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 7.5,</pre><pre class="style_line__dmLdn">					&quot;width&quot;: 75.0,</pre><pre class="style_line__dmLdn">					&quot;height&quot;: 120.0,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 1, &quot;g&quot;: 1, &quot;b&quot;: 1, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;logo&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;characterString&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 5.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 145.0,</pre><pre class="style_line__dmLdn">					&quot;scale&quot;: 0.6,</pre><pre class="style_line__dmLdn">					&quot;characterString&quot;: &quot;Custom Audio&quot;,</pre><pre class="style_line__dmLdn">					&quot;interCharacterSpacing&quot;: 1.0,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 1, &quot;g&quot;: 1, &quot;b&quot;: 1}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;model&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;characterString&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 150.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 145.0,</pre><pre class="style_line__dmLdn">					&quot;scale&quot;: 0.4,</pre><pre class="style_line__dmLdn">					&quot;characterString&quot;: &quot;Multi Channel Distortion&quot;,</pre><pre class="style_line__dmLdn">					&quot;interCharacterSpacing&quot;: 1.0,</pre><pre class="style_line__dmLdn">					&quot;printingModeHorizontal&quot;: &quot;right&quot;,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 1, &quot;g&quot;: 1, &quot;b&quot;: 1}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;out_gain_text&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;characterString&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 25.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 117.5,</pre><pre class="style_line__dmLdn">					&quot;scale&quot;: 0.4,</pre><pre class="style_line__dmLdn">					&quot;characterString&quot;: &quot;out gain&quot;,</pre><pre class="style_line__dmLdn">					&quot;printingModeHorizontal&quot;: &quot;middle&quot;,</pre><pre class="style_line__dmLdn">					&quot;printingModeVertical&quot;: &quot;calculatedTop&quot;,</pre><pre class="style_line__dmLdn">					&quot;interCharacterSpacing&quot;: 1.0,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0, &quot;g&quot;: 0, &quot;b&quot;: 0}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;distortion&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;characterString&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 60.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 117.5,</pre><pre class="style_line__dmLdn">					&quot;scale&quot;: 0.4,</pre><pre class="style_line__dmLdn">					&quot;characterString&quot;: &quot;distortion&quot;,</pre><pre class="style_line__dmLdn">					&quot;printingModeHorizontal&quot;: &quot;middle&quot;,</pre><pre class="style_line__dmLdn">					&quot;printingModeVertical&quot;: &quot;calculatedTop&quot;,</pre><pre class="style_line__dmLdn">					&quot;interCharacterSpacing&quot;: 1.0,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0, &quot;g&quot;: 0, &quot;b&quot;: 0}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;resolution&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;characterString&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 95.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 117.5,</pre><pre class="style_line__dmLdn">					&quot;scale&quot;: 0.4,</pre><pre class="style_line__dmLdn">					&quot;characterString&quot;: &quot;resolution&quot;,</pre><pre class="style_line__dmLdn">					&quot;printingModeHorizontal&quot;: &quot;middle&quot;,</pre><pre class="style_line__dmLdn">					&quot;printingModeVertical&quot;: &quot;calculatedTop&quot;,</pre><pre class="style_line__dmLdn">					&quot;interCharacterSpacing&quot;: 1.0,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0, &quot;g&quot;: 0, &quot;b&quot;: 0}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		},</pre><pre class="style_line__dmLdn">		{</pre><pre class="style_line__dmLdn">			&quot;name&quot;: &quot;in_gain_text&quot;,</pre><pre class="style_line__dmLdn">			&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">				&quot;type&quot;: &quot;characterString&quot;,</pre><pre class="style_line__dmLdn">				&quot;content&quot;: {</pre><pre class="style_line__dmLdn">					&quot;x&quot;: 130.0,</pre><pre class="style_line__dmLdn">					&quot;y&quot;: 117.5,</pre><pre class="style_line__dmLdn">					&quot;scale&quot;: 0.4,</pre><pre class="style_line__dmLdn">					&quot;characterString&quot;: &quot;in gain&quot;,</pre><pre class="style_line__dmLdn">					&quot;printingModeHorizontal&quot;: &quot;middle&quot;,</pre><pre class="style_line__dmLdn">					&quot;printingModeVertical&quot;: &quot;calculatedTop&quot;,</pre><pre class="style_line__dmLdn">					&quot;interCharacterSpacing&quot;: 1.0,</pre><pre class="style_line__dmLdn">					&quot;colour&quot;: {&quot;r&quot;: 0, &quot;g&quot;: 0, &quot;b&quot;: 0}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		}</pre><pre class="style_line__dmLdn">	],</pre><pre class="style_line__dmLdn">	&quot;parts&quot;: {</pre><pre class="style_line__dmLdn">		&quot;back&quot;: [</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;audio_in&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;audioPort&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 0.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 60.0,</pre><pre class="style_line__dmLdn">						&quot;height&quot;: 15.0,</pre><pre class="style_line__dmLdn">						&quot;width&quot;: 5.0,</pre><pre class="style_line__dmLdn">						&quot;angle&quot;: 3.1415927,</pre><pre class="style_line__dmLdn">						&quot;anchor&quot;: {&quot;x&quot;:0, &quot;y&quot;:0.5},</pre><pre class="style_line__dmLdn">						&quot;mode&quot;: &quot;producer&quot;</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;audio_out&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;audioPort&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 155.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 60.0,</pre><pre class="style_line__dmLdn">						&quot;height&quot;: 15.0,</pre><pre class="style_line__dmLdn">						&quot;width&quot;: 5.0,</pre><pre class="style_line__dmLdn">						&quot;anchor&quot;: {&quot;x&quot;:0, &quot;y&quot;:0.5},</pre><pre class="style_line__dmLdn">						&quot;mode&quot;: &quot;consumer&quot;</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		],</pre><pre class="style_line__dmLdn">		&quot;front&quot;: [</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;gain_out_1&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 25.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 25.0,</pre><pre class="style_line__dmLdn">						&quot;radius&quot;: 10.0,</pre><pre class="style_line__dmLdn">						&quot;resetValue&quot;: 0.5,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;gain_out_2&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 25.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 60.0,</pre><pre class="style_line__dmLdn">						&quot;radius&quot;: 10.0,</pre><pre class="style_line__dmLdn">						&quot;resetValue&quot;: 0.5,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;gain_out_3&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 25.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 95.0,</pre><pre class="style_line__dmLdn">						&quot;radius&quot;: 10.0,</pre><pre class="style_line__dmLdn">						&quot;resetValue&quot;: 0.5,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;distortion_1&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 60.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 25.0,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;distortion_2&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 60.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 60.0,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;distortion_3&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 60.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 95.0,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;resolution_1&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 95.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 25.0,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;resolution_2&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 95.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 60.0,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;resolution_3&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 95.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 95.0,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;gain_in_1&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 130.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 25.0,</pre><pre class="style_line__dmLdn">						&quot;radius&quot;: 10.0,</pre><pre class="style_line__dmLdn">						&quot;resetValue&quot;: 0.5,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;gain_in_2&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 130.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 60.0,</pre><pre class="style_line__dmLdn">						&quot;radius&quot;: 10.0,</pre><pre class="style_line__dmLdn">						&quot;resetValue&quot;: 0.5,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			},</pre><pre class="style_line__dmLdn">			{</pre><pre class="style_line__dmLdn">				&quot;name&quot;: &quot;gain_in_3&quot;,</pre><pre class="style_line__dmLdn">				&quot;attribute&quot;: {</pre><pre class="style_line__dmLdn">					&quot;type&quot;: &quot;dialContinuousDesign1&quot;,</pre><pre class="style_line__dmLdn">					&quot;content&quot;: {</pre><pre class="style_line__dmLdn">						&quot;x&quot;: 130.0,</pre><pre class="style_line__dmLdn">						&quot;y&quot;: 95.0,</pre><pre class="style_line__dmLdn">						&quot;radius&quot;: 10.0,</pre><pre class="style_line__dmLdn">						&quot;resetValue&quot;: 0.5,</pre><pre class="style_line__dmLdn">						&quot;styleSlot&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.02, &quot;b&quot;: 0.02},</pre><pre class="style_line__dmLdn">						&quot;styleHandle&quot;: {&quot;r&quot;: 0.65, &quot;g&quot;: 0.65, &quot;b&quot;: 0.65},</pre><pre class="style_line__dmLdn">						&quot;styleNeedle&quot;: {&quot;r&quot;: 0.95, &quot;g&quot;: 0.95, &quot;b&quot;: 0.95},</pre><pre class="style_line__dmLdn">						&quot;styleInteractionDisk&quot;: {&quot;r&quot;: 0.25, &quot;g&quot;: 0.25, &quot;b&quot;: 0.25, &quot;a&quot;: 0.25}</pre><pre class="style_line__dmLdn">					}</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		]</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn">}</pre></div></div><div class="style_showMore__8WfBB"><p>Show More</p></div></div><p>This description should produce a unit that looks like this</p><img class="style_image80__ax_CV" src="/guide/developer/tutorials/multi-channel-distortion/unit.png"/><p>There are no special requirements for enabling the audio engine. Audio ports are defined like any other port, except that they require a &quot;mode&quot; entry, set to either &quot;consumer&quot; or &quot;producer&quot;. As the names suggest, &quot;consumer&quot; ports received audio streams while &quot;producer&quot; ports send it.</p><p>We now should have a file structure that looks like this.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">custom_audio</pre><pre class="style_line__dmLdn">├─ deno</pre><pre class="style_line__dmLdn">├─ multi_channel_distortion</pre><pre class="style_line__dmLdn">│  └─ index.unit</pre><pre class="style_line__dmLdn">└─ typescript-deno-x.x.x-y.y.y</pre></div></div></div><h2>The Inner Workings</h2><p>Unlike the graphical design, audio nodes are created at run time using the API. One consequence of this is that we must send a request for an audio node to be created then await a response containing the nodeId of this newly created node. We then use this nodeId to set up connections between nodes, or to modify the settings of a particular node.</p><p>For the state, we will be storing the value of the dials instead of the values those dials represent. This will make reading and writing those values easier when they come from the import listener, or from the undo/redo listeners. We will then be setting up a series of conversion functions which will be used to convert dial values to the actual functioning values (eg. to distortion amount, to gain amount, etc.)</p><p>This is set to be a rather large Typescript program, so lets try to split a few things out to help. First, lets set up a map of part names to their index numbers. We&#x27;ll put this in a &quot;constants.ts&quot; file.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">export const part = {</pre><pre class="style_line__dmLdn">	gainOut1: 0,</pre><pre class="style_line__dmLdn">	gainOut2: 1,</pre><pre class="style_line__dmLdn">	gainOut3: 2,</pre><pre class="style_line__dmLdn">	distortion1: 3,</pre><pre class="style_line__dmLdn">	distortion2: 4,</pre><pre class="style_line__dmLdn">	distortion3: 5,</pre><pre class="style_line__dmLdn">	resolution1: 6,</pre><pre class="style_line__dmLdn">	resolution2: 7,</pre><pre class="style_line__dmLdn">	resolution3: 8,</pre><pre class="style_line__dmLdn">	gainIn1: 9,</pre><pre class="style_line__dmLdn">	gainIn2: 10,</pre><pre class="style_line__dmLdn">	gainIn3: 11</pre><pre class="style_line__dmLdn">};</pre></div></div></div><p>Next we&#x27;ll create a &quot;types.ts&quot; file to hold the interface definitions for the audio circuit nodes and the unit state itself. Note how the AudioCircuit&#x27;s values are all optional. These will be filled in at runtime when the nodeIds of the requested nodes come in.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre><pre class="style_line__dmLdn">20</pre><pre class="style_line__dmLdn">21</pre><pre class="style_line__dmLdn">22</pre><pre class="style_line__dmLdn">23</pre><pre class="style_line__dmLdn">24</pre><pre class="style_line__dmLdn">25</pre><pre class="style_line__dmLdn">26</pre><pre class="style_line__dmLdn">27</pre><pre class="style_line__dmLdn">28</pre><pre class="style_line__dmLdn">29</pre><pre class="style_line__dmLdn">30</pre><pre class="style_line__dmLdn">31</pre><pre class="style_line__dmLdn">32</pre><pre class="style_line__dmLdn">33</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">import type { NodeId } from &quot;../typescript-deno-0.3.3-0.1.0/types/platform/audio/alpa/library/id/nodeId/index.ts&quot;;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">export interface State {</pre><pre class="style_line__dmLdn">	gainIn1: number,</pre><pre class="style_line__dmLdn">	gainIn2: number,</pre><pre class="style_line__dmLdn">	gainIn3: number,</pre><pre class="style_line__dmLdn">	distortion1: number,</pre><pre class="style_line__dmLdn">	distortion2: number,</pre><pre class="style_line__dmLdn">	distortion3: number,</pre><pre class="style_line__dmLdn">	resolution1: number,</pre><pre class="style_line__dmLdn">	resolution2: number,</pre><pre class="style_line__dmLdn">	resolution3: number,</pre><pre class="style_line__dmLdn">	gainOut1: number,</pre><pre class="style_line__dmLdn">	gainOut2: number,</pre><pre class="style_line__dmLdn">	gainOut3: number</pre><pre class="style_line__dmLdn">}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">export interface AudioCircuit {</pre><pre class="style_line__dmLdn">	streamDuplicator1: NodeId | undefined,</pre><pre class="style_line__dmLdn">	streamDuplicator2: NodeId | undefined,</pre><pre class="style_line__dmLdn">	highMidLowFilter1: NodeId | undefined,</pre><pre class="style_line__dmLdn">	highMidLowFilter2: NodeId | undefined,</pre><pre class="style_line__dmLdn">	highMidLowFilter3: NodeId | undefined,</pre><pre class="style_line__dmLdn">	gainIn1: NodeId | undefined,</pre><pre class="style_line__dmLdn">	gainIn2: NodeId | undefined,</pre><pre class="style_line__dmLdn">	gainIn3: NodeId | undefined,</pre><pre class="style_line__dmLdn">	waveShaper1: NodeId | undefined,</pre><pre class="style_line__dmLdn">	waveShaper2: NodeId | undefined,</pre><pre class="style_line__dmLdn">	waveShaper3: NodeId | undefined,</pre><pre class="style_line__dmLdn">	gainOut1: NodeId | undefined,</pre><pre class="style_line__dmLdn">	gainOut2: NodeId | undefined,</pre><pre class="style_line__dmLdn">	gainOut3: NodeId | undefined,</pre><pre class="style_line__dmLdn">	streamAdder3: NodeId | undefined</pre><pre class="style_line__dmLdn">}</pre></div></div><div class="style_showMore__8WfBB"><p>Show More</p></div></div><p>Finally, lets round things out with a &quot;utils.ts&quot; file. This will export two thing; a function to update the Exportable Data store, and object of functions which will be used to convert dial values to the values they represent.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre><pre class="style_line__dmLdn">20</pre><pre class="style_line__dmLdn">21</pre><pre class="style_line__dmLdn">22</pre><pre class="style_line__dmLdn">23</pre><pre class="style_line__dmLdn">24</pre><pre class="style_line__dmLdn">25</pre><pre class="style_line__dmLdn">26</pre><pre class="style_line__dmLdn">27</pre><pre class="style_line__dmLdn">28</pre><pre class="style_line__dmLdn">29</pre><pre class="style_line__dmLdn">30</pre><pre class="style_line__dmLdn">31</pre><pre class="style_line__dmLdn">32</pre><pre class="style_line__dmLdn">33</pre><pre class="style_line__dmLdn">34</pre><pre class="style_line__dmLdn">35</pre><pre class="style_line__dmLdn">36</pre><pre class="style_line__dmLdn">37</pre><pre class="style_line__dmLdn">38</pre><pre class="style_line__dmLdn">39</pre><pre class="style_line__dmLdn">40</pre><pre class="style_line__dmLdn">41</pre><pre class="style_line__dmLdn">42</pre><pre class="style_line__dmLdn">43</pre><pre class="style_line__dmLdn">44</pre><pre class="style_line__dmLdn">45</pre><pre class="style_line__dmLdn">46</pre><pre class="style_line__dmLdn">47</pre><pre class="style_line__dmLdn">48</pre><pre class="style_line__dmLdn">49</pre><pre class="style_line__dmLdn">50</pre><pre class="style_line__dmLdn">51</pre><pre class="style_line__dmLdn">52</pre><pre class="style_line__dmLdn">53</pre><pre class="style_line__dmLdn">54</pre><pre class="style_line__dmLdn">55</pre><pre class="style_line__dmLdn">56</pre><pre class="style_line__dmLdn">57</pre><pre class="style_line__dmLdn">58</pre><pre class="style_line__dmLdn">59</pre><pre class="style_line__dmLdn">60</pre><pre class="style_line__dmLdn">61</pre><pre class="style_line__dmLdn">62</pre><pre class="style_line__dmLdn">63</pre><pre class="style_line__dmLdn">64</pre><pre class="style_line__dmLdn">65</pre><pre class="style_line__dmLdn">66</pre><pre class="style_line__dmLdn">67</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">import apiConsole from &quot;../typescript-deno-0.3.3-0.1.0/index.ts&quot;;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">import { State } from &#x27;./types.ts&#x27;;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">export function updateExportableData(state:State) {</pre><pre class="style_line__dmLdn">	apiConsole.unit.updateExportableData(</pre><pre class="style_line__dmLdn">		JSON.stringify(state)</pre><pre class="style_line__dmLdn">	);</pre><pre class="style_line__dmLdn">}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">function clamp(num:number, min:number, max:number): number {</pre><pre class="style_line__dmLdn">	return num &lt;= min ? min : num &gt;= max ? max : num;</pre><pre class="style_line__dmLdn">}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">function normalizeStretchArray(array:number[]): number[] {</pre><pre class="style_line__dmLdn">	//check for an empty array</pre><pre class="style_line__dmLdn">		if(array.length === 0) { return array; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	//discover the largest number</pre><pre class="style_line__dmLdn">		let biggestValue = Math.max(</pre><pre class="style_line__dmLdn">			...array.map((a) =&gt; Math.abs(a))</pre><pre class="style_line__dmLdn">		);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	//divide everything by this largest number, making everything a ratio of this value </pre><pre class="style_line__dmLdn">		const outputArray = array.map((a) =&gt; a / biggestValue);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	//stretch the other side of the array to meet 0 or 1</pre><pre class="style_line__dmLdn">		if(outputArray[0] === 0 &amp;&amp; array[array.length-1] === 1){ return outputArray; }</pre><pre class="style_line__dmLdn">		let pertinentValue = outputArray[0] !== 0 ? outputArray[0] : outputArray[array.length-1];</pre><pre class="style_line__dmLdn">		for(let a = 0; a &lt; outputArray.length; a++) {</pre><pre class="style_line__dmLdn">			outputArray[a] = (outputArray[a] - pertinentValue) / (1.0 - pertinentValue);</pre><pre class="style_line__dmLdn">		}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	return outputArray;</pre><pre class="style_line__dmLdn">}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">function sCurve(resolution:number, distortion:number): number[] {</pre><pre class="style_line__dmLdn">	resolution = Math.round(resolution);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	if(distortion === 0) {</pre><pre class="style_line__dmLdn">		return new Array(resolution).fill(0).map((_, index) =&gt; (index/resolution) * 2 - 1);</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	let curve = new Array(resolution)</pre><pre class="style_line__dmLdn">		.fill(0)</pre><pre class="style_line__dmLdn">		.map((_, index) =&gt; {</pre><pre class="style_line__dmLdn">			const step = index/resolution;</pre><pre class="style_line__dmLdn">			return 1/(</pre><pre class="style_line__dmLdn">				1 + Math.exp(-distortion*(step-0.5))</pre><pre class="style_line__dmLdn">			);</pre><pre class="style_line__dmLdn">		}</pre><pre class="style_line__dmLdn">	);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	curve = normalizeStretchArray(curve);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	for(let a = 0; a &lt; curve.length; a++) {</pre><pre class="style_line__dmLdn">		curve[a] = curve[a] * 2 - 1;</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	return curve;</pre><pre class="style_line__dmLdn">}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">export const interfaceTo = {</pre><pre class="style_line__dmLdn">	gain: (gainDial:number):number =&gt; gainDial * 2,</pre><pre class="style_line__dmLdn">	distortion: (distortionDial:number):number =&gt; distortionDial * 100.0,</pre><pre class="style_line__dmLdn">	resolution: (resolutionDial:number):number =&gt; clamp((resolutionDial * 1000.0), 2, 1000),</pre><pre class="style_line__dmLdn">	waveShaperCurve: (distortionDial:number, resolutionDial:number) =&gt; sCurve(interfaceTo.resolution(distortionDial), interfaceTo.distortion(resolutionDial)),</pre><pre class="style_line__dmLdn">};</pre></div></div><div class="style_showMore__8WfBB"><p>Show More</p></div></div><p>We now should have a file structure that looks like this.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">custom_audio</pre><pre class="style_line__dmLdn">├─ deno</pre><pre class="style_line__dmLdn">├─ multi_channel_distortion</pre><pre class="style_line__dmLdn">│  ├ constants.ts</pre><pre class="style_line__dmLdn">│  ├ index.unit</pre><pre class="style_line__dmLdn">│  ├ types.ts</pre><pre class="style_line__dmLdn">│  └ utils.ts</pre><pre class="style_line__dmLdn">└─ typescript-deno-x.x.x-y.y.y</pre></div></div></div><p>Now, on to the main program.</p><h2>The Main Program</h2><p>The main.ts file has 5 sections.</p><ol><li>Defining the state</li><li>Setup</li><li>Mouse event handlers</li><li>The import hander</li><li>Undo / Redo handlers</li></ol><p>Before all that though, lets import everything we need.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">import apiConsole from &quot;../typescript-deno-0.3.3-0.1.0/index.ts&quot;;</pre><pre class="style_line__dmLdn">import { PartEvent } from &#x27;../typescript-deno-0.3.3-0.1.0/types/platform/interface/part/event/partEvent.ts&#x27;;</pre><pre class="style_line__dmLdn">import { Modification } from &quot;../typescript-deno-0.3.3-0.1.0/types/platform/unit/unit/modification/index.ts&quot;;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">import { part } from &#x27;./constants.ts&#x27;;</pre><pre class="style_line__dmLdn">import { AudioCircuit, State } from &#x27;./types.ts&#x27;;</pre><pre class="style_line__dmLdn">import { interfaceTo, updateExportableData } from &#x27;./utils.ts&#x27;;</pre></div></div></div><div class="style_group__F7vT_"><h3>Defining the state</h3><p>This short section crates the &quot;audioCircuit&quot; and &quot;state&quot; variables using the types defined in the &quot;types.ts&quot; file. All the values of &quot;audioCircuit&quot; are set to undefined for now as we will populate them in the &#x27;Setup&#x27; section. The &quot;state&quot; is set to the initial &#x27;dial-values&#x27; of the design. Here that means that all the &#x27;gain&#x27; and &#x27;resolution&#x27; dials are set to 0.5</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre><pre class="style_line__dmLdn">20</pre><pre class="style_line__dmLdn">21</pre><pre class="style_line__dmLdn">22</pre><pre class="style_line__dmLdn">23</pre><pre class="style_line__dmLdn">24</pre><pre class="style_line__dmLdn">25</pre><pre class="style_line__dmLdn">26</pre><pre class="style_line__dmLdn">27</pre><pre class="style_line__dmLdn">28</pre><pre class="style_line__dmLdn">29</pre><pre class="style_line__dmLdn">30</pre><pre class="style_line__dmLdn">31</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">const audioCircuit:AudioCircuit = {</pre><pre class="style_line__dmLdn">	streamDuplicator1: undefined,</pre><pre class="style_line__dmLdn">	streamDuplicator2: undefined,</pre><pre class="style_line__dmLdn">	highMidLowFilter1: undefined,</pre><pre class="style_line__dmLdn">	highMidLowFilter2: undefined,</pre><pre class="style_line__dmLdn">	highMidLowFilter3: undefined,</pre><pre class="style_line__dmLdn">	gainIn1: undefined,</pre><pre class="style_line__dmLdn">	gainIn2: undefined,</pre><pre class="style_line__dmLdn">	gainIn3: undefined,</pre><pre class="style_line__dmLdn">	waveShaper1: undefined,</pre><pre class="style_line__dmLdn">	waveShaper2: undefined,</pre><pre class="style_line__dmLdn">	waveShaper3: undefined,</pre><pre class="style_line__dmLdn">	gainOut1: undefined,</pre><pre class="style_line__dmLdn">	gainOut2: undefined,</pre><pre class="style_line__dmLdn">	gainOut3: undefined,</pre><pre class="style_line__dmLdn">	streamAdder3: undefined</pre><pre class="style_line__dmLdn">}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">let state:State = {</pre><pre class="style_line__dmLdn">	gainIn1: 0.5,</pre><pre class="style_line__dmLdn">	gainIn2: 0.5,</pre><pre class="style_line__dmLdn">	gainIn3: 0.5,</pre><pre class="style_line__dmLdn">	distortion1: 0.0,</pre><pre class="style_line__dmLdn">	distortion2: 0.0,</pre><pre class="style_line__dmLdn">	distortion3: 0.0,</pre><pre class="style_line__dmLdn">	resolution1: 0.5,</pre><pre class="style_line__dmLdn">	resolution2: 0.5,</pre><pre class="style_line__dmLdn">	resolution3: 0.5,</pre><pre class="style_line__dmLdn">	gainOut1: 0.5,</pre><pre class="style_line__dmLdn">	gainOut2: 0.5,</pre><pre class="style_line__dmLdn">	gainOut3: 0.5</pre><pre class="style_line__dmLdn">};</pre></div></div><div class="style_showMore__8WfBB"><p>Show More</p></div></div><h3>Setup</h3><p>Here we create the audio nodes, connect them together, give them their initial settings and initialise the dials.</p><p>The ApiConsole&#x27;s &quot;alpa.createNode&quot; command comes with a callback function which will be run when the nodeId for the requested audio node is returned from Alchemy. So, we can use this to populate the appropriate entry in the &quot;audioCircuit&quot; constant. We also run a &quot;updateAudioConnections&quot; function. This function will only allow itself to be run when all the entries of the &quot;audioCircuit&quot; constant have been populated. The function will then set up all the audio routing and set the values of the audio nodes. You will notice in that second section where the values are applied, that we use the conversion functions defined in the &quot;utils.ts&quot; file.</p><p>Under the &quot;updateAudioConnections&quot; function, we can see all the dials being initialised with the values from the &quot;state&quot; variable. </p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre><pre class="style_line__dmLdn">20</pre><pre class="style_line__dmLdn">21</pre><pre class="style_line__dmLdn">22</pre><pre class="style_line__dmLdn">23</pre><pre class="style_line__dmLdn">24</pre><pre class="style_line__dmLdn">25</pre><pre class="style_line__dmLdn">26</pre><pre class="style_line__dmLdn">27</pre><pre class="style_line__dmLdn">28</pre><pre class="style_line__dmLdn">29</pre><pre class="style_line__dmLdn">30</pre><pre class="style_line__dmLdn">31</pre><pre class="style_line__dmLdn">32</pre><pre class="style_line__dmLdn">33</pre><pre class="style_line__dmLdn">34</pre><pre class="style_line__dmLdn">35</pre><pre class="style_line__dmLdn">36</pre><pre class="style_line__dmLdn">37</pre><pre class="style_line__dmLdn">38</pre><pre class="style_line__dmLdn">39</pre><pre class="style_line__dmLdn">40</pre><pre class="style_line__dmLdn">41</pre><pre class="style_line__dmLdn">42</pre><pre class="style_line__dmLdn">43</pre><pre class="style_line__dmLdn">44</pre><pre class="style_line__dmLdn">45</pre><pre class="style_line__dmLdn">46</pre><pre class="style_line__dmLdn">47</pre><pre class="style_line__dmLdn">48</pre><pre class="style_line__dmLdn">49</pre><pre class="style_line__dmLdn">50</pre><pre class="style_line__dmLdn">51</pre><pre class="style_line__dmLdn">52</pre><pre class="style_line__dmLdn">53</pre><pre class="style_line__dmLdn">54</pre><pre class="style_line__dmLdn">55</pre><pre class="style_line__dmLdn">56</pre><pre class="style_line__dmLdn">57</pre><pre class="style_line__dmLdn">58</pre><pre class="style_line__dmLdn">59</pre><pre class="style_line__dmLdn">60</pre><pre class="style_line__dmLdn">61</pre><pre class="style_line__dmLdn">62</pre><pre class="style_line__dmLdn">63</pre><pre class="style_line__dmLdn">64</pre><pre class="style_line__dmLdn">65</pre><pre class="style_line__dmLdn">66</pre><pre class="style_line__dmLdn">67</pre><pre class="style_line__dmLdn">68</pre><pre class="style_line__dmLdn">69</pre><pre class="style_line__dmLdn">70</pre><pre class="style_line__dmLdn">71</pre><pre class="style_line__dmLdn">72</pre><pre class="style_line__dmLdn">73</pre><pre class="style_line__dmLdn">74</pre><pre class="style_line__dmLdn">75</pre><pre class="style_line__dmLdn">76</pre><pre class="style_line__dmLdn">77</pre><pre class="style_line__dmLdn">78</pre><pre class="style_line__dmLdn">79</pre><pre class="style_line__dmLdn">80</pre><pre class="style_line__dmLdn">81</pre><pre class="style_line__dmLdn">82</pre><pre class="style_line__dmLdn">83</pre><pre class="style_line__dmLdn">84</pre><pre class="style_line__dmLdn">85</pre><pre class="style_line__dmLdn">86</pre><pre class="style_line__dmLdn">87</pre><pre class="style_line__dmLdn">88</pre><pre class="style_line__dmLdn">89</pre><pre class="style_line__dmLdn">90</pre><pre class="style_line__dmLdn">91</pre><pre class="style_line__dmLdn">92</pre><pre class="style_line__dmLdn">93</pre><pre class="style_line__dmLdn">94</pre><pre class="style_line__dmLdn">95</pre><pre class="style_line__dmLdn">96</pre><pre class="style_line__dmLdn">97</pre><pre class="style_line__dmLdn">98</pre><pre class="style_line__dmLdn">99</pre><pre class="style_line__dmLdn">100</pre><pre class="style_line__dmLdn">101</pre><pre class="style_line__dmLdn">102</pre><pre class="style_line__dmLdn">103</pre><pre class="style_line__dmLdn">104</pre><pre class="style_line__dmLdn">105</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">//audio circuit</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;StreamDuplicator&quot; }, (node_id) =&gt; {audioCircuit.streamDuplicator1 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;StreamDuplicator&quot; }, (node_id) =&gt; {audioCircuit.streamDuplicator2 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;HighMidLowFilter&quot; }, (node_id) =&gt; {audioCircuit.highMidLowFilter1 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;HighMidLowFilter&quot; }, (node_id) =&gt; {audioCircuit.highMidLowFilter2 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;HighMidLowFilter&quot; }, (node_id) =&gt; {audioCircuit.highMidLowFilter3 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainIn1 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainIn2 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainIn3 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;WaveShaper&quot; }, (node_id) =&gt; {audioCircuit.waveShaper1 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;WaveShaper&quot; }, (node_id) =&gt; {audioCircuit.waveShaper2 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;WaveShaper&quot; }, (node_id) =&gt; {audioCircuit.waveShaper3 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainOut1 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainOut2 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainOut3 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">	apiConsole.alpa.createNode({ &quot;type&quot;: &quot;StreamAdder3&quot; }, (node_id) =&gt; {audioCircuit.streamAdder3 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	function updateAudioConnections() {</pre><pre class="style_line__dmLdn">		if(</pre><pre class="style_line__dmLdn">			audioCircuit.streamDuplicator1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.streamDuplicator2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.streamAdder3 === undefined</pre><pre class="style_line__dmLdn">		) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		const audioPortNodeIDs = apiConsole.alpa.getAudioPortNodeIds();</pre><pre class="style_line__dmLdn">		if(audioPortNodeIDs === undefined) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		//routing</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioPortNodeIDs[0], 0, audioCircuit.streamDuplicator1, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator1, 1, audioCircuit.streamDuplicator2, 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator1, 0, audioCircuit.gainIn1, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator2, 0, audioCircuit.gainIn2, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator2, 1, audioCircuit.gainIn3, 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn1, 0, audioCircuit.waveShaper1, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn2, 0, audioCircuit.waveShaper2, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn3, 0, audioCircuit.waveShaper3, 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper1, 0, audioCircuit.highMidLowFilter1, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper2, 0, audioCircuit.highMidLowFilter2, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper3, 0, audioCircuit.highMidLowFilter3, 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter1, 0, audioCircuit.gainOut1, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter2, 0, audioCircuit.gainOut2, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter3, 0, audioCircuit.gainOut3, 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut1, 0, audioCircuit.streamAdder3, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut2, 0, audioCircuit.streamAdder3, 1, () =&gt; {});</pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut3, 0, audioCircuit.streamAdder3, 2, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.createRouteNodeToNode(audioCircuit.streamAdder3, 0, audioPortNodeIDs[1], 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		//set up</pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setHighBandQ(audioCircuit.highMidLowFilter1, 1);</pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setMidBandQ(audioCircuit.highMidLowFilter1, 1);</pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setLowBandQ(audioCircuit.highMidLowFilter1, 1);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter1, 0);</pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter1, -2.5);</pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter1, -10);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter2, -2.5);</pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter2, 0);</pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter2, -2.5);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter3, -10);</pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter3, -2.5);</pre><pre class="style_line__dmLdn">			apiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter3, 0);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">//dials</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.gainOut1, true, state.gainOut1);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.gainOut2, true, state.gainOut2);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.gainOut3, true, state.gainOut3);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.distortion1, true, state.distortion1);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.distortion2, true, state.distortion2);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.distortion3, true, state.distortion3);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.resolution1, true, state.resolution1);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.resolution2, true, state.resolution2);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.resolution3, true, state.resolution3);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.gainIn1, true, state.gainIn1);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.gainIn2, true, state.gainIn2);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part.gainIn3, true, state.gainIn3);</pre></div></div><div class="style_showMore__8WfBB"><p>Show More</p></div></div><h3>Mouse event handlers</h3><p>We need to handle both regular mouse events and mouse wheel events. Luckily these two have the same structure so we can write a single handler function and use it for both. After checking to see if the dial is on the front layer (which it should be, as there&#x27;s no dials on the back layer) and that all the audio nodes exist (a requirement of Typescript) we check to see if the event is from a &quot;continuous dial&quot; then move on to handle two of the event types; &quot;change&quot; and &quot;release&quot;.</p><p>&quot;Change&quot; events appear when the dial changes its value at all, thus you can expect a lot of these to appear for any adjustment of the dial. &quot;Release&quot; events only appear when the user releases the mouse. &quot;Release&quot; events also come with the value that the dial had before any change was made.</p><p>So, for &quot;change&quot; events we update the unit state and update the audio node. For &quot;release&quot; events we do the same, but also populate a &quot;modification&quot; value which is returned at the end of the function. Additionally at the end of the function we update the Exportable data state.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre><pre class="style_line__dmLdn">20</pre><pre class="style_line__dmLdn">21</pre><pre class="style_line__dmLdn">22</pre><pre class="style_line__dmLdn">23</pre><pre class="style_line__dmLdn">24</pre><pre class="style_line__dmLdn">25</pre><pre class="style_line__dmLdn">26</pre><pre class="style_line__dmLdn">27</pre><pre class="style_line__dmLdn">28</pre><pre class="style_line__dmLdn">29</pre><pre class="style_line__dmLdn">30</pre><pre class="style_line__dmLdn">31</pre><pre class="style_line__dmLdn">32</pre><pre class="style_line__dmLdn">33</pre><pre class="style_line__dmLdn">34</pre><pre class="style_line__dmLdn">35</pre><pre class="style_line__dmLdn">36</pre><pre class="style_line__dmLdn">37</pre><pre class="style_line__dmLdn">38</pre><pre class="style_line__dmLdn">39</pre><pre class="style_line__dmLdn">40</pre><pre class="style_line__dmLdn">41</pre><pre class="style_line__dmLdn">42</pre><pre class="style_line__dmLdn">43</pre><pre class="style_line__dmLdn">44</pre><pre class="style_line__dmLdn">45</pre><pre class="style_line__dmLdn">46</pre><pre class="style_line__dmLdn">47</pre><pre class="style_line__dmLdn">48</pre><pre class="style_line__dmLdn">49</pre><pre class="style_line__dmLdn">50</pre><pre class="style_line__dmLdn">51</pre><pre class="style_line__dmLdn">52</pre><pre class="style_line__dmLdn">53</pre><pre class="style_line__dmLdn">54</pre><pre class="style_line__dmLdn">55</pre><pre class="style_line__dmLdn">56</pre><pre class="style_line__dmLdn">57</pre><pre class="style_line__dmLdn">58</pre><pre class="style_line__dmLdn">59</pre><pre class="style_line__dmLdn">60</pre><pre class="style_line__dmLdn">61</pre><pre class="style_line__dmLdn">62</pre><pre class="style_line__dmLdn">63</pre><pre class="style_line__dmLdn">64</pre><pre class="style_line__dmLdn">65</pre><pre class="style_line__dmLdn">66</pre><pre class="style_line__dmLdn">67</pre><pre class="style_line__dmLdn">68</pre><pre class="style_line__dmLdn">69</pre><pre class="style_line__dmLdn">70</pre><pre class="style_line__dmLdn">71</pre><pre class="style_line__dmLdn">72</pre><pre class="style_line__dmLdn">73</pre><pre class="style_line__dmLdn">74</pre><pre class="style_line__dmLdn">75</pre><pre class="style_line__dmLdn">76</pre><pre class="style_line__dmLdn">77</pre><pre class="style_line__dmLdn">78</pre><pre class="style_line__dmLdn">79</pre><pre class="style_line__dmLdn">80</pre><pre class="style_line__dmLdn">81</pre><pre class="style_line__dmLdn">82</pre><pre class="style_line__dmLdn">83</pre><pre class="style_line__dmLdn">84</pre><pre class="style_line__dmLdn">85</pre><pre class="style_line__dmLdn">86</pre><pre class="style_line__dmLdn">87</pre><pre class="style_line__dmLdn">88</pre><pre class="style_line__dmLdn">89</pre><pre class="style_line__dmLdn">90</pre><pre class="style_line__dmLdn">91</pre><pre class="style_line__dmLdn">92</pre><pre class="style_line__dmLdn">93</pre><pre class="style_line__dmLdn">94</pre><pre class="style_line__dmLdn">95</pre><pre class="style_line__dmLdn">96</pre><pre class="style_line__dmLdn">97</pre><pre class="style_line__dmLdn">98</pre><pre class="style_line__dmLdn">99</pre><pre class="style_line__dmLdn">100</pre><pre class="style_line__dmLdn">101</pre><pre class="style_line__dmLdn">102</pre><pre class="style_line__dmLdn">103</pre><pre class="style_line__dmLdn">104</pre><pre class="style_line__dmLdn">105</pre><pre class="style_line__dmLdn">106</pre><pre class="style_line__dmLdn">107</pre><pre class="style_line__dmLdn">108</pre><pre class="style_line__dmLdn">109</pre><pre class="style_line__dmLdn">110</pre><pre class="style_line__dmLdn">111</pre><pre class="style_line__dmLdn">112</pre><pre class="style_line__dmLdn">113</pre><pre class="style_line__dmLdn">114</pre><pre class="style_line__dmLdn">115</pre><pre class="style_line__dmLdn">116</pre><pre class="style_line__dmLdn">117</pre><pre class="style_line__dmLdn">118</pre><pre class="style_line__dmLdn">119</pre><pre class="style_line__dmLdn">120</pre><pre class="style_line__dmLdn">121</pre><pre class="style_line__dmLdn">122</pre><pre class="style_line__dmLdn">123</pre><pre class="style_line__dmLdn">124</pre><pre class="style_line__dmLdn">125</pre><pre class="style_line__dmLdn">126</pre><pre class="style_line__dmLdn">127</pre><pre class="style_line__dmLdn">128</pre><pre class="style_line__dmLdn">129</pre><pre class="style_line__dmLdn">130</pre><pre class="style_line__dmLdn">131</pre><pre class="style_line__dmLdn">132</pre><pre class="style_line__dmLdn">133</pre><pre class="style_line__dmLdn">134</pre><pre class="style_line__dmLdn">135</pre><pre class="style_line__dmLdn">136</pre><pre class="style_line__dmLdn">137</pre><pre class="style_line__dmLdn">138</pre><pre class="style_line__dmLdn">139</pre><pre class="style_line__dmLdn">140</pre><pre class="style_line__dmLdn">141</pre><pre class="style_line__dmLdn">142</pre><pre class="style_line__dmLdn">143</pre><pre class="style_line__dmLdn">144</pre><pre class="style_line__dmLdn">145</pre><pre class="style_line__dmLdn">146</pre><pre class="style_line__dmLdn">147</pre><pre class="style_line__dmLdn">148</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">function handleMouseEvent(partIndex:number, isOnFrontLayer:boolean, event:PartEvent) {</pre><pre class="style_line__dmLdn">	if(!isOnFrontLayer) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	if(</pre><pre class="style_line__dmLdn">		audioCircuit.streamDuplicator1 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.streamDuplicator2 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.highMidLowFilter1 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.highMidLowFilter2 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.highMidLowFilter3 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainIn1 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainIn2 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainIn3 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.waveShaper1 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.waveShaper2 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.waveShaper3 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainOut1 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainOut2 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainOut3 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.streamAdder3 === undefined</pre><pre class="style_line__dmLdn">	) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	if(event.type === &quot;continuousDial&quot;) {</pre><pre class="style_line__dmLdn">		let modification:Modification | undefined;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		if(event.content.type === &quot;change&quot;) {</pre><pre class="style_line__dmLdn">			switch (partIndex) {</pre><pre class="style_line__dmLdn">				case part.gainOut1:</pre><pre class="style_line__dmLdn">					state.gainOut1 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.gainOut2:</pre><pre class="style_line__dmLdn">					state.gainOut2 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.gainOut3:</pre><pre class="style_line__dmLdn">					state.gainOut3 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.distortion1:</pre><pre class="style_line__dmLdn">					state.distortion1 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.distortion2:</pre><pre class="style_line__dmLdn">					state.distortion2 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.distortion3:</pre><pre class="style_line__dmLdn">					state.distortion3 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.resolution1:</pre><pre class="style_line__dmLdn">					state.resolution1 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.resolution2:</pre><pre class="style_line__dmLdn">					state.resolution2 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.resolution3:</pre><pre class="style_line__dmLdn">					state.resolution3 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.gainIn1:</pre><pre class="style_line__dmLdn">					state.gainIn1 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.gainIn2:</pre><pre class="style_line__dmLdn">					state.gainIn2 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.gainIn3:</pre><pre class="style_line__dmLdn">					state.gainIn3 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		} else if(event.content.type === &quot;release&quot;) {</pre><pre class="style_line__dmLdn">			switch (partIndex) {</pre><pre class="style_line__dmLdn">				case part.gainOut1:</pre><pre class="style_line__dmLdn">					state.gainOut1 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;gainOut1&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.gainOut2:</pre><pre class="style_line__dmLdn">					state.gainOut2 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;gainOut2&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.gainOut3:</pre><pre class="style_line__dmLdn">					state.gainOut3 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;gainOut3&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.distortion1:</pre><pre class="style_line__dmLdn">					state.distortion1 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;distortion1&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.distortion2:</pre><pre class="style_line__dmLdn">					state.distortion2 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;distortion2&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.distortion3:</pre><pre class="style_line__dmLdn">					state.distortion3 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;distortion3&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.resolution1: {</pre><pre class="style_line__dmLdn">					state.resolution1 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;resolution1&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				} break;</pre><pre class="style_line__dmLdn">				case part.resolution2: {</pre><pre class="style_line__dmLdn">					state.resolution2 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;resolution2&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				} break;</pre><pre class="style_line__dmLdn">				case part.resolution3: {</pre><pre class="style_line__dmLdn">					state.resolution3 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;resolution3&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				} break;</pre><pre class="style_line__dmLdn">				case part.gainIn1:</pre><pre class="style_line__dmLdn">					state.gainIn1 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;gainIn1&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.gainIn2:</pre><pre class="style_line__dmLdn">					state.gainIn2 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;gainIn2&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">				case part.gainIn3:</pre><pre class="style_line__dmLdn">					state.gainIn3 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">					apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));</pre><pre class="style_line__dmLdn">					modification = apiConsole.createModification(&quot;gainIn3&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">				break;</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn">		}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		updateExportableData(state);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		return modification;</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn">}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">apiConsole.unit.setMouseEventListener(({ partIndex, isOnFrontLayer, event }) =&gt; handleMouseEvent(partIndex, isOnFrontLayer, event));</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">apiConsole.unit.setMouseWheelEventListener(({ partIndex, isOnFrontLayer, event }) =&gt; handleMouseEvent(partIndex, isOnFrontLayer, event));</pre></div></div><div class="style_showMore__8WfBB"><p>Show More</p></div></div><h3>The import hander</h3><p>The import handler&#x27;s job is simple; update everything to suit whatever data is provided. This includes updating the state value, changing the dials to suit and setting the audio node settings. As with the mouse event handler, we must check that all the audio nodes exist. Luckily however, we don&#x27;t have to worry about update conflicts between the handler and the setup code above; if the audio nodes aren&#x27;t present we can assume that they&#x27;re being created, after which point the setup will use the state to populate their values. The very state that was updated in this function.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre><pre class="style_line__dmLdn">20</pre><pre class="style_line__dmLdn">21</pre><pre class="style_line__dmLdn">22</pre><pre class="style_line__dmLdn">23</pre><pre class="style_line__dmLdn">24</pre><pre class="style_line__dmLdn">25</pre><pre class="style_line__dmLdn">26</pre><pre class="style_line__dmLdn">27</pre><pre class="style_line__dmLdn">28</pre><pre class="style_line__dmLdn">29</pre><pre class="style_line__dmLdn">30</pre><pre class="style_line__dmLdn">31</pre><pre class="style_line__dmLdn">32</pre><pre class="style_line__dmLdn">33</pre><pre class="style_line__dmLdn">34</pre><pre class="style_line__dmLdn">35</pre><pre class="style_line__dmLdn">36</pre><pre class="style_line__dmLdn">37</pre><pre class="style_line__dmLdn">38</pre><pre class="style_line__dmLdn">39</pre><pre class="style_line__dmLdn">40</pre><pre class="style_line__dmLdn">41</pre><pre class="style_line__dmLdn">42</pre><pre class="style_line__dmLdn">43</pre><pre class="style_line__dmLdn">44</pre><pre class="style_line__dmLdn">45</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">apiConsole.unit.setImportListener(({dataString}) =&gt; {</pre><pre class="style_line__dmLdn">	state = JSON.parse(dataString) as State;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	//dials</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainOut1, true, state.gainOut1);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainOut2, true, state.gainOut2);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainOut3, true, state.gainOut3);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.distortion1, true, state.distortion1);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.distortion2, true, state.distortion2);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.distortion3, true, state.distortion3);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.resolution1, true, state.resolution1);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.resolution2, true, state.resolution2);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.resolution3, true, state.resolution3);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainIn1, true, state.gainIn1);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainIn2, true, state.gainIn2);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainIn3, true, state.gainIn3);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	//audio circuit</pre><pre class="style_line__dmLdn">		if(</pre><pre class="style_line__dmLdn">			audioCircuit.streamDuplicator1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.streamDuplicator2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.streamAdder3 === undefined</pre><pre class="style_line__dmLdn">		) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));</pre><pre class="style_line__dmLdn">		apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));</pre><pre class="style_line__dmLdn">		apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));</pre><pre class="style_line__dmLdn">		apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">		apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">		apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">		apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));</pre><pre class="style_line__dmLdn">		apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));</pre><pre class="style_line__dmLdn">		apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));</pre><pre class="style_line__dmLdn">});</pre></div></div><div class="style_showMore__8WfBB"><p>Show More</p></div></div><h3>Undo / Redo handlers</h3><p>For simpler units such as this one, undo/redo can often be combined as the only real difference between the two is whether to use the &quot;before&quot; or &quot;after&quot; values. Thus we can combine the handler into one function and have the specifics decided in the undo and redo listeners. The rest of the function should be pretty familiar as it follows what has been done in previous sections; check the audio nodes exist, update the state, update the dials and update the audio nodes.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre><pre class="style_line__dmLdn">20</pre><pre class="style_line__dmLdn">21</pre><pre class="style_line__dmLdn">22</pre><pre class="style_line__dmLdn">23</pre><pre class="style_line__dmLdn">24</pre><pre class="style_line__dmLdn">25</pre><pre class="style_line__dmLdn">26</pre><pre class="style_line__dmLdn">27</pre><pre class="style_line__dmLdn">28</pre><pre class="style_line__dmLdn">29</pre><pre class="style_line__dmLdn">30</pre><pre class="style_line__dmLdn">31</pre><pre class="style_line__dmLdn">32</pre><pre class="style_line__dmLdn">33</pre><pre class="style_line__dmLdn">34</pre><pre class="style_line__dmLdn">35</pre><pre class="style_line__dmLdn">36</pre><pre class="style_line__dmLdn">37</pre><pre class="style_line__dmLdn">38</pre><pre class="style_line__dmLdn">39</pre><pre class="style_line__dmLdn">40</pre><pre class="style_line__dmLdn">41</pre><pre class="style_line__dmLdn">42</pre><pre class="style_line__dmLdn">43</pre><pre class="style_line__dmLdn">44</pre><pre class="style_line__dmLdn">45</pre><pre class="style_line__dmLdn">46</pre><pre class="style_line__dmLdn">47</pre><pre class="style_line__dmLdn">48</pre><pre class="style_line__dmLdn">49</pre><pre class="style_line__dmLdn">50</pre><pre class="style_line__dmLdn">51</pre><pre class="style_line__dmLdn">52</pre><pre class="style_line__dmLdn">53</pre><pre class="style_line__dmLdn">54</pre><pre class="style_line__dmLdn">55</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">function handleUndoRedo(meta:string, modificationValue:string) {</pre><pre class="style_line__dmLdn">	if(</pre><pre class="style_line__dmLdn">		audioCircuit.streamDuplicator1 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.streamDuplicator2 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.highMidLowFilter1 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.highMidLowFilter2 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.highMidLowFilter3 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainIn1 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainIn2 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainIn3 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.waveShaper1 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.waveShaper2 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.waveShaper3 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainOut1 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainOut2 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.gainOut3 === undefined ||</pre><pre class="style_line__dmLdn">		audioCircuit.streamAdder3 === undefined</pre><pre class="style_line__dmLdn">	) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	state[meta] = JSON.parse(modificationValue);</pre><pre class="style_line__dmLdn">	apiConsole.interface.dialContinuous.setValue(part[meta], true, state[meta]);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	switch(meta) {</pre><pre class="style_line__dmLdn">		case &quot;gainOut1&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn">		case &quot;gainOut2&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn">		case &quot;gainOut3&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn">		case &quot;gainIn1&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn">		case &quot;gainIn2&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn">		case &quot;gainIn3&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		case &quot;distortion1&quot;:</pre><pre class="style_line__dmLdn">		case &quot;resolution1&quot;:</pre><pre class="style_line__dmLdn">			apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">		break;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		case &quot;distortion2&quot;:</pre><pre class="style_line__dmLdn">		case &quot;resolution2&quot;:</pre><pre class="style_line__dmLdn">			apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">		break;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		case &quot;distortion3&quot;:</pre><pre class="style_line__dmLdn">		case &quot;resolution3&quot;:</pre><pre class="style_line__dmLdn">			apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">		break;</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn">}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">apiConsole.unit.setUndoListener(({modification}) =&gt; {</pre><pre class="style_line__dmLdn">	handleUndoRedo(modification.meta, modification.before);</pre><pre class="style_line__dmLdn">	updateExportableData(state);</pre><pre class="style_line__dmLdn">});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">apiConsole.unit.setRedoListener(({modification}) =&gt; {</pre><pre class="style_line__dmLdn">	handleUndoRedo(modification.meta, modification.after);</pre><pre class="style_line__dmLdn">	updateExportableData(state);</pre><pre class="style_line__dmLdn">});</pre></div></div><div class="style_showMore__8WfBB"><p>Show More</p></div></div></div><p>In the end, we should have a file that looks like this.</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lineNumbers__S0NBN"><pre class="style_line__dmLdn">0</pre><pre class="style_line__dmLdn">1</pre><pre class="style_line__dmLdn">2</pre><pre class="style_line__dmLdn">3</pre><pre class="style_line__dmLdn">4</pre><pre class="style_line__dmLdn">5</pre><pre class="style_line__dmLdn">6</pre><pre class="style_line__dmLdn">7</pre><pre class="style_line__dmLdn">8</pre><pre class="style_line__dmLdn">9</pre><pre class="style_line__dmLdn">10</pre><pre class="style_line__dmLdn">11</pre><pre class="style_line__dmLdn">12</pre><pre class="style_line__dmLdn">13</pre><pre class="style_line__dmLdn">14</pre><pre class="style_line__dmLdn">15</pre><pre class="style_line__dmLdn">16</pre><pre class="style_line__dmLdn">17</pre><pre class="style_line__dmLdn">18</pre><pre class="style_line__dmLdn">19</pre><pre class="style_line__dmLdn">20</pre><pre class="style_line__dmLdn">21</pre><pre class="style_line__dmLdn">22</pre><pre class="style_line__dmLdn">23</pre><pre class="style_line__dmLdn">24</pre><pre class="style_line__dmLdn">25</pre><pre class="style_line__dmLdn">26</pre><pre class="style_line__dmLdn">27</pre><pre class="style_line__dmLdn">28</pre><pre class="style_line__dmLdn">29</pre><pre class="style_line__dmLdn">30</pre><pre class="style_line__dmLdn">31</pre><pre class="style_line__dmLdn">32</pre><pre class="style_line__dmLdn">33</pre><pre class="style_line__dmLdn">34</pre><pre class="style_line__dmLdn">35</pre><pre class="style_line__dmLdn">36</pre><pre class="style_line__dmLdn">37</pre><pre class="style_line__dmLdn">38</pre><pre class="style_line__dmLdn">39</pre><pre class="style_line__dmLdn">40</pre><pre class="style_line__dmLdn">41</pre><pre class="style_line__dmLdn">42</pre><pre class="style_line__dmLdn">43</pre><pre class="style_line__dmLdn">44</pre><pre class="style_line__dmLdn">45</pre><pre class="style_line__dmLdn">46</pre><pre class="style_line__dmLdn">47</pre><pre class="style_line__dmLdn">48</pre><pre class="style_line__dmLdn">49</pre><pre class="style_line__dmLdn">50</pre><pre class="style_line__dmLdn">51</pre><pre class="style_line__dmLdn">52</pre><pre class="style_line__dmLdn">53</pre><pre class="style_line__dmLdn">54</pre><pre class="style_line__dmLdn">55</pre><pre class="style_line__dmLdn">56</pre><pre class="style_line__dmLdn">57</pre><pre class="style_line__dmLdn">58</pre><pre class="style_line__dmLdn">59</pre><pre class="style_line__dmLdn">60</pre><pre class="style_line__dmLdn">61</pre><pre class="style_line__dmLdn">62</pre><pre class="style_line__dmLdn">63</pre><pre class="style_line__dmLdn">64</pre><pre class="style_line__dmLdn">65</pre><pre class="style_line__dmLdn">66</pre><pre class="style_line__dmLdn">67</pre><pre class="style_line__dmLdn">68</pre><pre class="style_line__dmLdn">69</pre><pre class="style_line__dmLdn">70</pre><pre class="style_line__dmLdn">71</pre><pre class="style_line__dmLdn">72</pre><pre class="style_line__dmLdn">73</pre><pre class="style_line__dmLdn">74</pre><pre class="style_line__dmLdn">75</pre><pre class="style_line__dmLdn">76</pre><pre class="style_line__dmLdn">77</pre><pre class="style_line__dmLdn">78</pre><pre class="style_line__dmLdn">79</pre><pre class="style_line__dmLdn">80</pre><pre class="style_line__dmLdn">81</pre><pre class="style_line__dmLdn">82</pre><pre class="style_line__dmLdn">83</pre><pre class="style_line__dmLdn">84</pre><pre class="style_line__dmLdn">85</pre><pre class="style_line__dmLdn">86</pre><pre class="style_line__dmLdn">87</pre><pre class="style_line__dmLdn">88</pre><pre class="style_line__dmLdn">89</pre><pre class="style_line__dmLdn">90</pre><pre class="style_line__dmLdn">91</pre><pre class="style_line__dmLdn">92</pre><pre class="style_line__dmLdn">93</pre><pre class="style_line__dmLdn">94</pre><pre class="style_line__dmLdn">95</pre><pre class="style_line__dmLdn">96</pre><pre class="style_line__dmLdn">97</pre><pre class="style_line__dmLdn">98</pre><pre class="style_line__dmLdn">99</pre><pre class="style_line__dmLdn">100</pre><pre class="style_line__dmLdn">101</pre><pre class="style_line__dmLdn">102</pre><pre class="style_line__dmLdn">103</pre><pre class="style_line__dmLdn">104</pre><pre class="style_line__dmLdn">105</pre><pre class="style_line__dmLdn">106</pre><pre class="style_line__dmLdn">107</pre><pre class="style_line__dmLdn">108</pre><pre class="style_line__dmLdn">109</pre><pre class="style_line__dmLdn">110</pre><pre class="style_line__dmLdn">111</pre><pre class="style_line__dmLdn">112</pre><pre class="style_line__dmLdn">113</pre><pre class="style_line__dmLdn">114</pre><pre class="style_line__dmLdn">115</pre><pre class="style_line__dmLdn">116</pre><pre class="style_line__dmLdn">117</pre><pre class="style_line__dmLdn">118</pre><pre class="style_line__dmLdn">119</pre><pre class="style_line__dmLdn">120</pre><pre class="style_line__dmLdn">121</pre><pre class="style_line__dmLdn">122</pre><pre class="style_line__dmLdn">123</pre><pre class="style_line__dmLdn">124</pre><pre class="style_line__dmLdn">125</pre><pre class="style_line__dmLdn">126</pre><pre class="style_line__dmLdn">127</pre><pre class="style_line__dmLdn">128</pre><pre class="style_line__dmLdn">129</pre><pre class="style_line__dmLdn">130</pre><pre class="style_line__dmLdn">131</pre><pre class="style_line__dmLdn">132</pre><pre class="style_line__dmLdn">133</pre><pre class="style_line__dmLdn">134</pre><pre class="style_line__dmLdn">135</pre><pre class="style_line__dmLdn">136</pre><pre class="style_line__dmLdn">137</pre><pre class="style_line__dmLdn">138</pre><pre class="style_line__dmLdn">139</pre><pre class="style_line__dmLdn">140</pre><pre class="style_line__dmLdn">141</pre><pre class="style_line__dmLdn">142</pre><pre class="style_line__dmLdn">143</pre><pre class="style_line__dmLdn">144</pre><pre class="style_line__dmLdn">145</pre><pre class="style_line__dmLdn">146</pre><pre class="style_line__dmLdn">147</pre><pre class="style_line__dmLdn">148</pre><pre class="style_line__dmLdn">149</pre><pre class="style_line__dmLdn">150</pre><pre class="style_line__dmLdn">151</pre><pre class="style_line__dmLdn">152</pre><pre class="style_line__dmLdn">153</pre><pre class="style_line__dmLdn">154</pre><pre class="style_line__dmLdn">155</pre><pre class="style_line__dmLdn">156</pre><pre class="style_line__dmLdn">157</pre><pre class="style_line__dmLdn">158</pre><pre class="style_line__dmLdn">159</pre><pre class="style_line__dmLdn">160</pre><pre class="style_line__dmLdn">161</pre><pre class="style_line__dmLdn">162</pre><pre class="style_line__dmLdn">163</pre><pre class="style_line__dmLdn">164</pre><pre class="style_line__dmLdn">165</pre><pre class="style_line__dmLdn">166</pre><pre class="style_line__dmLdn">167</pre><pre class="style_line__dmLdn">168</pre><pre class="style_line__dmLdn">169</pre><pre class="style_line__dmLdn">170</pre><pre class="style_line__dmLdn">171</pre><pre class="style_line__dmLdn">172</pre><pre class="style_line__dmLdn">173</pre><pre class="style_line__dmLdn">174</pre><pre class="style_line__dmLdn">175</pre><pre class="style_line__dmLdn">176</pre><pre class="style_line__dmLdn">177</pre><pre class="style_line__dmLdn">178</pre><pre class="style_line__dmLdn">179</pre><pre class="style_line__dmLdn">180</pre><pre class="style_line__dmLdn">181</pre><pre class="style_line__dmLdn">182</pre><pre class="style_line__dmLdn">183</pre><pre class="style_line__dmLdn">184</pre><pre class="style_line__dmLdn">185</pre><pre class="style_line__dmLdn">186</pre><pre class="style_line__dmLdn">187</pre><pre class="style_line__dmLdn">188</pre><pre class="style_line__dmLdn">189</pre><pre class="style_line__dmLdn">190</pre><pre class="style_line__dmLdn">191</pre><pre class="style_line__dmLdn">192</pre><pre class="style_line__dmLdn">193</pre><pre class="style_line__dmLdn">194</pre><pre class="style_line__dmLdn">195</pre><pre class="style_line__dmLdn">196</pre><pre class="style_line__dmLdn">197</pre><pre class="style_line__dmLdn">198</pre><pre class="style_line__dmLdn">199</pre><pre class="style_line__dmLdn">200</pre><pre class="style_line__dmLdn">201</pre><pre class="style_line__dmLdn">202</pre><pre class="style_line__dmLdn">203</pre><pre class="style_line__dmLdn">204</pre><pre class="style_line__dmLdn">205</pre><pre class="style_line__dmLdn">206</pre><pre class="style_line__dmLdn">207</pre><pre class="style_line__dmLdn">208</pre><pre class="style_line__dmLdn">209</pre><pre class="style_line__dmLdn">210</pre><pre class="style_line__dmLdn">211</pre><pre class="style_line__dmLdn">212</pre><pre class="style_line__dmLdn">213</pre><pre class="style_line__dmLdn">214</pre><pre class="style_line__dmLdn">215</pre><pre class="style_line__dmLdn">216</pre><pre class="style_line__dmLdn">217</pre><pre class="style_line__dmLdn">218</pre><pre class="style_line__dmLdn">219</pre><pre class="style_line__dmLdn">220</pre><pre class="style_line__dmLdn">221</pre><pre class="style_line__dmLdn">222</pre><pre class="style_line__dmLdn">223</pre><pre class="style_line__dmLdn">224</pre><pre class="style_line__dmLdn">225</pre><pre class="style_line__dmLdn">226</pre><pre class="style_line__dmLdn">227</pre><pre class="style_line__dmLdn">228</pre><pre class="style_line__dmLdn">229</pre><pre class="style_line__dmLdn">230</pre><pre class="style_line__dmLdn">231</pre><pre class="style_line__dmLdn">232</pre><pre class="style_line__dmLdn">233</pre><pre class="style_line__dmLdn">234</pre><pre class="style_line__dmLdn">235</pre><pre class="style_line__dmLdn">236</pre><pre class="style_line__dmLdn">237</pre><pre class="style_line__dmLdn">238</pre><pre class="style_line__dmLdn">239</pre><pre class="style_line__dmLdn">240</pre><pre class="style_line__dmLdn">241</pre><pre class="style_line__dmLdn">242</pre><pre class="style_line__dmLdn">243</pre><pre class="style_line__dmLdn">244</pre><pre class="style_line__dmLdn">245</pre><pre class="style_line__dmLdn">246</pre><pre class="style_line__dmLdn">247</pre><pre class="style_line__dmLdn">248</pre><pre class="style_line__dmLdn">249</pre><pre class="style_line__dmLdn">250</pre><pre class="style_line__dmLdn">251</pre><pre class="style_line__dmLdn">252</pre><pre class="style_line__dmLdn">253</pre><pre class="style_line__dmLdn">254</pre><pre class="style_line__dmLdn">255</pre><pre class="style_line__dmLdn">256</pre><pre class="style_line__dmLdn">257</pre><pre class="style_line__dmLdn">258</pre><pre class="style_line__dmLdn">259</pre><pre class="style_line__dmLdn">260</pre><pre class="style_line__dmLdn">261</pre><pre class="style_line__dmLdn">262</pre><pre class="style_line__dmLdn">263</pre><pre class="style_line__dmLdn">264</pre><pre class="style_line__dmLdn">265</pre><pre class="style_line__dmLdn">266</pre><pre class="style_line__dmLdn">267</pre><pre class="style_line__dmLdn">268</pre><pre class="style_line__dmLdn">269</pre><pre class="style_line__dmLdn">270</pre><pre class="style_line__dmLdn">271</pre><pre class="style_line__dmLdn">272</pre><pre class="style_line__dmLdn">273</pre><pre class="style_line__dmLdn">274</pre><pre class="style_line__dmLdn">275</pre><pre class="style_line__dmLdn">276</pre><pre class="style_line__dmLdn">277</pre><pre class="style_line__dmLdn">278</pre><pre class="style_line__dmLdn">279</pre><pre class="style_line__dmLdn">280</pre><pre class="style_line__dmLdn">281</pre><pre class="style_line__dmLdn">282</pre><pre class="style_line__dmLdn">283</pre><pre class="style_line__dmLdn">284</pre><pre class="style_line__dmLdn">285</pre><pre class="style_line__dmLdn">286</pre><pre class="style_line__dmLdn">287</pre><pre class="style_line__dmLdn">288</pre><pre class="style_line__dmLdn">289</pre><pre class="style_line__dmLdn">290</pre><pre class="style_line__dmLdn">291</pre><pre class="style_line__dmLdn">292</pre><pre class="style_line__dmLdn">293</pre><pre class="style_line__dmLdn">294</pre><pre class="style_line__dmLdn">295</pre><pre class="style_line__dmLdn">296</pre><pre class="style_line__dmLdn">297</pre><pre class="style_line__dmLdn">298</pre><pre class="style_line__dmLdn">299</pre><pre class="style_line__dmLdn">300</pre><pre class="style_line__dmLdn">301</pre><pre class="style_line__dmLdn">302</pre><pre class="style_line__dmLdn">303</pre><pre class="style_line__dmLdn">304</pre><pre class="style_line__dmLdn">305</pre><pre class="style_line__dmLdn">306</pre><pre class="style_line__dmLdn">307</pre><pre class="style_line__dmLdn">308</pre><pre class="style_line__dmLdn">309</pre><pre class="style_line__dmLdn">310</pre><pre class="style_line__dmLdn">311</pre><pre class="style_line__dmLdn">312</pre><pre class="style_line__dmLdn">313</pre><pre class="style_line__dmLdn">314</pre><pre class="style_line__dmLdn">315</pre><pre class="style_line__dmLdn">316</pre><pre class="style_line__dmLdn">317</pre><pre class="style_line__dmLdn">318</pre><pre class="style_line__dmLdn">319</pre><pre class="style_line__dmLdn">320</pre><pre class="style_line__dmLdn">321</pre><pre class="style_line__dmLdn">322</pre><pre class="style_line__dmLdn">323</pre><pre class="style_line__dmLdn">324</pre><pre class="style_line__dmLdn">325</pre><pre class="style_line__dmLdn">326</pre><pre class="style_line__dmLdn">327</pre><pre class="style_line__dmLdn">328</pre><pre class="style_line__dmLdn">329</pre><pre class="style_line__dmLdn">330</pre><pre class="style_line__dmLdn">331</pre><pre class="style_line__dmLdn">332</pre><pre class="style_line__dmLdn">333</pre><pre class="style_line__dmLdn">334</pre><pre class="style_line__dmLdn">335</pre><pre class="style_line__dmLdn">336</pre><pre class="style_line__dmLdn">337</pre><pre class="style_line__dmLdn">338</pre><pre class="style_line__dmLdn">339</pre><pre class="style_line__dmLdn">340</pre><pre class="style_line__dmLdn">341</pre><pre class="style_line__dmLdn">342</pre><pre class="style_line__dmLdn">343</pre><pre class="style_line__dmLdn">344</pre><pre class="style_line__dmLdn">345</pre><pre class="style_line__dmLdn">346</pre><pre class="style_line__dmLdn">347</pre><pre class="style_line__dmLdn">348</pre><pre class="style_line__dmLdn">349</pre><pre class="style_line__dmLdn">350</pre><pre class="style_line__dmLdn">351</pre><pre class="style_line__dmLdn">352</pre><pre class="style_line__dmLdn">353</pre><pre class="style_line__dmLdn">354</pre><pre class="style_line__dmLdn">355</pre><pre class="style_line__dmLdn">356</pre><pre class="style_line__dmLdn">357</pre><pre class="style_line__dmLdn">358</pre><pre class="style_line__dmLdn">359</pre><pre class="style_line__dmLdn">360</pre><pre class="style_line__dmLdn">361</pre><pre class="style_line__dmLdn">362</pre><pre class="style_line__dmLdn">363</pre><pre class="style_line__dmLdn">364</pre><pre class="style_line__dmLdn">365</pre><pre class="style_line__dmLdn">366</pre><pre class="style_line__dmLdn">367</pre><pre class="style_line__dmLdn">368</pre><pre class="style_line__dmLdn">369</pre><pre class="style_line__dmLdn">370</pre><pre class="style_line__dmLdn">371</pre><pre class="style_line__dmLdn">372</pre><pre class="style_line__dmLdn">373</pre><pre class="style_line__dmLdn">374</pre><pre class="style_line__dmLdn">375</pre><pre class="style_line__dmLdn">376</pre><pre class="style_line__dmLdn">377</pre><pre class="style_line__dmLdn">378</pre><pre class="style_line__dmLdn">379</pre><pre class="style_line__dmLdn">380</pre><pre class="style_line__dmLdn">381</pre><pre class="style_line__dmLdn">382</pre><pre class="style_line__dmLdn">383</pre><pre class="style_line__dmLdn">384</pre><pre class="style_line__dmLdn">385</pre><pre class="style_line__dmLdn">386</pre><pre class="style_line__dmLdn">387</pre><pre class="style_line__dmLdn">388</pre><pre class="style_line__dmLdn">389</pre><pre class="style_line__dmLdn">390</pre><pre class="style_line__dmLdn">391</pre><pre class="style_line__dmLdn">392</pre><pre class="style_line__dmLdn">393</pre><pre class="style_line__dmLdn">394</pre><pre class="style_line__dmLdn">395</pre><pre class="style_line__dmLdn">396</pre><pre class="style_line__dmLdn">397</pre><pre class="style_line__dmLdn">398</pre><pre class="style_line__dmLdn">399</pre><pre class="style_line__dmLdn">400</pre><pre class="style_line__dmLdn">401</pre><pre class="style_line__dmLdn">402</pre><pre class="style_line__dmLdn">403</pre><pre class="style_line__dmLdn">404</pre><pre class="style_line__dmLdn">405</pre></div><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">import apiConsole from &quot;../typescript-deno-0.3.3-0.1.0/index.ts&quot;;</pre><pre class="style_line__dmLdn">import { PartEvent } from &#x27;../typescript-deno-0.3.3-0.1.0/types/platform/interface/part/event/partEvent.ts&#x27;;</pre><pre class="style_line__dmLdn">import { Modification } from &quot;../typescript-deno-0.3.3-0.1.0/types/platform/unit/unit/modification/index.ts&quot;;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">import { part } from &#x27;./constants.ts&#x27;;</pre><pre class="style_line__dmLdn">import { AudioCircuit, State } from &#x27;./types.ts&#x27;;</pre><pre class="style_line__dmLdn">import { interfaceTo, updateExportableData } from &#x27;./utils.ts&#x27;;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">//state</pre><pre class="style_line__dmLdn">	const audioCircuit:AudioCircuit = {</pre><pre class="style_line__dmLdn">		streamDuplicator1: undefined,</pre><pre class="style_line__dmLdn">		streamDuplicator2: undefined,</pre><pre class="style_line__dmLdn">		highMidLowFilter1: undefined,</pre><pre class="style_line__dmLdn">		highMidLowFilter2: undefined,</pre><pre class="style_line__dmLdn">		highMidLowFilter3: undefined,</pre><pre class="style_line__dmLdn">		gainIn1: undefined,</pre><pre class="style_line__dmLdn">		gainIn2: undefined,</pre><pre class="style_line__dmLdn">		gainIn3: undefined,</pre><pre class="style_line__dmLdn">		waveShaper1: undefined,</pre><pre class="style_line__dmLdn">		waveShaper2: undefined,</pre><pre class="style_line__dmLdn">		waveShaper3: undefined,</pre><pre class="style_line__dmLdn">		gainOut1: undefined,</pre><pre class="style_line__dmLdn">		gainOut2: undefined,</pre><pre class="style_line__dmLdn">		gainOut3: undefined,</pre><pre class="style_line__dmLdn">		streamAdder3: undefined</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	let state:State = {</pre><pre class="style_line__dmLdn">		gainIn1: 0.5,</pre><pre class="style_line__dmLdn">		gainIn2: 0.5,</pre><pre class="style_line__dmLdn">		gainIn3: 0.5,</pre><pre class="style_line__dmLdn">		distortion1: 0.0,</pre><pre class="style_line__dmLdn">		distortion2: 0.0,</pre><pre class="style_line__dmLdn">		distortion3: 0.0,</pre><pre class="style_line__dmLdn">		resolution1: 0.5,</pre><pre class="style_line__dmLdn">		resolution2: 0.5,</pre><pre class="style_line__dmLdn">		resolution3: 0.5,</pre><pre class="style_line__dmLdn">		gainOut1: 0.5,</pre><pre class="style_line__dmLdn">		gainOut2: 0.5,</pre><pre class="style_line__dmLdn">		gainOut3: 0.5</pre><pre class="style_line__dmLdn">	};</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">//setup</pre><pre class="style_line__dmLdn">	//audio circuit</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;StreamDuplicator&quot; }, (node_id) =&gt; {audioCircuit.streamDuplicator1 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;StreamDuplicator&quot; }, (node_id) =&gt; {audioCircuit.streamDuplicator2 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;HighMidLowFilter&quot; }, (node_id) =&gt; {audioCircuit.highMidLowFilter1 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;HighMidLowFilter&quot; }, (node_id) =&gt; {audioCircuit.highMidLowFilter2 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;HighMidLowFilter&quot; }, (node_id) =&gt; {audioCircuit.highMidLowFilter3 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainIn1 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainIn2 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainIn3 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;WaveShaper&quot; }, (node_id) =&gt; {audioCircuit.waveShaper1 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;WaveShaper&quot; }, (node_id) =&gt; {audioCircuit.waveShaper2 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;WaveShaper&quot; }, (node_id) =&gt; {audioCircuit.waveShaper3 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainOut1 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainOut2 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;Gain&quot; }, (node_id) =&gt; {audioCircuit.gainOut3 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn">		apiConsole.alpa.createNode({ &quot;type&quot;: &quot;StreamAdder3&quot; }, (node_id) =&gt; {audioCircuit.streamAdder3 = node_id; updateAudioConnections();});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		function updateAudioConnections() {</pre><pre class="style_line__dmLdn">			if(</pre><pre class="style_line__dmLdn">				audioCircuit.streamDuplicator1 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.streamDuplicator2 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.highMidLowFilter1 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.highMidLowFilter2 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.highMidLowFilter3 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainIn1 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainIn2 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainIn3 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.waveShaper1 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.waveShaper2 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.waveShaper3 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainOut1 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainOut2 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainOut3 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.streamAdder3 === undefined</pre><pre class="style_line__dmLdn">			) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			const audioPortNodeIDs = apiConsole.alpa.getAudioPortNodeIds();</pre><pre class="style_line__dmLdn">			if(audioPortNodeIDs === undefined) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			//routing</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioPortNodeIDs[0], 0, audioCircuit.streamDuplicator1, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator1, 1, audioCircuit.streamDuplicator2, 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator1, 0, audioCircuit.gainIn1, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator2, 0, audioCircuit.gainIn2, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator2, 1, audioCircuit.gainIn3, 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn1, 0, audioCircuit.waveShaper1, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn2, 0, audioCircuit.waveShaper2, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn3, 0, audioCircuit.waveShaper3, 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper1, 0, audioCircuit.highMidLowFilter1, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper2, 0, audioCircuit.highMidLowFilter2, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper3, 0, audioCircuit.highMidLowFilter3, 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter1, 0, audioCircuit.gainOut1, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter2, 0, audioCircuit.gainOut2, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter3, 0, audioCircuit.gainOut3, 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut1, 0, audioCircuit.streamAdder3, 0, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut2, 0, audioCircuit.streamAdder3, 1, () =&gt; {});</pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut3, 0, audioCircuit.streamAdder3, 2, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">				apiConsole.alpa.createRouteNodeToNode(audioCircuit.streamAdder3, 0, audioPortNodeIDs[1], 0, () =&gt; {});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			//set up</pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setHighBandQ(audioCircuit.highMidLowFilter1, 1);</pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setMidBandQ(audioCircuit.highMidLowFilter1, 1);</pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setLowBandQ(audioCircuit.highMidLowFilter1, 1);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter1, 0);</pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter1, -2.5);</pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter1, -10);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter2, -2.5);</pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter2, 0);</pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter2, -2.5);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter3, -10);</pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter3, -2.5);</pre><pre class="style_line__dmLdn">				apiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter3, 0);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">				apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));</pre><pre class="style_line__dmLdn">				apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));</pre><pre class="style_line__dmLdn">				apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));</pre><pre class="style_line__dmLdn">				apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">				apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">				apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">				apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));</pre><pre class="style_line__dmLdn">				apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));</pre><pre class="style_line__dmLdn">				apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));</pre><pre class="style_line__dmLdn">		}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	//dials</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainOut1, true, state.gainOut1);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainOut2, true, state.gainOut2);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainOut3, true, state.gainOut3);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.distortion1, true, state.distortion1);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.distortion2, true, state.distortion2);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.distortion3, true, state.distortion3);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.resolution1, true, state.resolution1);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.resolution2, true, state.resolution2);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.resolution3, true, state.resolution3);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainIn1, true, state.gainIn1);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainIn2, true, state.gainIn2);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part.gainIn3, true, state.gainIn3);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">//mouse events</pre><pre class="style_line__dmLdn">	function handleMouseEvent(partIndex:number, isOnFrontLayer:boolean, event:PartEvent) {</pre><pre class="style_line__dmLdn">		if(!isOnFrontLayer) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		if(</pre><pre class="style_line__dmLdn">			audioCircuit.streamDuplicator1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.streamDuplicator2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.streamAdder3 === undefined</pre><pre class="style_line__dmLdn">		) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		if(event.type === &quot;continuousDial&quot;) {</pre><pre class="style_line__dmLdn">			let modification:Modification | undefined;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			if(event.content.type === &quot;change&quot;) {</pre><pre class="style_line__dmLdn">				switch (partIndex) {</pre><pre class="style_line__dmLdn">					case part.gainOut1:</pre><pre class="style_line__dmLdn">						state.gainOut1 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.gainOut2:</pre><pre class="style_line__dmLdn">						state.gainOut2 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.gainOut3:</pre><pre class="style_line__dmLdn">						state.gainOut3 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.distortion1:</pre><pre class="style_line__dmLdn">						state.distortion1 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.distortion2:</pre><pre class="style_line__dmLdn">						state.distortion2 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.distortion3:</pre><pre class="style_line__dmLdn">						state.distortion3 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.resolution1:</pre><pre class="style_line__dmLdn">						state.resolution1 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.resolution2:</pre><pre class="style_line__dmLdn">						state.resolution2 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.resolution3:</pre><pre class="style_line__dmLdn">						state.resolution3 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.gainIn1:</pre><pre class="style_line__dmLdn">						state.gainIn1 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.gainIn2:</pre><pre class="style_line__dmLdn">						state.gainIn2 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.gainIn3:</pre><pre class="style_line__dmLdn">						state.gainIn3 = event.content.content.currentLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			} else if(event.content.type === &quot;release&quot;) {</pre><pre class="style_line__dmLdn">				switch (partIndex) {</pre><pre class="style_line__dmLdn">					case part.gainOut1:</pre><pre class="style_line__dmLdn">						state.gainOut1 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;gainOut1&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.gainOut2:</pre><pre class="style_line__dmLdn">						state.gainOut2 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;gainOut2&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.gainOut3:</pre><pre class="style_line__dmLdn">						state.gainOut3 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;gainOut3&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.distortion1:</pre><pre class="style_line__dmLdn">						state.distortion1 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;distortion1&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.distortion2:</pre><pre class="style_line__dmLdn">						state.distortion2 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;distortion2&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.distortion3:</pre><pre class="style_line__dmLdn">						state.distortion3 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;distortion3&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.resolution1: {</pre><pre class="style_line__dmLdn">						state.resolution1 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;resolution1&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					} break;</pre><pre class="style_line__dmLdn">					case part.resolution2: {</pre><pre class="style_line__dmLdn">						state.resolution2 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;resolution2&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					} break;</pre><pre class="style_line__dmLdn">					case part.resolution3: {</pre><pre class="style_line__dmLdn">						state.resolution3 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;resolution3&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					} break;</pre><pre class="style_line__dmLdn">					case part.gainIn1:</pre><pre class="style_line__dmLdn">						state.gainIn1 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;gainIn1&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.gainIn2:</pre><pre class="style_line__dmLdn">						state.gainIn2 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;gainIn2&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">					case part.gainIn3:</pre><pre class="style_line__dmLdn">						state.gainIn3 = event.content.content.finishLocation;</pre><pre class="style_line__dmLdn">						apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));</pre><pre class="style_line__dmLdn">						modification = apiConsole.createModification(&quot;gainIn3&quot;, JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));</pre><pre class="style_line__dmLdn">					break;</pre><pre class="style_line__dmLdn">				}</pre><pre class="style_line__dmLdn">			}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			updateExportableData(state);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			return modification;</pre><pre class="style_line__dmLdn">		}</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	apiConsole.unit.setMouseEventListener(({ partIndex, isOnFrontLayer, event }) =&gt; handleMouseEvent(partIndex, isOnFrontLayer, event));</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	apiConsole.unit.setMouseWheelEventListener(({ partIndex, isOnFrontLayer, event }) =&gt; handleMouseEvent(partIndex, isOnFrontLayer, event));</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">//import</pre><pre class="style_line__dmLdn">	apiConsole.unit.setImportListener(({dataString}) =&gt; {</pre><pre class="style_line__dmLdn">		state = JSON.parse(dataString) as State;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		//dials</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.gainOut1, true, state.gainOut1);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.gainOut2, true, state.gainOut2);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.gainOut3, true, state.gainOut3);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.distortion1, true, state.distortion1);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.distortion2, true, state.distortion2);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.distortion3, true, state.distortion3);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.resolution1, true, state.resolution1);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.resolution2, true, state.resolution2);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.resolution3, true, state.resolution3);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.gainIn1, true, state.gainIn1);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.gainIn2, true, state.gainIn2);</pre><pre class="style_line__dmLdn">			apiConsole.interface.dialContinuous.setValue(part.gainIn3, true, state.gainIn3);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		//audio circuit</pre><pre class="style_line__dmLdn">			if(</pre><pre class="style_line__dmLdn">				audioCircuit.streamDuplicator1 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.streamDuplicator2 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.highMidLowFilter1 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.highMidLowFilter2 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.highMidLowFilter3 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainIn1 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainIn2 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainIn3 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.waveShaper1 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.waveShaper2 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.waveShaper3 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainOut1 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainOut2 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.gainOut3 === undefined ||</pre><pre class="style_line__dmLdn">				audioCircuit.streamAdder3 === undefined</pre><pre class="style_line__dmLdn">			) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));</pre><pre class="style_line__dmLdn">			apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));</pre><pre class="style_line__dmLdn">	});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">//undo / redo</pre><pre class="style_line__dmLdn">	function handleUndoRedo(meta:string, modificationValue:string) {</pre><pre class="style_line__dmLdn">		if(</pre><pre class="style_line__dmLdn">			audioCircuit.streamDuplicator1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.streamDuplicator2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.highMidLowFilter3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainIn3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.waveShaper3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut1 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut2 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.gainOut3 === undefined ||</pre><pre class="style_line__dmLdn">			audioCircuit.streamAdder3 === undefined</pre><pre class="style_line__dmLdn">		) { return; }</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		state[meta] = JSON.parse(modificationValue);</pre><pre class="style_line__dmLdn">		apiConsole.interface.dialContinuous.setValue(part[meta], true, state[meta]);</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">		switch(meta) {</pre><pre class="style_line__dmLdn">			case &quot;gainOut1&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn">			case &quot;gainOut2&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn">			case &quot;gainOut3&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn">			case &quot;gainIn1&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn">			case &quot;gainIn2&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn">			case &quot;gainIn3&quot;: apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state[meta])); break;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			case &quot;distortion1&quot;:</pre><pre class="style_line__dmLdn">			case &quot;resolution1&quot;:</pre><pre class="style_line__dmLdn">				apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));</pre><pre class="style_line__dmLdn">			break;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			case &quot;distortion2&quot;:</pre><pre class="style_line__dmLdn">			case &quot;resolution2&quot;:</pre><pre class="style_line__dmLdn">				apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));</pre><pre class="style_line__dmLdn">			break;</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">			case &quot;distortion3&quot;:</pre><pre class="style_line__dmLdn">			case &quot;resolution3&quot;:</pre><pre class="style_line__dmLdn">				apiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));</pre><pre class="style_line__dmLdn">			break;</pre><pre class="style_line__dmLdn">		}</pre><pre class="style_line__dmLdn">	}</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	apiConsole.unit.setUndoListener(({modification}) =&gt; {</pre><pre class="style_line__dmLdn">		handleUndoRedo(modification.meta, modification.before);</pre><pre class="style_line__dmLdn">		updateExportableData(state);</pre><pre class="style_line__dmLdn">	});</pre><pre class="style_line__dmLdn"> </pre><pre class="style_line__dmLdn">	apiConsole.unit.setRedoListener(({modification}) =&gt; {</pre><pre class="style_line__dmLdn">		handleUndoRedo(modification.meta, modification.after);</pre><pre class="style_line__dmLdn">		updateExportableData(state);</pre><pre class="style_line__dmLdn">	});</pre></div></div><div class="style_showMore__8WfBB"><p>Show More</p></div></div><p>And this should leave us finally with a file structure like so</p><div class="style_main__GW_QM"><div class="style_codeSpace__m5Tgk style_codeSpace_limited__cJzT_"><div class="style_lines__PGiOP"><pre class="style_line__dmLdn">custom_audio</pre><pre class="style_line__dmLdn">├─ deno</pre><pre class="style_line__dmLdn">├─ multi_channel_distortion</pre><pre class="style_line__dmLdn">│  ├ constants.ts</pre><pre class="style_line__dmLdn">│  ├ index.unit</pre><pre class="style_line__dmLdn">│  ├ types.ts</pre><pre class="style_line__dmLdn">│  └ utils.ts</pre><pre class="style_line__dmLdn">└─ typescript-deno-x.x.x-y.y.y</pre></div></div></div><h2>Done!</h2><p>Congratulations! You&#x27;ve just created a new unit which uses the audio engine. You can now play around with it in whatever way you like. Personally, I find it sounds great as a distortion box for an electric guitar. Having the ability to chose how much distortion I have for High or Low frequencies really gives lots of freedom in what sounds you can create.</p><img class="style_image__0ycHi" src="/guide/developer/tutorials/multi-channel-distortion/unit-in-system.png"/></div><div class="style_previousNext__Pea0Y"></div></div></div></main></div><footer class="style_main__NsKqp"><img src="/four_colour_stripes_banner.png" class="style_backgroundImage___DZ8F"/><div class="style_overlay__nf3f4"><p>© Metasophiea / Interloper 2024</p></div></footer></div><script src="/_next/static/chunks/webpack-9c7419ab1ba4157d.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/media/120a5a1920781bd0-s.p.woff2\",\"font\",{\"crossOrigin\":\"\",\"type\":\"font/woff2\"}]\n2:HL[\"/_next/static/css/b207df9cce6f5d60.css\",\"style\"]\n3:HL[\"/_next/static/css/0686439a7d1c5f34.css\",\"style\"]\n"])</script><script>self.__next_f.push([1,"4:I[992,[],\"\"]\n6:I[5555,[\"5555\",\"static/chunks/5555-7fa0558dbec5c878.js\",\"7734\",\"static/chunks/app/guide/developer/tutorials/article/multi-channel-distortion/page-e12c59b27db149e1.js\"],\"\"]\n7:I[2657,[\"5555\",\"static/chunks/5555-7fa0558dbec5c878.js\",\"7734\",\"static/chunks/app/guide/developer/tutorials/article/multi-channel-distortion/page-e12c59b27db149e1.js\"],\"default\"]\n8:I[6882,[],\"\"]\n9:I[6126,[],\"\"]\na:I[4929,[\"5555\",\"static/chunks/5555-7fa0558dbec5c878.js\",\"3185\",\"static/chunks/app/layout-c56e517873900da0.js\"],\"default\"]\nc:I[5999,[],\"\"]\nd:[]\n"])</script><script>self.__next_f.push([1,"0:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/b207df9cce6f5d60.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"-zzENosYgwmaVDpFETheT\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/guide/developer/tutorials/article/multi-channel-distortion\",\"initialTree\":[\"\",{\"children\":[\"guide\",{\"children\":[\"developer\",{\"children\":[\"tutorials\",{\"children\":[\"article\",{\"children\":[\"multi-channel-distortion\",{\"children\":[\"__PAGE__\",{}]}]}]}]}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[\"guide\",{\"children\":[\"developer\",{\"children\":[\"tutorials\",{\"children\":[\"article\",{\"children\":[\"multi-channel-distortion\",{\"children\":[\"__PAGE__\",{},[[\"$L5\",[\"$\",\"main\",null,{\"children\":[\"$\",\"div\",null,{\"className\":\"style_main__c51pI\",\"children\":[[\"$\",\"div\",null,{\"className\":\"style_main__F_177\",\"children\":[[\"$\",\"$L6\",\"0\",{\"href\":\"/\",\"className\":\"style_link__eozNW\",\"aria-disabled\":false,\"tabIndex\":\"$undefined\",\"children\":\"home\"}],[\"$\",\"p\",\"divider1\",{\"className\":\"style_divider__YWHjs\",\"children\":\"/\"}],[\"$\",\"$L6\",\"1\",{\"href\":\"/guide\",\"className\":\"style_link__eozNW\",\"aria-disabled\":false,\"tabIndex\":\"$undefined\",\"children\":\"guide\"}],[\"$\",\"p\",\"divider2\",{\"className\":\"style_divider__YWHjs\",\"children\":\"/\"}],[\"$\",\"$L6\",\"2\",{\"href\":\"/guide/developer\",\"className\":\"style_link__eozNW\",\"aria-disabled\":false,\"tabIndex\":\"$undefined\",\"children\":\"developer\"}],[\"$\",\"p\",\"divider3\",{\"className\":\"style_divider__YWHjs\",\"children\":\"/\"}],[\"$\",\"$L6\",\"3\",{\"href\":\"/guide/developer/tutorials\",\"className\":\"style_link__eozNW\",\"aria-disabled\":false,\"tabIndex\":\"$undefined\",\"children\":\"tutorials\"}],[\"$\",\"p\",\"divider4\",{\"className\":\"style_divider__YWHjs\",\"children\":\"/\"}],[\"$\",\"$L6\",\"4\",{\"href\":\"/guide/developer/tutorials/article/multi-channel-distortion\",\"className\":\"style_link__eozNW\",\"aria-disabled\":true,\"tabIndex\":-1,\"children\":\"Multi Channel Distortion\"}]]}],[\"$\",\"div\",null,{\"className\":\"style_content__rQ3D1\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"style_title__QJpJn\",\"children\":\"Multi Channel Distortion\"}],[\"$\",\"h2\",null,{\"className\":\"style_subTitle___R0E7\",\"children\":\"A example of working with the Audio engine\"}],[\"$\",\"img\",null,{\"src\":\"/four_colour_stripes_banner.png\",\"className\":\"style_headerImage__jM6kU\"}],[\"$\",\"div\",null,{\"className\":\"style_childrenWrapper__Nt54u\",\"children\":[[\"$\",\"h2\",null,{\"children\":\"Introduction\"}],[\"$\",\"p\",null,{\"children\":\"In this tutorial we will be building a unit which uses the audio engine. Its going to be a three-band distortion filter. The idea being that we want to be able to apply distortion to the High, Mid and Low frequency bands.\"}],[\"$\",\"p\",null,{\"children\":\"The audio circuit will look like this\"}],[\"$\",\"img\",null,{\"className\":\"style_image80__ax_CV\",\"src\":\"/guide/developer/tutorials/multi-channel-distortion/flow.png\"}],[\"$\",\"p\",null,{\"children\":\"Each gain and WaveShaper will be controllable. We will hardcode the vales for the HighMidLowFilters.\"}],[\"$\",\"div\",null,{\"className\":\"style_main__L8yyS\",\"children\":[[\"$\",\"h3\",null,{\"className\":\"style_title__oTWxy\",\"children\":\"Note\"}],[\"$\",\"div\",null,{\"className\":\"style_children__6YSiK\",\"children\":[\"We will be using the Deno runtime to run a typescript program. You can learn about how to set this up in the \",[\"$\",\"$L6\",null,{\"className\":\"$undefined\",\"href\":\"/guide/developer/tutorials/article/how-to-make-a-unit/1\",\"children\":\"How To Make A Unit\"}],\" tutorial\"]}]]}],[\"$\",\"h2\",null,{\"children\":\"The Group Description\"}],[\"$\",\"$L7\",null,{\"lines\":[\"{\",\"\\t\\\"printName\\\": \\\"Custom Audio\\\",\",\"\\t\\\"inDevelopment\\\": true,\",\"\\t\\\"subListWidth\\\": 160.0\",\"}\"],\"includeLineNumbers\":true}],[\"$\",\"p\",null,{\"children\":\"Pretty straightforward, though we set the \\\"inDevelopment\\\" entry to true while we're still developing the unit. We also set the \\\"subListWidth\\\" value to 160, in order to accommodate the title of the unit.\"}],[\"$\",\"h2\",null,{\"children\":\"The Unit Description\"}],[\"$\",\"p\",null,{\"children\":\"Next lets move onto the unit description itself. I first designed the layout of this unit in my head, then began creating the file, recreating the unit and iterating the design as I went along before arriving at what you see below. This is a rather slow process involving many restarts of Alchemy. Alchemy's roadmap includes a better way to design units, but for now we're stuck with this process.\"}],[\"$\",\"p\",null,{\"children\":\"I recommend first designing your unit in a vector-based design program, then copying the element details over. Though for this unit I've done all the work for you.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"{\",\"\\t\\\"inDevelopment\\\": true,\",\"\\t\\\"modelName\\\": \\\"multi_channel_distortion\\\",\",\"\\t\\\"printName\\\": \\\"Multi Channel Distortion\\\",\",\"\\t\\\"space\\\": [\",\"\\t\\t{\\\"x\\\": 0.0, \\\"y\\\": 0.0},\",\"\\t\\t{\\\"x\\\": 0.0, \\\"y\\\": 150.0},\",\"\\t\\t{\\\"x\\\": 155.0, \\\"y\\\": 150.0},\",\"\\t\\t{\\\"x\\\": 155.0, \\\"y\\\": 0.0}\",\"\\t],\",\"\\t\\\"collisionActive\\\": true,\",\"\\t\\\"executable\\\": {\",\"\\t\\t\\\"mac\\\": \\\"../deno\\\",\",\"\\t\\t\\\"win\\\": \\\"../deno.exe\\\",\",\"\\t\\t\\\"args\\\": [\\\"run\\\", \\\"--allow-read\\\", \\\"main.ts\\\"]\",\"\\t},\",\"\\t\\\"base\\\": [\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"backing\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"rectangle\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"width\\\": 155.0,\",\"\\t\\t\\t\\t\\t\\\"height\\\": 150.0,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"frame\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"rectangle\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 5.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 5.0,\",\"\\t\\t\\t\\t\\t\\\"width\\\": 145.0,\",\"\\t\\t\\t\\t\\t\\\"height\\\": 125.0,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0.35, \\\"g\\\": 0.35, \\\"b\\\": 0.35}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"join_in\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"path\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 10.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\\"points\\\": [{\\\"x\\\":0.0, \\\"y\\\":0.0}, {\\\"x\\\":0.0, \\\"y\\\":70.0}],\",\"\\t\\t\\t\\t\\t\\\"thickness\\\": 2.5,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0.45, \\\"g\\\": 0.45, \\\"b\\\": 0.45}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"join_out\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"path\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 145.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\\"points\\\": [{\\\"x\\\":0.0, \\\"y\\\":0.0}, {\\\"x\\\":0.0, \\\"y\\\":70.0}],\",\"\\t\\t\\t\\t\\t\\\"thickness\\\": 2.5,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0.45, \\\"g\\\": 0.45, \\\"b\\\": 0.45}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"channel_1\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"path\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 10.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\\"points\\\": [{\\\"x\\\":0.0, \\\"y\\\":0.0}, {\\\"x\\\":135.0, \\\"y\\\":0.0}],\",\"\\t\\t\\t\\t\\t\\\"thickness\\\": 2.5,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0.45, \\\"g\\\": 0.45, \\\"b\\\": 0.45}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"channel_2\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"path\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 0.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\\"points\\\": [{\\\"x\\\":0.0, \\\"y\\\":0.0}, {\\\"x\\\":155.0, \\\"y\\\":0.0}],\",\"\\t\\t\\t\\t\\t\\\"thickness\\\": 2.5,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0.45, \\\"g\\\": 0.45, \\\"b\\\": 0.45}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"channel_3\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"path\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 10.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 95.0,\",\"\\t\\t\\t\\t\\t\\\"points\\\": [{\\\"x\\\":0.0, \\\"y\\\":0.0}, {\\\"x\\\":135.0, \\\"y\\\":0.0}],\",\"\\t\\t\\t\\t\\t\\\"thickness\\\": 2.5,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0.45, \\\"g\\\": 0.45, \\\"b\\\": 0.45}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"group\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"rectangle\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 40.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 7.5,\",\"\\t\\t\\t\\t\\t\\\"width\\\": 75.0,\",\"\\t\\t\\t\\t\\t\\\"height\\\": 120.0,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 1, \\\"g\\\": 1, \\\"b\\\": 1, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"logo\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"characterString\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 5.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 145.0,\",\"\\t\\t\\t\\t\\t\\\"scale\\\": 0.6,\",\"\\t\\t\\t\\t\\t\\\"characterString\\\": \\\"Custom Audio\\\",\",\"\\t\\t\\t\\t\\t\\\"interCharacterSpacing\\\": 1.0,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 1, \\\"g\\\": 1, \\\"b\\\": 1}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"model\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"characterString\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 150.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 145.0,\",\"\\t\\t\\t\\t\\t\\\"scale\\\": 0.4,\",\"\\t\\t\\t\\t\\t\\\"characterString\\\": \\\"Multi Channel Distortion\\\",\",\"\\t\\t\\t\\t\\t\\\"interCharacterSpacing\\\": 1.0,\",\"\\t\\t\\t\\t\\t\\\"printingModeHorizontal\\\": \\\"right\\\",\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 1, \\\"g\\\": 1, \\\"b\\\": 1}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"out_gain_text\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"characterString\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 117.5,\",\"\\t\\t\\t\\t\\t\\\"scale\\\": 0.4,\",\"\\t\\t\\t\\t\\t\\\"characterString\\\": \\\"out gain\\\",\",\"\\t\\t\\t\\t\\t\\\"printingModeHorizontal\\\": \\\"middle\\\",\",\"\\t\\t\\t\\t\\t\\\"printingModeVertical\\\": \\\"calculatedTop\\\",\",\"\\t\\t\\t\\t\\t\\\"interCharacterSpacing\\\": 1.0,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0, \\\"g\\\": 0, \\\"b\\\": 0}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"distortion\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"characterString\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 117.5,\",\"\\t\\t\\t\\t\\t\\\"scale\\\": 0.4,\",\"\\t\\t\\t\\t\\t\\\"characterString\\\": \\\"distortion\\\",\",\"\\t\\t\\t\\t\\t\\\"printingModeHorizontal\\\": \\\"middle\\\",\",\"\\t\\t\\t\\t\\t\\\"printingModeVertical\\\": \\\"calculatedTop\\\",\",\"\\t\\t\\t\\t\\t\\\"interCharacterSpacing\\\": 1.0,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0, \\\"g\\\": 0, \\\"b\\\": 0}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"resolution\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"characterString\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 95.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 117.5,\",\"\\t\\t\\t\\t\\t\\\"scale\\\": 0.4,\",\"\\t\\t\\t\\t\\t\\\"characterString\\\": \\\"resolution\\\",\",\"\\t\\t\\t\\t\\t\\\"printingModeHorizontal\\\": \\\"middle\\\",\",\"\\t\\t\\t\\t\\t\\\"printingModeVertical\\\": \\\"calculatedTop\\\",\",\"\\t\\t\\t\\t\\t\\\"interCharacterSpacing\\\": 1.0,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0, \\\"g\\\": 0, \\\"b\\\": 0}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t},\",\"\\t\\t{\",\"\\t\\t\\t\\\"name\\\": \\\"in_gain_text\\\",\",\"\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\\"type\\\": \\\"characterString\\\",\",\"\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\\"x\\\": 130.0,\",\"\\t\\t\\t\\t\\t\\\"y\\\": 117.5,\",\"\\t\\t\\t\\t\\t\\\"scale\\\": 0.4,\",\"\\t\\t\\t\\t\\t\\\"characterString\\\": \\\"in gain\\\",\",\"\\t\\t\\t\\t\\t\\\"printingModeHorizontal\\\": \\\"middle\\\",\",\"\\t\\t\\t\\t\\t\\\"printingModeVertical\\\": \\\"calculatedTop\\\",\",\"\\t\\t\\t\\t\\t\\\"interCharacterSpacing\\\": 1.0,\",\"\\t\\t\\t\\t\\t\\\"colour\\\": {\\\"r\\\": 0, \\\"g\\\": 0, \\\"b\\\": 0}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t}\",\"\\t],\",\"\\t\\\"parts\\\": {\",\"\\t\\t\\\"back\\\": [\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"audio_in\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"audioPort\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 0.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\t\\\"height\\\": 15.0,\",\"\\t\\t\\t\\t\\t\\t\\\"width\\\": 5.0,\",\"\\t\\t\\t\\t\\t\\t\\\"angle\\\": 3.1415927,\",\"\\t\\t\\t\\t\\t\\t\\\"anchor\\\": {\\\"x\\\":0, \\\"y\\\":0.5},\",\"\\t\\t\\t\\t\\t\\t\\\"mode\\\": \\\"producer\\\"\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"audio_out\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"audioPort\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 155.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\t\\\"height\\\": 15.0,\",\"\\t\\t\\t\\t\\t\\t\\\"width\\\": 5.0,\",\"\\t\\t\\t\\t\\t\\t\\\"anchor\\\": {\\\"x\\\":0, \\\"y\\\":0.5},\",\"\\t\\t\\t\\t\\t\\t\\\"mode\\\": \\\"consumer\\\"\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t],\",\"\\t\\t\\\"front\\\": [\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"gain_out_1\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\t\\\"radius\\\": 10.0,\",\"\\t\\t\\t\\t\\t\\t\\\"resetValue\\\": 0.5,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"gain_out_2\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\t\\\"radius\\\": 10.0,\",\"\\t\\t\\t\\t\\t\\t\\\"resetValue\\\": 0.5,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"gain_out_3\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 95.0,\",\"\\t\\t\\t\\t\\t\\t\\\"radius\\\": 10.0,\",\"\\t\\t\\t\\t\\t\\t\\\"resetValue\\\": 0.5,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"distortion_1\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"distortion_2\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"distortion_3\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 95.0,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"resolution_1\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 95.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"resolution_2\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 95.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"resolution_3\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 95.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 95.0,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"gain_in_1\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 130.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 25.0,\",\"\\t\\t\\t\\t\\t\\t\\\"radius\\\": 10.0,\",\"\\t\\t\\t\\t\\t\\t\\\"resetValue\\\": 0.5,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"gain_in_2\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 130.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 60.0,\",\"\\t\\t\\t\\t\\t\\t\\\"radius\\\": 10.0,\",\"\\t\\t\\t\\t\\t\\t\\\"resetValue\\\": 0.5,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t},\",\"\\t\\t\\t{\",\"\\t\\t\\t\\t\\\"name\\\": \\\"gain_in_3\\\",\",\"\\t\\t\\t\\t\\\"attribute\\\": {\",\"\\t\\t\\t\\t\\t\\\"type\\\": \\\"dialContinuousDesign1\\\",\",\"\\t\\t\\t\\t\\t\\\"content\\\": {\",\"\\t\\t\\t\\t\\t\\t\\\"x\\\": 130.0,\",\"\\t\\t\\t\\t\\t\\t\\\"y\\\": 95.0,\",\"\\t\\t\\t\\t\\t\\t\\\"radius\\\": 10.0,\",\"\\t\\t\\t\\t\\t\\t\\\"resetValue\\\": 0.5,\",\"\\t\\t\\t\\t\\t\\t\\\"styleSlot\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.02, \\\"b\\\": 0.02},\",\"\\t\\t\\t\\t\\t\\t\\\"styleHandle\\\": {\\\"r\\\": 0.65, \\\"g\\\": 0.65, \\\"b\\\": 0.65},\",\"\\t\\t\\t\\t\\t\\t\\\"styleNeedle\\\": {\\\"r\\\": 0.95, \\\"g\\\": 0.95, \\\"b\\\": 0.95},\",\"\\t\\t\\t\\t\\t\\t\\\"styleInteractionDisk\\\": {\\\"r\\\": 0.25, \\\"g\\\": 0.25, \\\"b\\\": 0.25, \\\"a\\\": 0.25}\",\"\\t\\t\\t\\t\\t}\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\\t\\t]\",\"\\t}\",\"}\"],\"includeLineNumbers\":true}],[\"$\",\"p\",null,{\"children\":\"This description should produce a unit that looks like this\"}],[\"$\",\"img\",null,{\"className\":\"style_image80__ax_CV\",\"src\":\"/guide/developer/tutorials/multi-channel-distortion/unit.png\"}],[\"$\",\"p\",null,{\"children\":\"There are no special requirements for enabling the audio engine. Audio ports are defined like any other port, except that they require a \\\"mode\\\" entry, set to either \\\"consumer\\\" or \\\"producer\\\". As the names suggest, \\\"consumer\\\" ports received audio streams while \\\"producer\\\" ports send it.\"}],[\"$\",\"p\",null,{\"children\":\"We now should have a file structure that looks like this.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"custom_audio\",\"├─ deno\",\"├─ multi_channel_distortion\",\"│  └─ index.unit\",\"└─ typescript-deno-x.x.x-y.y.y\"]}],[\"$\",\"h2\",null,{\"children\":\"The Inner Workings\"}],[\"$\",\"p\",null,{\"children\":\"Unlike the graphical design, audio nodes are created at run time using the API. One consequence of this is that we must send a request for an audio node to be created then await a response containing the nodeId of this newly created node. We then use this nodeId to set up connections between nodes, or to modify the settings of a particular node.\"}],[\"$\",\"p\",null,{\"children\":\"For the state, we will be storing the value of the dials instead of the values those dials represent. This will make reading and writing those values easier when they come from the import listener, or from the undo/redo listeners. We will then be setting up a series of conversion functions which will be used to convert dial values to the actual functioning values (eg. to distortion amount, to gain amount, etc.)\"}],[\"$\",\"p\",null,{\"children\":\"This is set to be a rather large Typescript program, so lets try to split a few things out to help. First, lets set up a map of part names to their index numbers. We'll put this in a \\\"constants.ts\\\" file.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"export const part = {\",\"\\tgainOut1: 0,\",\"\\tgainOut2: 1,\",\"\\tgainOut3: 2,\",\"\\tdistortion1: 3,\",\"\\tdistortion2: 4,\",\"\\tdistortion3: 5,\",\"\\tresolution1: 6,\",\"\\tresolution2: 7,\",\"\\tresolution3: 8,\",\"\\tgainIn1: 9,\",\"\\tgainIn2: 10,\",\"\\tgainIn3: 11\",\"};\"],\"includeLineNumbers\":true}],[\"$\",\"p\",null,{\"children\":\"Next we'll create a \\\"types.ts\\\" file to hold the interface definitions for the audio circuit nodes and the unit state itself. Note how the AudioCircuit's values are all optional. These will be filled in at runtime when the nodeIds of the requested nodes come in.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"import type { NodeId } from \\\"../typescript-deno-0.3.3-0.1.0/types/platform/audio/alpa/library/id/nodeId/index.ts\\\";\",\"\",\"export interface State {\",\"\\tgainIn1: number,\",\"\\tgainIn2: number,\",\"\\tgainIn3: number,\",\"\\tdistortion1: number,\",\"\\tdistortion2: number,\",\"\\tdistortion3: number,\",\"\\tresolution1: number,\",\"\\tresolution2: number,\",\"\\tresolution3: number,\",\"\\tgainOut1: number,\",\"\\tgainOut2: number,\",\"\\tgainOut3: number\",\"}\",\"\",\"export interface AudioCircuit {\",\"\\tstreamDuplicator1: NodeId | undefined,\",\"\\tstreamDuplicator2: NodeId | undefined,\",\"\\thighMidLowFilter1: NodeId | undefined,\",\"\\thighMidLowFilter2: NodeId | undefined,\",\"\\thighMidLowFilter3: NodeId | undefined,\",\"\\tgainIn1: NodeId | undefined,\",\"\\tgainIn2: NodeId | undefined,\",\"\\tgainIn3: NodeId | undefined,\",\"\\twaveShaper1: NodeId | undefined,\",\"\\twaveShaper2: NodeId | undefined,\",\"\\twaveShaper3: NodeId | undefined,\",\"\\tgainOut1: NodeId | undefined,\",\"\\tgainOut2: NodeId | undefined,\",\"\\tgainOut3: NodeId | undefined,\",\"\\tstreamAdder3: NodeId | undefined\",\"}\"],\"includeLineNumbers\":true}],[\"$\",\"p\",null,{\"children\":\"Finally, lets round things out with a \\\"utils.ts\\\" file. This will export two thing; a function to update the Exportable Data store, and object of functions which will be used to convert dial values to the values they represent.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"import apiConsole from \\\"../typescript-deno-0.3.3-0.1.0/index.ts\\\";\",\"\",\"import { State } from './types.ts';\",\"\",\"export function updateExportableData(state:State) {\",\"\\tapiConsole.unit.updateExportableData(\",\"\\t\\tJSON.stringify(state)\",\"\\t);\",\"}\",\"\",\"function clamp(num:number, min:number, max:number): number {\",\"\\treturn num \u003c= min ? min : num \u003e= max ? max : num;\",\"}\",\"\",\"function normalizeStretchArray(array:number[]): number[] {\",\"\\t//check for an empty array\",\"\\t\\tif(array.length === 0) { return array; }\",\"\",\"\\t//discover the largest number\",\"\\t\\tlet biggestValue = Math.max(\",\"\\t\\t\\t...array.map((a) =\u003e Math.abs(a))\",\"\\t\\t);\",\"\",\"\\t//divide everything by this largest number, making everything a ratio of this value \",\"\\t\\tconst outputArray = array.map((a) =\u003e a / biggestValue);\",\"\",\"\\t//stretch the other side of the array to meet 0 or 1\",\"\\t\\tif(outputArray[0] === 0 \u0026\u0026 array[array.length-1] === 1){ return outputArray; }\",\"\\t\\tlet pertinentValue = outputArray[0] !== 0 ? outputArray[0] : outputArray[array.length-1];\",\"\\t\\tfor(let a = 0; a \u003c outputArray.length; a++) {\",\"\\t\\t\\toutputArray[a] = (outputArray[a] - pertinentValue) / (1.0 - pertinentValue);\",\"\\t\\t}\",\"\",\"\\treturn outputArray;\",\"}\",\"\",\"function sCurve(resolution:number, distortion:number): number[] {\",\"\\tresolution = Math.round(resolution);\",\"\",\"\\tif(distortion === 0) {\",\"\\t\\treturn new Array(resolution).fill(0).map((_, index) =\u003e (index/resolution) * 2 - 1);\",\"\\t}\",\"\",\"\\tlet curve = new Array(resolution)\",\"\\t\\t.fill(0)\",\"\\t\\t.map((_, index) =\u003e {\",\"\\t\\t\\tconst step = index/resolution;\",\"\\t\\t\\treturn 1/(\",\"\\t\\t\\t\\t1 + Math.exp(-distortion*(step-0.5))\",\"\\t\\t\\t);\",\"\\t\\t}\",\"\\t);\",\"\",\"\\tcurve = normalizeStretchArray(curve);\",\"\",\"\\tfor(let a = 0; a \u003c curve.length; a++) {\",\"\\t\\tcurve[a] = curve[a] * 2 - 1;\",\"\\t}\",\"\",\"\\treturn curve;\",\"}\",\"\",\"export const interfaceTo = {\",\"\\tgain: (gainDial:number):number =\u003e gainDial * 2,\",\"\\tdistortion: (distortionDial:number):number =\u003e distortionDial * 100.0,\",\"\\tresolution: (resolutionDial:number):number =\u003e clamp((resolutionDial * 1000.0), 2, 1000),\",\"\\twaveShaperCurve: (distortionDial:number, resolutionDial:number) =\u003e sCurve(interfaceTo.resolution(distortionDial), interfaceTo.distortion(resolutionDial)),\",\"};\"],\"includeLineNumbers\":true}],[\"$\",\"p\",null,{\"children\":\"We now should have a file structure that looks like this.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"custom_audio\",\"├─ deno\",\"├─ multi_channel_distortion\",\"│  ├ constants.ts\",\"│  ├ index.unit\",\"│  ├ types.ts\",\"│  └ utils.ts\",\"└─ typescript-deno-x.x.x-y.y.y\"]}],[\"$\",\"p\",null,{\"children\":\"Now, on to the main program.\"}],[\"$\",\"h2\",null,{\"children\":\"The Main Program\"}],[\"$\",\"p\",null,{\"children\":\"The main.ts file has 5 sections.\"}],[\"$\",\"ol\",null,{\"children\":[[\"$\",\"li\",null,{\"children\":\"Defining the state\"}],[\"$\",\"li\",null,{\"children\":\"Setup\"}],[\"$\",\"li\",null,{\"children\":\"Mouse event handlers\"}],[\"$\",\"li\",null,{\"children\":\"The import hander\"}],[\"$\",\"li\",null,{\"children\":\"Undo / Redo handlers\"}]]}],[\"$\",\"p\",null,{\"children\":\"Before all that though, lets import everything we need.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"import apiConsole from \\\"../typescript-deno-0.3.3-0.1.0/index.ts\\\";\",\"import { PartEvent } from '../typescript-deno-0.3.3-0.1.0/types/platform/interface/part/event/partEvent.ts';\",\"import { Modification } from \\\"../typescript-deno-0.3.3-0.1.0/types/platform/unit/unit/modification/index.ts\\\";\",\"\",\"import { part } from './constants.ts';\",\"import { AudioCircuit, State } from './types.ts';\",\"import { interfaceTo, updateExportableData } from './utils.ts';\"]}],[\"$\",\"div\",null,{\"className\":\"style_group__F7vT_\",\"children\":[[\"$\",\"h3\",null,{\"children\":\"Defining the state\"}],[\"$\",\"p\",null,{\"children\":\"This short section crates the \\\"audioCircuit\\\" and \\\"state\\\" variables using the types defined in the \\\"types.ts\\\" file. All the values of \\\"audioCircuit\\\" are set to undefined for now as we will populate them in the 'Setup' section. The \\\"state\\\" is set to the initial 'dial-values' of the design. Here that means that all the 'gain' and 'resolution' dials are set to 0.5\"}],[\"$\",\"$L7\",null,{\"includeLineNumbers\":true,\"lines\":[\"const audioCircuit:AudioCircuit = {\",\"\\tstreamDuplicator1: undefined,\",\"\\tstreamDuplicator2: undefined,\",\"\\thighMidLowFilter1: undefined,\",\"\\thighMidLowFilter2: undefined,\",\"\\thighMidLowFilter3: undefined,\",\"\\tgainIn1: undefined,\",\"\\tgainIn2: undefined,\",\"\\tgainIn3: undefined,\",\"\\twaveShaper1: undefined,\",\"\\twaveShaper2: undefined,\",\"\\twaveShaper3: undefined,\",\"\\tgainOut1: undefined,\",\"\\tgainOut2: undefined,\",\"\\tgainOut3: undefined,\",\"\\tstreamAdder3: undefined\",\"}\",\"\",\"let state:State = {\",\"\\tgainIn1: 0.5,\",\"\\tgainIn2: 0.5,\",\"\\tgainIn3: 0.5,\",\"\\tdistortion1: 0.0,\",\"\\tdistortion2: 0.0,\",\"\\tdistortion3: 0.0,\",\"\\tresolution1: 0.5,\",\"\\tresolution2: 0.5,\",\"\\tresolution3: 0.5,\",\"\\tgainOut1: 0.5,\",\"\\tgainOut2: 0.5,\",\"\\tgainOut3: 0.5\",\"};\"]}],[\"$\",\"h3\",null,{\"children\":\"Setup\"}],[\"$\",\"p\",null,{\"children\":\"Here we create the audio nodes, connect them together, give them their initial settings and initialise the dials.\"}],[\"$\",\"p\",null,{\"children\":\"The ApiConsole's \\\"alpa.createNode\\\" command comes with a callback function which will be run when the nodeId for the requested audio node is returned from Alchemy. So, we can use this to populate the appropriate entry in the \\\"audioCircuit\\\" constant. We also run a \\\"updateAudioConnections\\\" function. This function will only allow itself to be run when all the entries of the \\\"audioCircuit\\\" constant have been populated. The function will then set up all the audio routing and set the values of the audio nodes. You will notice in that second section where the values are applied, that we use the conversion functions defined in the \\\"utils.ts\\\" file.\"}],[\"$\",\"p\",null,{\"children\":\"Under the \\\"updateAudioConnections\\\" function, we can see all the dials being initialised with the values from the \\\"state\\\" variable. \"}],[\"$\",\"$L7\",null,{\"lines\":[\"//audio circuit\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"StreamDuplicator\\\" }, (node_id) =\u003e {audioCircuit.streamDuplicator1 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"StreamDuplicator\\\" }, (node_id) =\u003e {audioCircuit.streamDuplicator2 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"HighMidLowFilter\\\" }, (node_id) =\u003e {audioCircuit.highMidLowFilter1 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"HighMidLowFilter\\\" }, (node_id) =\u003e {audioCircuit.highMidLowFilter2 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"HighMidLowFilter\\\" }, (node_id) =\u003e {audioCircuit.highMidLowFilter3 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainIn1 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainIn2 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainIn3 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"WaveShaper\\\" }, (node_id) =\u003e {audioCircuit.waveShaper1 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"WaveShaper\\\" }, (node_id) =\u003e {audioCircuit.waveShaper2 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"WaveShaper\\\" }, (node_id) =\u003e {audioCircuit.waveShaper3 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainOut1 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainOut2 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainOut3 = node_id; updateAudioConnections();});\",\"\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"StreamAdder3\\\" }, (node_id) =\u003e {audioCircuit.streamAdder3 = node_id; updateAudioConnections();});\",\"\",\"\\tfunction updateAudioConnections() {\",\"\\t\\tif(\",\"\\t\\t\\taudioCircuit.streamDuplicator1 === undefined ||\",\"\\t\\t\\taudioCircuit.streamDuplicator2 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter1 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter2 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter3 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn1 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn2 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn3 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper1 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper2 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper3 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut1 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut2 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut3 === undefined ||\",\"\\t\\t\\taudioCircuit.streamAdder3 === undefined\",\"\\t\\t) { return; }\",\"\",\"\\t\\tconst audioPortNodeIDs = apiConsole.alpa.getAudioPortNodeIds();\",\"\\t\\tif(audioPortNodeIDs === undefined) { return; }\",\"\",\"\\t\\t//routing\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioPortNodeIDs[0], 0, audioCircuit.streamDuplicator1, 0, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator1, 1, audioCircuit.streamDuplicator2, 0, () =\u003e {});\",\"\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator1, 0, audioCircuit.gainIn1, 0, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator2, 0, audioCircuit.gainIn2, 0, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator2, 1, audioCircuit.gainIn3, 0, () =\u003e {});\",\"\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn1, 0, audioCircuit.waveShaper1, 0, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn2, 0, audioCircuit.waveShaper2, 0, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn3, 0, audioCircuit.waveShaper3, 0, () =\u003e {});\",\"\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper1, 0, audioCircuit.highMidLowFilter1, 0, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper2, 0, audioCircuit.highMidLowFilter2, 0, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper3, 0, audioCircuit.highMidLowFilter3, 0, () =\u003e {});\",\"\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter1, 0, audioCircuit.gainOut1, 0, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter2, 0, audioCircuit.gainOut2, 0, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter3, 0, audioCircuit.gainOut3, 0, () =\u003e {});\",\"\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut1, 0, audioCircuit.streamAdder3, 0, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut2, 0, audioCircuit.streamAdder3, 1, () =\u003e {});\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut3, 0, audioCircuit.streamAdder3, 2, () =\u003e {});\",\"\",\"\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.streamAdder3, 0, audioPortNodeIDs[1], 0, () =\u003e {});\",\"\",\"\\t\\t//set up\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setHighBandQ(audioCircuit.highMidLowFilter1, 1);\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setMidBandQ(audioCircuit.highMidLowFilter1, 1);\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setLowBandQ(audioCircuit.highMidLowFilter1, 1);\",\"\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter1, 0);\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter1, -2.5);\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter1, -10);\",\"\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter2, -2.5);\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter2, 0);\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter2, -2.5);\",\"\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter3, -10);\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter3, -2.5);\",\"\\t\\t\\tapiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter3, 0);\",\"\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));\",\"\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));\",\"\\t}\",\"\",\"//dials\",\"\\tapiConsole.interface.dialContinuous.setValue(part.gainOut1, true, state.gainOut1);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.gainOut2, true, state.gainOut2);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.gainOut3, true, state.gainOut3);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.distortion1, true, state.distortion1);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.distortion2, true, state.distortion2);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.distortion3, true, state.distortion3);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.resolution1, true, state.resolution1);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.resolution2, true, state.resolution2);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.resolution3, true, state.resolution3);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.gainIn1, true, state.gainIn1);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.gainIn2, true, state.gainIn2);\",\"\\tapiConsole.interface.dialContinuous.setValue(part.gainIn3, true, state.gainIn3);\"],\"includeLineNumbers\":true}],[\"$\",\"h3\",null,{\"children\":\"Mouse event handlers\"}],[\"$\",\"p\",null,{\"children\":\"We need to handle both regular mouse events and mouse wheel events. Luckily these two have the same structure so we can write a single handler function and use it for both. After checking to see if the dial is on the front layer (which it should be, as there's no dials on the back layer) and that all the audio nodes exist (a requirement of Typescript) we check to see if the event is from a \\\"continuous dial\\\" then move on to handle two of the event types; \\\"change\\\" and \\\"release\\\".\"}],[\"$\",\"p\",null,{\"children\":\"\\\"Change\\\" events appear when the dial changes its value at all, thus you can expect a lot of these to appear for any adjustment of the dial. \\\"Release\\\" events only appear when the user releases the mouse. \\\"Release\\\" events also come with the value that the dial had before any change was made.\"}],[\"$\",\"p\",null,{\"children\":\"So, for \\\"change\\\" events we update the unit state and update the audio node. For \\\"release\\\" events we do the same, but also populate a \\\"modification\\\" value which is returned at the end of the function. Additionally at the end of the function we update the Exportable data state.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"function handleMouseEvent(partIndex:number, isOnFrontLayer:boolean, event:PartEvent) {\",\"\\tif(!isOnFrontLayer) { return; }\",\"\",\"\\tif(\",\"\\t\\taudioCircuit.streamDuplicator1 === undefined ||\",\"\\t\\taudioCircuit.streamDuplicator2 === undefined ||\",\"\\t\\taudioCircuit.highMidLowFilter1 === undefined ||\",\"\\t\\taudioCircuit.highMidLowFilter2 === undefined ||\",\"\\t\\taudioCircuit.highMidLowFilter3 === undefined ||\",\"\\t\\taudioCircuit.gainIn1 === undefined ||\",\"\\t\\taudioCircuit.gainIn2 === undefined ||\",\"\\t\\taudioCircuit.gainIn3 === undefined ||\",\"\\t\\taudioCircuit.waveShaper1 === undefined ||\",\"\\t\\taudioCircuit.waveShaper2 === undefined ||\",\"\\t\\taudioCircuit.waveShaper3 === undefined ||\",\"\\t\\taudioCircuit.gainOut1 === undefined ||\",\"\\t\\taudioCircuit.gainOut2 === undefined ||\",\"\\t\\taudioCircuit.gainOut3 === undefined ||\",\"\\t\\taudioCircuit.streamAdder3 === undefined\",\"\\t) { return; }\",\"\",\"\\tif(event.type === \\\"continuousDial\\\") {\",\"\\t\\tlet modification:Modification | undefined;\",\"\",\"\\t\\tif(event.content.type === \\\"change\\\") {\",\"\\t\\t\\tswitch (partIndex) {\",\"\\t\\t\\t\\tcase part.gainOut1:\",\"\\t\\t\\t\\t\\tstate.gainOut1 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.gainOut2:\",\"\\t\\t\\t\\t\\tstate.gainOut2 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.gainOut3:\",\"\\t\\t\\t\\t\\tstate.gainOut3 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.distortion1:\",\"\\t\\t\\t\\t\\tstate.distortion1 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.distortion2:\",\"\\t\\t\\t\\t\\tstate.distortion2 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.distortion3:\",\"\\t\\t\\t\\t\\tstate.distortion3 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.resolution1:\",\"\\t\\t\\t\\t\\tstate.resolution1 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.resolution2:\",\"\\t\\t\\t\\t\\tstate.resolution2 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.resolution3:\",\"\\t\\t\\t\\t\\tstate.resolution3 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.gainIn1:\",\"\\t\\t\\t\\t\\tstate.gainIn1 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.gainIn2:\",\"\\t\\t\\t\\t\\tstate.gainIn2 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.gainIn3:\",\"\\t\\t\\t\\t\\tstate.gainIn3 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t}\",\"\\t\\t} else if(event.content.type === \\\"release\\\") {\",\"\\t\\t\\tswitch (partIndex) {\",\"\\t\\t\\t\\tcase part.gainOut1:\",\"\\t\\t\\t\\t\\tstate.gainOut1 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainOut1\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.gainOut2:\",\"\\t\\t\\t\\t\\tstate.gainOut2 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainOut2\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.gainOut3:\",\"\\t\\t\\t\\t\\tstate.gainOut3 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainOut3\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.distortion1:\",\"\\t\\t\\t\\t\\tstate.distortion1 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"distortion1\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.distortion2:\",\"\\t\\t\\t\\t\\tstate.distortion2 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"distortion2\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.distortion3:\",\"\\t\\t\\t\\t\\tstate.distortion3 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"distortion3\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.resolution1: {\",\"\\t\\t\\t\\t\\tstate.resolution1 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"resolution1\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t} break;\",\"\\t\\t\\t\\tcase part.resolution2: {\",\"\\t\\t\\t\\t\\tstate.resolution2 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"resolution2\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t} break;\",\"\\t\\t\\t\\tcase part.resolution3: {\",\"\\t\\t\\t\\t\\tstate.resolution3 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"resolution3\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t} break;\",\"\\t\\t\\t\\tcase part.gainIn1:\",\"\\t\\t\\t\\t\\tstate.gainIn1 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainIn1\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.gainIn2:\",\"\\t\\t\\t\\t\\tstate.gainIn2 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainIn2\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\tcase part.gainIn3:\",\"\\t\\t\\t\\t\\tstate.gainIn3 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));\",\"\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainIn3\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\tbreak;\",\"\\t\\t\\t}\",\"\\t\\t}\",\"\",\"\\t\\tupdateExportableData(state);\",\"\",\"\\t\\treturn modification;\",\"\\t}\",\"}\",\"\",\"apiConsole.unit.setMouseEventListener(({ partIndex, isOnFrontLayer, event }) =\u003e handleMouseEvent(partIndex, isOnFrontLayer, event));\",\"\",\"apiConsole.unit.setMouseWheelEventListener(({ partIndex, isOnFrontLayer, event }) =\u003e handleMouseEvent(partIndex, isOnFrontLayer, event));\"],\"includeLineNumbers\":true}],[\"$\",\"h3\",null,{\"children\":\"The import hander\"}],[\"$\",\"p\",null,{\"children\":\"The import handler's job is simple; update everything to suit whatever data is provided. This includes updating the state value, changing the dials to suit and setting the audio node settings. As with the mouse event handler, we must check that all the audio nodes exist. Luckily however, we don't have to worry about update conflicts between the handler and the setup code above; if the audio nodes aren't present we can assume that they're being created, after which point the setup will use the state to populate their values. The very state that was updated in this function.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"apiConsole.unit.setImportListener(({dataString}) =\u003e {\",\"\\tstate = JSON.parse(dataString) as State;\",\"\",\"\\t//dials\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainOut1, true, state.gainOut1);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainOut2, true, state.gainOut2);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainOut3, true, state.gainOut3);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.distortion1, true, state.distortion1);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.distortion2, true, state.distortion2);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.distortion3, true, state.distortion3);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.resolution1, true, state.resolution1);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.resolution2, true, state.resolution2);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.resolution3, true, state.resolution3);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainIn1, true, state.gainIn1);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainIn2, true, state.gainIn2);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainIn3, true, state.gainIn3);\",\"\",\"\\t//audio circuit\",\"\\t\\tif(\",\"\\t\\t\\taudioCircuit.streamDuplicator1 === undefined ||\",\"\\t\\t\\taudioCircuit.streamDuplicator2 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter1 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter2 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter3 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn1 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn2 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn3 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper1 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper2 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper3 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut1 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut2 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut3 === undefined ||\",\"\\t\\t\\taudioCircuit.streamAdder3 === undefined\",\"\\t\\t) { return; }\",\"\",\"\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));\",\"\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));\",\"\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));\",\"\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));\",\"\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));\",\"\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));\",\"});\"],\"includeLineNumbers\":true}],[\"$\",\"h3\",null,{\"children\":\"Undo / Redo handlers\"}],[\"$\",\"p\",null,{\"children\":\"For simpler units such as this one, undo/redo can often be combined as the only real difference between the two is whether to use the \\\"before\\\" or \\\"after\\\" values. Thus we can combine the handler into one function and have the specifics decided in the undo and redo listeners. The rest of the function should be pretty familiar as it follows what has been done in previous sections; check the audio nodes exist, update the state, update the dials and update the audio nodes.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"function handleUndoRedo(meta:string, modificationValue:string) {\",\"\\tif(\",\"\\t\\taudioCircuit.streamDuplicator1 === undefined ||\",\"\\t\\taudioCircuit.streamDuplicator2 === undefined ||\",\"\\t\\taudioCircuit.highMidLowFilter1 === undefined ||\",\"\\t\\taudioCircuit.highMidLowFilter2 === undefined ||\",\"\\t\\taudioCircuit.highMidLowFilter3 === undefined ||\",\"\\t\\taudioCircuit.gainIn1 === undefined ||\",\"\\t\\taudioCircuit.gainIn2 === undefined ||\",\"\\t\\taudioCircuit.gainIn3 === undefined ||\",\"\\t\\taudioCircuit.waveShaper1 === undefined ||\",\"\\t\\taudioCircuit.waveShaper2 === undefined ||\",\"\\t\\taudioCircuit.waveShaper3 === undefined ||\",\"\\t\\taudioCircuit.gainOut1 === undefined ||\",\"\\t\\taudioCircuit.gainOut2 === undefined ||\",\"\\t\\taudioCircuit.gainOut3 === undefined ||\",\"\\t\\taudioCircuit.streamAdder3 === undefined\",\"\\t) { return; }\",\"\",\"\\tstate[meta] = JSON.parse(modificationValue);\",\"\\tapiConsole.interface.dialContinuous.setValue(part[meta], true, state[meta]);\",\"\",\"\\tswitch(meta) {\",\"\\t\\tcase \\\"gainOut1\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state[meta])); break;\",\"\\t\\tcase \\\"gainOut2\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state[meta])); break;\",\"\\t\\tcase \\\"gainOut3\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state[meta])); break;\",\"\\t\\tcase \\\"gainIn1\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state[meta])); break;\",\"\\t\\tcase \\\"gainIn2\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state[meta])); break;\",\"\\t\\tcase \\\"gainIn3\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state[meta])); break;\",\"\",\"\\t\\tcase \\\"distortion1\\\":\",\"\\t\\tcase \\\"resolution1\\\":\",\"\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\tbreak;\",\"\",\"\\t\\tcase \\\"distortion2\\\":\",\"\\t\\tcase \\\"resolution2\\\":\",\"\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\tbreak;\",\"\",\"\\t\\tcase \\\"distortion3\\\":\",\"\\t\\tcase \\\"resolution3\\\":\",\"\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\tbreak;\",\"\\t}\",\"}\",\"\",\"apiConsole.unit.setUndoListener(({modification}) =\u003e {\",\"\\thandleUndoRedo(modification.meta, modification.before);\",\"\\tupdateExportableData(state);\",\"});\",\"\",\"apiConsole.unit.setRedoListener(({modification}) =\u003e {\",\"\\thandleUndoRedo(modification.meta, modification.after);\",\"\\tupdateExportableData(state);\",\"});\"],\"includeLineNumbers\":true}]]}],[\"$\",\"p\",null,{\"children\":\"In the end, we should have a file that looks like this.\"}],[\"$\",\"$L7\",null,{\"lines\":[\"import apiConsole from \\\"../typescript-deno-0.3.3-0.1.0/index.ts\\\";\",\"import { PartEvent } from '../typescript-deno-0.3.3-0.1.0/types/platform/interface/part/event/partEvent.ts';\",\"import { Modification } from \\\"../typescript-deno-0.3.3-0.1.0/types/platform/unit/unit/modification/index.ts\\\";\",\"\",\"import { part } from './constants.ts';\",\"import { AudioCircuit, State } from './types.ts';\",\"import { interfaceTo, updateExportableData } from './utils.ts';\",\"\",\"//state\",\"\\tconst audioCircuit:AudioCircuit = {\",\"\\t\\tstreamDuplicator1: undefined,\",\"\\t\\tstreamDuplicator2: undefined,\",\"\\t\\thighMidLowFilter1: undefined,\",\"\\t\\thighMidLowFilter2: undefined,\",\"\\t\\thighMidLowFilter3: undefined,\",\"\\t\\tgainIn1: undefined,\",\"\\t\\tgainIn2: undefined,\",\"\\t\\tgainIn3: undefined,\",\"\\t\\twaveShaper1: undefined,\",\"\\t\\twaveShaper2: undefined,\",\"\\t\\twaveShaper3: undefined,\",\"\\t\\tgainOut1: undefined,\",\"\\t\\tgainOut2: undefined,\",\"\\t\\tgainOut3: undefined,\",\"\\t\\tstreamAdder3: undefined\",\"\\t}\",\"\",\"\\tlet state:State = {\",\"\\t\\tgainIn1: 0.5,\",\"\\t\\tgainIn2: 0.5,\",\"\\t\\tgainIn3: 0.5,\",\"\\t\\tdistortion1: 0.0,\",\"\\t\\tdistortion2: 0.0,\",\"\\t\\tdistortion3: 0.0,\",\"\\t\\tresolution1: 0.5,\",\"\\t\\tresolution2: 0.5,\",\"\\t\\tresolution3: 0.5,\",\"\\t\\tgainOut1: 0.5,\",\"\\t\\tgainOut2: 0.5,\",\"\\t\\tgainOut3: 0.5\",\"\\t};\",\"\",\"//setup\",\"\\t//audio circuit\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"StreamDuplicator\\\" }, (node_id) =\u003e {audioCircuit.streamDuplicator1 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"StreamDuplicator\\\" }, (node_id) =\u003e {audioCircuit.streamDuplicator2 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"HighMidLowFilter\\\" }, (node_id) =\u003e {audioCircuit.highMidLowFilter1 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"HighMidLowFilter\\\" }, (node_id) =\u003e {audioCircuit.highMidLowFilter2 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"HighMidLowFilter\\\" }, (node_id) =\u003e {audioCircuit.highMidLowFilter3 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainIn1 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainIn2 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainIn3 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"WaveShaper\\\" }, (node_id) =\u003e {audioCircuit.waveShaper1 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"WaveShaper\\\" }, (node_id) =\u003e {audioCircuit.waveShaper2 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"WaveShaper\\\" }, (node_id) =\u003e {audioCircuit.waveShaper3 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainOut1 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainOut2 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"Gain\\\" }, (node_id) =\u003e {audioCircuit.gainOut3 = node_id; updateAudioConnections();});\",\"\\t\\tapiConsole.alpa.createNode({ \\\"type\\\": \\\"StreamAdder3\\\" }, (node_id) =\u003e {audioCircuit.streamAdder3 = node_id; updateAudioConnections();});\",\"\",\"\\t\\tfunction updateAudioConnections() {\",\"\\t\\t\\tif(\",\"\\t\\t\\t\\taudioCircuit.streamDuplicator1 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.streamDuplicator2 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.highMidLowFilter1 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.highMidLowFilter2 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.highMidLowFilter3 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainIn1 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainIn2 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainIn3 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.waveShaper1 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.waveShaper2 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.waveShaper3 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainOut1 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainOut2 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainOut3 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.streamAdder3 === undefined\",\"\\t\\t\\t) { return; }\",\"\",\"\\t\\t\\tconst audioPortNodeIDs = apiConsole.alpa.getAudioPortNodeIds();\",\"\\t\\t\\tif(audioPortNodeIDs === undefined) { return; }\",\"\",\"\\t\\t\\t//routing\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioPortNodeIDs[0], 0, audioCircuit.streamDuplicator1, 0, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator1, 1, audioCircuit.streamDuplicator2, 0, () =\u003e {});\",\"\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator1, 0, audioCircuit.gainIn1, 0, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator2, 0, audioCircuit.gainIn2, 0, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.streamDuplicator2, 1, audioCircuit.gainIn3, 0, () =\u003e {});\",\"\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn1, 0, audioCircuit.waveShaper1, 0, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn2, 0, audioCircuit.waveShaper2, 0, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainIn3, 0, audioCircuit.waveShaper3, 0, () =\u003e {});\",\"\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper1, 0, audioCircuit.highMidLowFilter1, 0, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper2, 0, audioCircuit.highMidLowFilter2, 0, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.waveShaper3, 0, audioCircuit.highMidLowFilter3, 0, () =\u003e {});\",\"\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter1, 0, audioCircuit.gainOut1, 0, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter2, 0, audioCircuit.gainOut2, 0, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.highMidLowFilter3, 0, audioCircuit.gainOut3, 0, () =\u003e {});\",\"\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut1, 0, audioCircuit.streamAdder3, 0, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut2, 0, audioCircuit.streamAdder3, 1, () =\u003e {});\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.gainOut3, 0, audioCircuit.streamAdder3, 2, () =\u003e {});\",\"\",\"\\t\\t\\t\\tapiConsole.alpa.createRouteNodeToNode(audioCircuit.streamAdder3, 0, audioPortNodeIDs[1], 0, () =\u003e {});\",\"\",\"\\t\\t\\t//set up\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setHighBandQ(audioCircuit.highMidLowFilter1, 1);\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setMidBandQ(audioCircuit.highMidLowFilter1, 1);\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setLowBandQ(audioCircuit.highMidLowFilter1, 1);\",\"\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter1, 0);\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter1, -2.5);\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter1, -10);\",\"\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter2, -2.5);\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter2, 0);\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter2, -2.5);\",\"\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setHighBandGain(audioCircuit.highMidLowFilter3, -10);\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setMidBandGain(audioCircuit.highMidLowFilter3, -2.5);\",\"\\t\\t\\t\\tapiConsole.alpa.highMidLowFilter.setLowBandGain(audioCircuit.highMidLowFilter3, 0);\",\"\",\"\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));\",\"\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));\",\"\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));\",\"\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));\",\"\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));\",\"\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));\",\"\\t\\t}\",\"\",\"\\t//dials\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainOut1, true, state.gainOut1);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainOut2, true, state.gainOut2);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainOut3, true, state.gainOut3);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.distortion1, true, state.distortion1);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.distortion2, true, state.distortion2);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.distortion3, true, state.distortion3);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.resolution1, true, state.resolution1);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.resolution2, true, state.resolution2);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.resolution3, true, state.resolution3);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainIn1, true, state.gainIn1);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainIn2, true, state.gainIn2);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainIn3, true, state.gainIn3);\",\"\",\"//mouse events\",\"\\tfunction handleMouseEvent(partIndex:number, isOnFrontLayer:boolean, event:PartEvent) {\",\"\\t\\tif(!isOnFrontLayer) { return; }\",\"\",\"\\t\\tif(\",\"\\t\\t\\taudioCircuit.streamDuplicator1 === undefined ||\",\"\\t\\t\\taudioCircuit.streamDuplicator2 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter1 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter2 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter3 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn1 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn2 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn3 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper1 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper2 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper3 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut1 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut2 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut3 === undefined ||\",\"\\t\\t\\taudioCircuit.streamAdder3 === undefined\",\"\\t\\t) { return; }\",\"\",\"\\t\\tif(event.type === \\\"continuousDial\\\") {\",\"\\t\\t\\tlet modification:Modification | undefined;\",\"\",\"\\t\\t\\tif(event.content.type === \\\"change\\\") {\",\"\\t\\t\\t\\tswitch (partIndex) {\",\"\\t\\t\\t\\t\\tcase part.gainOut1:\",\"\\t\\t\\t\\t\\t\\tstate.gainOut1 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.gainOut2:\",\"\\t\\t\\t\\t\\t\\tstate.gainOut2 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.gainOut3:\",\"\\t\\t\\t\\t\\t\\tstate.gainOut3 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.distortion1:\",\"\\t\\t\\t\\t\\t\\tstate.distortion1 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.distortion2:\",\"\\t\\t\\t\\t\\t\\tstate.distortion2 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.distortion3:\",\"\\t\\t\\t\\t\\t\\tstate.distortion3 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.resolution1:\",\"\\t\\t\\t\\t\\t\\tstate.resolution1 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.resolution2:\",\"\\t\\t\\t\\t\\t\\tstate.resolution2 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.resolution3:\",\"\\t\\t\\t\\t\\t\\tstate.resolution3 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.gainIn1:\",\"\\t\\t\\t\\t\\t\\tstate.gainIn1 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.gainIn2:\",\"\\t\\t\\t\\t\\t\\tstate.gainIn2 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.gainIn3:\",\"\\t\\t\\t\\t\\t\\tstate.gainIn3 = event.content.content.currentLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t} else if(event.content.type === \\\"release\\\") {\",\"\\t\\t\\t\\tswitch (partIndex) {\",\"\\t\\t\\t\\t\\tcase part.gainOut1:\",\"\\t\\t\\t\\t\\t\\tstate.gainOut1 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainOut1\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.gainOut2:\",\"\\t\\t\\t\\t\\t\\tstate.gainOut2 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainOut2\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.gainOut3:\",\"\\t\\t\\t\\t\\t\\tstate.gainOut3 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainOut3\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.distortion1:\",\"\\t\\t\\t\\t\\t\\tstate.distortion1 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"distortion1\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.distortion2:\",\"\\t\\t\\t\\t\\t\\tstate.distortion2 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"distortion2\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.distortion3:\",\"\\t\\t\\t\\t\\t\\tstate.distortion3 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"distortion3\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.resolution1: {\",\"\\t\\t\\t\\t\\t\\tstate.resolution1 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"resolution1\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\t} break;\",\"\\t\\t\\t\\t\\tcase part.resolution2: {\",\"\\t\\t\\t\\t\\t\\tstate.resolution2 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"resolution2\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\t} break;\",\"\\t\\t\\t\\t\\tcase part.resolution3: {\",\"\\t\\t\\t\\t\\t\\tstate.resolution3 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"resolution3\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\t} break;\",\"\\t\\t\\t\\t\\tcase part.gainIn1:\",\"\\t\\t\\t\\t\\t\\tstate.gainIn1 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainIn1\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.gainIn2:\",\"\\t\\t\\t\\t\\t\\tstate.gainIn2 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainIn2\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t\\tcase part.gainIn3:\",\"\\t\\t\\t\\t\\t\\tstate.gainIn3 = event.content.content.finishLocation;\",\"\\t\\t\\t\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));\",\"\\t\\t\\t\\t\\t\\tmodification = apiConsole.createModification(\\\"gainIn3\\\", JSON.stringify(event.content.content.initialLocation), JSON.stringify(event.content.content.finishLocation));\",\"\\t\\t\\t\\t\\tbreak;\",\"\\t\\t\\t\\t}\",\"\\t\\t\\t}\",\"\",\"\\t\\t\\tupdateExportableData(state);\",\"\",\"\\t\\t\\treturn modification;\",\"\\t\\t}\",\"\\t}\",\"\",\"\\tapiConsole.unit.setMouseEventListener(({ partIndex, isOnFrontLayer, event }) =\u003e handleMouseEvent(partIndex, isOnFrontLayer, event));\",\"\",\"\\tapiConsole.unit.setMouseWheelEventListener(({ partIndex, isOnFrontLayer, event }) =\u003e handleMouseEvent(partIndex, isOnFrontLayer, event));\",\"\",\"//import\",\"\\tapiConsole.unit.setImportListener(({dataString}) =\u003e {\",\"\\t\\tstate = JSON.parse(dataString) as State;\",\"\",\"\\t\\t//dials\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainOut1, true, state.gainOut1);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainOut2, true, state.gainOut2);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainOut3, true, state.gainOut3);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.distortion1, true, state.distortion1);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.distortion2, true, state.distortion2);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.distortion3, true, state.distortion3);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.resolution1, true, state.resolution1);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.resolution2, true, state.resolution2);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.resolution3, true, state.resolution3);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainIn1, true, state.gainIn1);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainIn2, true, state.gainIn2);\",\"\\t\\t\\tapiConsole.interface.dialContinuous.setValue(part.gainIn3, true, state.gainIn3);\",\"\",\"\\t\\t//audio circuit\",\"\\t\\t\\tif(\",\"\\t\\t\\t\\taudioCircuit.streamDuplicator1 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.streamDuplicator2 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.highMidLowFilter1 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.highMidLowFilter2 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.highMidLowFilter3 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainIn1 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainIn2 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainIn3 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.waveShaper1 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.waveShaper2 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.waveShaper3 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainOut1 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainOut2 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.gainOut3 === undefined ||\",\"\\t\\t\\t\\taudioCircuit.streamAdder3 === undefined\",\"\\t\\t\\t) { return; }\",\"\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state.gainOut1));\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state.gainOut2));\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state.gainOut3));\",\"\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state.gainIn1));\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state.gainIn2));\",\"\\t\\t\\tapiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state.gainIn3));\",\"\\t});\",\"\",\"//undo / redo\",\"\\tfunction handleUndoRedo(meta:string, modificationValue:string) {\",\"\\t\\tif(\",\"\\t\\t\\taudioCircuit.streamDuplicator1 === undefined ||\",\"\\t\\t\\taudioCircuit.streamDuplicator2 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter1 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter2 === undefined ||\",\"\\t\\t\\taudioCircuit.highMidLowFilter3 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn1 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn2 === undefined ||\",\"\\t\\t\\taudioCircuit.gainIn3 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper1 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper2 === undefined ||\",\"\\t\\t\\taudioCircuit.waveShaper3 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut1 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut2 === undefined ||\",\"\\t\\t\\taudioCircuit.gainOut3 === undefined ||\",\"\\t\\t\\taudioCircuit.streamAdder3 === undefined\",\"\\t\\t) { return; }\",\"\",\"\\t\\tstate[meta] = JSON.parse(modificationValue);\",\"\\t\\tapiConsole.interface.dialContinuous.setValue(part[meta], true, state[meta]);\",\"\",\"\\t\\tswitch(meta) {\",\"\\t\\t\\tcase \\\"gainOut1\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainOut1, interfaceTo.gain(state[meta])); break;\",\"\\t\\t\\tcase \\\"gainOut2\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainOut2, interfaceTo.gain(state[meta])); break;\",\"\\t\\t\\tcase \\\"gainOut3\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainOut3, interfaceTo.gain(state[meta])); break;\",\"\\t\\t\\tcase \\\"gainIn1\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainIn1, interfaceTo.gain(state[meta])); break;\",\"\\t\\t\\tcase \\\"gainIn2\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainIn2, interfaceTo.gain(state[meta])); break;\",\"\\t\\t\\tcase \\\"gainIn3\\\": apiConsole.alpa.gain.setValue(audioCircuit.gainIn3, interfaceTo.gain(state[meta])); break;\",\"\",\"\\t\\t\\tcase \\\"distortion1\\\":\",\"\\t\\t\\tcase \\\"resolution1\\\":\",\"\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper1, interfaceTo.waveShaperCurve(state.resolution1, state.distortion1));\",\"\\t\\t\\tbreak;\",\"\",\"\\t\\t\\tcase \\\"distortion2\\\":\",\"\\t\\t\\tcase \\\"resolution2\\\":\",\"\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper2, interfaceTo.waveShaperCurve(state.resolution2, state.distortion2));\",\"\\t\\t\\tbreak;\",\"\",\"\\t\\t\\tcase \\\"distortion3\\\":\",\"\\t\\t\\tcase \\\"resolution3\\\":\",\"\\t\\t\\t\\tapiConsole.alpa.waveShaper.setCurve(audioCircuit.waveShaper3, interfaceTo.waveShaperCurve(state.resolution3, state.distortion3));\",\"\\t\\t\\tbreak;\",\"\\t\\t}\",\"\\t}\",\"\",\"\\tapiConsole.unit.setUndoListener(({modification}) =\u003e {\",\"\\t\\thandleUndoRedo(modification.meta, modification.before);\",\"\\t\\tupdateExportableData(state);\",\"\\t});\",\"\",\"\\tapiConsole.unit.setRedoListener(({modification}) =\u003e {\",\"\\t\\thandleUndoRedo(modification.meta, modification.after);\",\"\\t\\tupdateExportableData(state);\",\"\\t});\"],\"includeLineNumbers\":true}],[\"$\",\"p\",null,{\"children\":\"And this should leave us finally with a file structure like so\"}],[\"$\",\"$L7\",null,{\"lines\":[\"custom_audio\",\"├─ deno\",\"├─ multi_channel_distortion\",\"│  ├ constants.ts\",\"│  ├ index.unit\",\"│  ├ types.ts\",\"│  └ utils.ts\",\"└─ typescript-deno-x.x.x-y.y.y\"]}],[\"$\",\"h2\",null,{\"children\":\"Done!\"}],[\"$\",\"p\",null,{\"children\":\"Congratulations! You've just created a new unit which uses the audio engine. You can now play around with it in whatever way you like. Personally, I find it sounds great as a distortion box for an electric guitar. Having the ability to chose how much distortion I have for High or Low frequencies really gives lots of freedom in what sounds you can create.\"}],[\"$\",\"img\",null,{\"className\":\"style_image__0ycHi\",\"src\":\"/guide/developer/tutorials/multi-channel-distortion/unit-in-system.png\"}]]}],[\"$\",\"div\",null,{\"className\":\"style_previousNext__Pea0Y\",\"children\":[\"$undefined\",\"$undefined\"]}]]}]]}]}]],null],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\",\"developer\",\"children\",\"tutorials\",\"children\",\"article\",\"children\",\"multi-channel-distortion\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0686439a7d1c5f34.css\",\"precedence\":\"next\",\"crossOrigin\":\"$undefined\"}]]}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\",\"developer\",\"children\",\"tutorials\",\"children\",\"article\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\",\"developer\",\"children\",\"tutorials\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\",\"developer\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"guide\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":null}],null]},[[\"$\",\"html\",null,{\"lang\":\"en\",\"children\":[\"$\",\"body\",null,{\"className\":\"__className_c0d5fb\",\"children\":[\"$\",\"div\",null,{\"className\":\"style_main__l8Il9\",\"children\":[[\"$\",\"div\",null,{\"children\":[[[\"$\",\"div\",null,{\"className\":\"style_desktop__CvcZU\",\"children\":[\"$\",\"div\",null,{\"className\":\"style_main__JqgJs\",\"children\":[[\"$\",\"div\",null,{\"className\":\"style_logo___Nv4Y\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/\",\"className\":\"style_logoLink__8L3yx\",\"children\":[\"$\",\"img\",null,{\"src\":\"/icon.png\",\"className\":\"style_logoImage__PktfC\"}]}]}],[\"$\",\"div\",null,{\"className\":\"style_links__h4_vb\",\"children\":[[[\"$\",\"div\",\"link-0\",{\"className\":\"style_linkAndSub__7qTZ1\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"/news\",\"className\":\"style_link__4XuJC\",\"children\":\"News\"}],\"$undefined\"]}],[\"$\",\"div\",\"link-1\",{\"className\":\"style_linkAndSub__7qTZ1\",\"children\":[[\"$\",\"$L6\",null,{\"href\":\"/guide\",\"className\":\"style_link__4XuJC\",\"children\":\"Guide\"}],[\"$\",\"div\",null,{\"className\":\"style_sub__vF1DF\",\"children\":[[\"$\",\"div\",\"link-1-sublink-0\",{\"className\":\"style_linkAndSub__7qTZ1\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/guide/getting-started\",\"className\":\"style_link__4XuJC\",\"children\":\"Getting Started\"}]}],[\"$\",\"div\",\"link-1-sublink-1\",{\"className\":\"style_linkAndSub__7qTZ1\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/guide/units\",\"className\":\"style_link__4XuJC\",\"children\":\"Units\"}]}],[\"$\",\"div\",\"link-1-sublink-2\",{\"className\":\"style_linkAndSub__7qTZ1\",\"children\":[\"$\",\"$L6\",null,{\"href\":\"/guide/developer\",\"className\":\"style_link__4XuJC\",\"children\":\"Developer\"}]}]]}]]}]],[\"$\",\"$L6\",null,{\"href\":\"/download\",\"className\":\"style_download__caECe\",\"children\":\"Download\"}]]}]]}]}],[\"$\",\"div\",null,{\"className\":\"style_mobile__mRKt2\",\"children\":[\"$\",\"$La\",null,{}]}]],[\"$\",\"$L8\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$L9\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]],\"notFoundStyles\":[],\"styles\":null}]]}],[\"$\",\"footer\",null,{\"className\":\"style_main__NsKqp\",\"children\":[[\"$\",\"img\",null,{\"src\":\"/four_colour_stripes_banner.png\",\"className\":\"style_backgroundImage___DZ8F\"}],[\"$\",\"div\",null,{\"className\":\"style_overlay__nf3f4\",\"children\":[\"$\",\"p\",null,{\"children\":\"© Metasophiea / Interloper 2024\"}]}]]}]]}]}]}],null],null],\"couldBeIntercepted\":false,\"initialHead\":[false,\"$Lb\"],\"globalErrorComponent\":\"$c\",\"missingSlots\":\"$Wd\"}]]\n"])</script><script>self.__next_f.push([1,"b:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Alchemy\"}],[\"$\",\"meta\",\"3\",{\"name\":\"description\",\"content\":\"A Virtual Studio\"}],[\"$\",\"meta\",\"4\",{\"name\":\"next-size-adjust\"}]]\n5:null\n"])</script></body></html>